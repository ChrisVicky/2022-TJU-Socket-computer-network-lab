window.BlockEngine=function(e){function t(t){for(var n,o,a=t[0],i=t[1],s=0,u=[];s<a.length;s++)o=a[s],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=a);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+({1:"vendors~op-engine-components"}[e]||e)+"."+{1:"02a214609d3830651362"}[e]+".js"}(e);var c=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var a=self.webpackJsonpBlockEngine=self.webpackJsonpBlockEngine||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var c=i;return o(o.s=194)}([function(e,t,n){var r=n(74);e.exports=function(e,t,n){return t in e?r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";(function(e){var r,o,a;n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return f})),n.d(t,"l",(function(){return _})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return g})),function(e){e[e.trace=1]="trace",e[e.normal=2]="normal",e[e.warn=3]="warn",e[e.error=4]="error",e[e.fatal=5]="fatal"}(r||(r={})),function(e){e.traceId="trace_id",e.errorCode="error_code",e.errorMsg="error_msg",e.time="time",e.duration="duration",e.monitorLevel="monitor_level",e.monitorDomain="monitor_domain",e.monitorCode="monitor_code",e.monitorID="monitor_id",e.monitorMessage="monitor_message",e.monitorTags="monitor_tags",e.monitorFile="monitor_file",e.monitorFunction="monitor_function",e.monitorLine="monitor_line",e.monitorColumn="monitor_column",e.monitorStack="monitor_stack",e.resultType="result_type"}(o||(o={})),function(e){e.BATCH="BATCH"}(a||(a={}));var i,s;!function(e){e.success="success",e.fail="fail",e.cancel="cancel",e.timeout="timeout"}(i||(i={})),function(e){e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.fatal=5]="fatal"}(s||(s={}));const c=1,u={tagSeperator:",",defaultReportName:"op_monitor_event",defaultLogTag:"op_monitor",eventName:"event_name"};var p,l;!function(e){e.warn="warn",e.error="error"}(p||(p={})),function(e){e.sampleRate="sample_rate",e.traceSampleRate="trace_sample_rate",e.normalSampleRate="normal_sample_rate",e.warnSampleRate="warn_sample_rate",e.errorSampleRate="error_sample_rate",e.fatalSampleRate="fatal_sample_rate",e.rules="rules",e.priority="priority",e.filters="filters",e.key="key",e.values="values"}(l||(l={}));const d="Slardar",h=()=>{};function _(e){return void 0===e}const f={string:function(e){return"string"==typeof e||"String"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)},undefined:_,void:function(e){return _(e)||null===e},object:function(e){return null!==e&&"object"==typeof e},number:function(e){return"number"==typeof e&&!Number.isNaN(e)},function:function(e){return"function"==typeof e}};function g(e,t){return Object.entries(e).filter(([e,n])=>!t(n,e)).reduce((e,[t,n])=>Object.assign(e,{[t]:n}),{})}function E(e,t,n){Object.defineProperty(e,t,{get:()=>n,set(){}})}let m;function y(){return m||(m=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}())}}).call(this,n(5))},function(e,t,n){"use strict";(function(e){var r,o,a;n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return E})),function(e){e[e.trace=1]="trace",e[e.normal=2]="normal",e[e.warn=3]="warn",e[e.error=4]="error",e[e.fatal=5]="fatal"}(r||(r={})),function(e){e.traceId="trace_id",e.errorCode="error_code",e.errorMsg="error_msg",e.time="time",e.duration="duration",e.monitorLevel="monitor_level",e.monitorDomain="monitor_domain",e.monitorCode="monitor_code",e.monitorID="monitor_id",e.monitorMessage="monitor_message",e.monitorTags="monitor_tags",e.monitorFile="monitor_file",e.monitorFunction="monitor_function",e.monitorLine="monitor_line",e.monitorColumn="monitor_column",e.monitorStack="monitor_stack",e.resultType="result_type"}(o||(o={})),function(e){e.BATCH="BATCH"}(a||(a={}));const i="1";var s,c;!function(e){e.success="success",e.fail="fail",e.cancel="cancel",e.timeout="timeout"}(s||(s={})),function(e){e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.fatal=5]="fatal"}(c||(c={}));var u,p;!function(e){e.warn="warn",e.error="error"}(u||(u={})),function(e){e.sampleRate="sample_rate",e.traceSampleRate="trace_sample_rate",e.normalSampleRate="normal_sample_rate",e.warnSampleRate="warn_sample_rate",e.errorSampleRate="error_sample_rate",e.fatalSampleRate="fatal_sample_rate",e.rules="rules",e.priority="priority",e.filters="filters",e.key="key",e.values="values"}(p||(p={}));const l="monitor_batch_report",d="monitor.base.batch",h=1e4,_=2,f="monitor_batch_code",g="batch";function E(e){return e?`${e}-${[...Array(8)].map(()=>Math.floor(36*Math.random()).toString(36)).join("")}`:""}}).call(this,n(5))},function(e,t,n){"use strict";var r=n(60),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function i(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===o.call(e)}function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:i,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:p,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)p(arguments[r],n);return t},extend:function(e,t,n){return p(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){var r=n(44),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(102),o=n(107);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";(function(e){function r(){return"undefined"!=typeof globalThis&&globalThis?globalThis:"undefined"!=typeof self&&self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0}let o;function a(){return o||(o=r())}function i(){if("undefined"==typeof globalThis){const e=r();e.globalThis=e}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))}).call(this,n(5))},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},,function(e,t,n){var r=n(14);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(27),o=n(103),a=n(104),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(92),o=n(93),a=n(94),i=n(95),s=n(96);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(12);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(6)(Object,"create");e.exports=r},function(e,t,n){var r=n(116);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(26),o=n(53);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(151);e.exports=function(e,t){return r(e,t)}},function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},r=function(e){return e&&e.Math==Math&&e},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a={},i=function(e){try{return!!e()}catch(e){return!0}},s=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={},u={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,l=p&&!u.call({1:2},1);c.f=l?function(e){var t=p(this,e);return!!t&&t.enumerable}:u;var d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h={}.toString,_=function(e){return h.call(e).slice(8,-1)},f=_,g="".split,E=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==f(e)?g.call(e,""):Object(e)}:Object,m=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},y=E,A=m,T=function(e){return y(A(e))},S=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=S,R=function(e,t){if(!v(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!v(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!v(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},O=m,C=function(e){return Object(O(e))},I=C,P={}.hasOwnProperty,w=Object.hasOwn||function(e,t){return P.call(I(e),t)},b=S,N=o.document,M=b(N)&&b(N.createElement),L=function(e){return M?N.createElement(e):{}},k=!s&&!i((function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a})),D=s,U=c,K=d,x=T,F=R,H=w,j=k,B=Object.getOwnPropertyDescriptor;a.f=D?B:function(e,t){if(e=x(e),t=F(t,!0),j)try{return B(e,t)}catch(e){}if(H(e,t))return K(!U.f.call(e,t),e[t])};var G={},V=S,W=function(e){if(!V(e))throw TypeError(String(e)+" is not an object");return e},q=s,$=k,Q=W,z=R,Y=Object.defineProperty;G.f=q?Y:function(e,t,n){if(Q(e),t=z(t,!0),Q(n),$)try{return Y(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var J=G,X=d,Z=s?function(e,t,n){return J.f(e,t,X(1,n))}:function(e,t,n){return e[t]=n,e},ee={exports:{}},te=o,ne=Z,re=function(e,t){try{ne(te,e,t)}catch(n){te[e]=t}return t},oe=re,ae=o["__core-js_shared__"]||oe("__core-js_shared__",{}),ie=ae,se=Function.toString;"function"!=typeof ie.inspectSource&&(ie.inspectSource=function(e){return se.call(e)});var ce=ie.inspectSource,ue=ce,pe=o.WeakMap,le="function"==typeof pe&&/native code/.test(ue(pe)),de={exports:{}},he=ae;(de.exports=function(e,t){return he[e]||(he[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var _e,fe,ge,Ee=0,me=Math.random(),ye=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Ee+me).toString(36)},Ae=de.exports,Te=ye,Se=Ae("keys"),ve={},Re=le,Oe=S,Ce=Z,Ie=w,Pe=ae,we=function(e){return Se[e]||(Se[e]=Te(e))},be=ve,Ne=o.WeakMap;if(Re||Pe.state){var Me=Pe.state||(Pe.state=new Ne),Le=Me.get,ke=Me.has,De=Me.set;_e=function(e,t){if(ke.call(Me,e))throw new TypeError("Object already initialized");return t.facade=e,De.call(Me,e,t),t},fe=function(e){return Le.call(Me,e)||{}},ge=function(e){return ke.call(Me,e)}}else{var Ue=we("state");be[Ue]=!0,_e=function(e,t){if(Ie(e,Ue))throw new TypeError("Object already initialized");return t.facade=e,Ce(e,Ue,t),t},fe=function(e){return Ie(e,Ue)?e[Ue]:{}},ge=function(e){return Ie(e,Ue)}}var Ke={set:_e,get:fe,has:ge,enforce:function(e){return ge(e)?fe(e):_e(e,{})},getterFor:function(e){return function(t){var n;if(!Oe(t)||(n=fe(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},xe=o,Fe=Z,He=w,je=re,Be=ce,Ge=Ke.get,Ve=Ke.enforce,We=String(String).split("String");(ee.exports=function(e,t,n,r){var o,a=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||He(n,"name")||Fe(n,"name",t),(o=Ve(n)).source||(o.source=We.join("string"==typeof t?t:""))),e!==xe?(a?!s&&e[t]&&(i=!0):delete e[t],i?e[t]=n:Fe(e,t,n)):i?e[t]=n:je(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ge(this).source||Be(this)}));var qe=o,$e=qe,Qe=o,ze=function(e){return"function"==typeof e?e:void 0},Ye=function(e,t){return arguments.length<2?ze($e[e])||ze(Qe[e]):$e[e]&&$e[e][t]||Qe[e]&&Qe[e][t]},Je={},Xe=Math.ceil,Ze=Math.floor,et=function(e){return isNaN(e=+e)?0:(e>0?Ze:Xe)(e)},tt=et,nt=Math.min,rt=function(e){return e>0?nt(tt(e),9007199254740991):0},ot=et,at=Math.max,it=Math.min,st=T,ct=rt,ut=function(e,t){var n=ot(e);return n<0?at(n+t,0):it(n,t)},pt=function(e){return function(t,n,r){var o,a=st(t),i=ct(a.length),s=ut(r,i);if(e&&n!=n){for(;i>s;)if((o=a[s++])!=o)return!0}else for(;i>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},lt={includes:pt(!0),indexOf:pt(!1)},dt=w,ht=T,_t=lt.indexOf,ft=ve,gt=function(e,t){var n,r=ht(e),o=0,a=[];for(n in r)!dt(ft,n)&&dt(r,n)&&a.push(n);for(;t.length>o;)dt(r,n=t[o++])&&(~_t(a,n)||a.push(n));return a},Et=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mt=gt,yt=Et.concat("length","prototype");Je.f=Object.getOwnPropertyNames||function(e){return mt(e,yt)};var At={};At.f=Object.getOwnPropertySymbols;var Tt,St,vt=Je,Rt=At,Ot=W,Ct=Ye("Reflect","ownKeys")||function(e){var t=vt.f(Ot(e)),n=Rt.f;return n?t.concat(n(e)):t},It=w,Pt=Ct,wt=a,bt=G,Nt=i,Mt=/#|\.prototype\./,Lt=function(e,t){var n=Dt[kt(e)];return n==Kt||n!=Ut&&("function"==typeof t?Nt(t):!!t)},kt=Lt.normalize=function(e){return String(e).replace(Mt,".").toLowerCase()},Dt=Lt.data={},Ut=Lt.NATIVE="N",Kt=Lt.POLYFILL="P",xt=Lt,Ft=o,Ht=a.f,jt=Z,Bt=ee.exports,Gt=re,Vt=function(e,t){for(var n=Pt(t),r=bt.f,o=wt.f,a=0;a<n.length;a++){var i=n[a];It(e,i)||r(e,i,o(t,i))}},Wt=xt,qt=function(e,t){var n,r,o,a,i,s=e.target,c=e.global,u=e.stat;if(n=c?Ft:u?Ft[s]||Gt(s,{}):(Ft[s]||{}).prototype)for(r in t){if(a=t[r],o=e.noTargetGet?(i=Ht(n,r))&&i.value:n[r],!Wt(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;Vt(a,o)}(e.sham||o&&o.sham)&&jt(a,"sham",!0),Bt(n,r,a,e)}},$t=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Qt=function(e,t,n){if($t(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},zt=_,Yt=Array.isArray||function(e){return"Array"==zt(e)},Jt=Ye("navigator","userAgent")||"",Xt=o.process,Zt=Xt&&Xt.versions,en=Zt&&Zt.v8;en?St=(Tt=en.split("."))[0]<4?1:Tt[0]+Tt[1]:Jt&&(!(Tt=Jt.match(/Edge\/(\d+)/))||Tt[1]>=74)&&(Tt=Jt.match(/Chrome\/(\d+)/))&&(St=Tt[1]);var tn=St&&+St,nn=i,rn=!!Object.getOwnPropertySymbols&&!nn((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&tn&&tn<41})),on=rn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,an=o,sn=de.exports,cn=w,un=ye,pn=rn,ln=on,dn=sn("wks"),hn=an.Symbol,_n=ln?hn:hn&&hn.withoutSetter||un,fn=S,gn=Yt,En=function(e){return cn(dn,e)&&(pn||"string"==typeof dn[e])||(pn&&cn(hn,e)?dn[e]=hn[e]:dn[e]=_n("Symbol."+e)),dn[e]}("species"),mn=Qt,yn=E,An=C,Tn=rt,Sn=function(e,t){var n;return gn(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!gn(n.prototype)?fn(n)&&null===(n=n[En])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},vn=[].push,Rn=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,a=6==e,i=7==e,s=5==e||a;return function(c,u,p,l){for(var d,h,_=An(c),f=yn(_),g=mn(u,p,3),E=Tn(f.length),m=0,y=l||Sn,A=t?y(c,E):n||i?y(c,0):void 0;E>m;m++)if((s||m in f)&&(h=g(d=f[m],m,_),e))if(t)A[m]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return m;case 2:vn.call(A,d)}else switch(e){case 4:return!1;case 7:vn.call(A,d)}return a?-1:r||o?o:A}},On={forEach:Rn(0),map:Rn(1),filter:Rn(2),some:Rn(3),every:Rn(4),find:Rn(5),findIndex:Rn(6),filterOut:Rn(7)},Cn=i,In=On.forEach,Pn=function(e,t){var n=[][e];return!!n&&Cn((function(){n.call(null,t||function(){throw 1},1)}))}("forEach")?[].forEach:function(e){return In(this,e,arguments.length>1?arguments[1]:void 0)};qt({target:"Array",proto:!0,forced:[].forEach!=Pn},{forEach:Pn});var wn=o,bn=Qt,Nn=Function.call;(function(e,t,n){bn(Nn,wn[e].prototype[t],n)})("Array","forEach"),function(e){var t,n;if(e&&!("href"in(null!==(n=null===(t=e.URL)||void 0===t?void 0:t.prototype)&&void 0!==n?n:{}))){o.prototype={toString:function(){return this.href},get href(){return this._anchorElement.href},set href(e){this._anchorElement.href=e},get protocol(){return this._anchorElement.protocol},set protocol(e){this._anchorElement.protocol=e},get host(){return this._anchorElement.host},set host(e){this._anchorElement.host=e},get hostname(){return this._anchorElement.hostname},set hostname(e){this._anchorElement.hostname=e},get port(){return this._anchorElement.port},set port(e){this._anchorElement.port=e},get pathname(){return this._anchorElement.pathname},set pathname(e){this._anchorElement.pathname=e},get search(){return this._anchorElement.search},set search(e){this._anchorElement.search=e},get hash(){return this._anchorElement.hash},set hash(e){this._anchorElement.hash=e}};var r=e.URL||e.webkitURL||e.mozURL;o.createObjectURL=function(e){return r.createObjectURL(e)},o.revokeObjectURL=function(e){return r.revokeObjectURL(e)},Object.defineProperty(o.prototype,"toString",{enumerable:!1}),e.URL=o}function o(e,t){if(!e)throw new TypeError("Invalid argument");var n=document.implementation.createHTMLDocument("");if(t){var r=n.createElement("base");r.href=t,n.head.appendChild(r)}var o=n.createElement("a");if(o.href=e,n.body.appendChild(o),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o})}}(void 0!==n?n:"undefined"!=typeof window?window:"undefined"!=typeof self?self:n),function(){if(!Element.prototype.addEventListener){var e=[],t=function(t,n){var r=this,o=function(e){e.target=e.srcElement,e.currentTarget=r,void 0!==n.handleEvent?n.handleEvent(e):n.call(r,e)};if("DOMContentLoaded"===t){var a=function(e){"complete"===document.readyState&&o(e)};if(document.attachEvent("onreadystatechange",a),e.push({object:this,type:t,listener:n,wrapper:a}),"complete"===document.readyState){var i=new Event;i.srcElement=window,a(i)}}else this.attachEvent("on"+t,o),e.push({object:this,type:t,listener:n,wrapper:o})},n=function(t,n){for(var r=0;r<e.length;){var o=e[r];if(o.object===this&&o.type===t&&o.listener===n){"DOMContentLoaded"===t?this.detachEvent("onreadystatechange",o.wrapper):this.detachEvent("on"+t,o.wrapper),e.splice(r,1);break}++r}};Element.prototype.addEventListener=t,Element.prototype.removeEventListener=n,HTMLDocument&&!HTMLDocument.prototype.addEventListener&&(HTMLDocument.prototype.addEventListener=t,HTMLDocument.prototype.removeEventListener=n),Window&&!Window.prototype.addEventListener&&(Window.prototype.addEventListener=t,Window.prototype.removeEventListener=n)}}();var Mn=gt,Ln=Et,kn=Object.keys||function(e){return Mn(e,Ln)},Dn=C,Un=kn;qt({target:"Object",stat:!0,forced:i((function(){Un(1)}))},{keys:function(e){return Un(Dn(e))}}),qe.Object.keys;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Kn=function(e,t){return(Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function xn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Kn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Fn=function(){return(Fn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Hn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function jn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function Gn(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}function Vn(e){return"object"==typeof e&&null!==e&&!$n(e)}function Wn(e){return"function"==typeof e}function qn(e){return"[object String]"===Object.prototype.toString.call(e)}function $n(e){return"[object Array]"===Object.prototype.toString.call(e)}function Qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zn(e,t){if(Vn(e))for(var n in e)Qn(e,n)&&t.call(null,n,e[n])}function Yn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;)n=er(n,e[r]),r++;return n}var Jn=Object.getPrototypeOf?Object.getPrototypeOf({}):null;function Xn(e){return Object.getPrototypeOf?Object.getPrototypeOf(e)===Jn:e.constructor===Object}function Zn(e,t){var n=Fn({},e);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&void 0!==t[r]&&(Vn(t[r])&&Xn(t[r])?n[r]=er(Vn(e[r])?e[r]:{},t[r]):$n(t[r])?n[r]=t[r].slice():n[r]=t[r]);return n}function er(e,t){var n=Fn({},e);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&void 0!==t[r]&&(Vn(t[r])&&Xn(t[r])?n[r]=er(Vn(e[r])?e[r]:{},t[r]):$n(e[r])||$n(t[r])?n[r]=tr(e[r],t[r]):n[r]=t[r]);return n}function tr(e,t){var n=$n(e)?e:[],r=$n(t)?t:[];return Array.prototype.concat.call(n,r).map((function(e){return e instanceof RegExp?e:$n(e)||Vn(e)&&Xn(e)?$n(e)?tr([],e):er({},e):e}))}function nr(e,t){if(!$n(e))return!1;if(0===e.length)return!1;for(var n=0;n<e.length;){if(e[n]===t)return!0;n++}return!1}function rr(){return!!Vn(window)}function or(){return!(!rr()||!Vn(window.performance))&&!!Vn(window.performance.timing)}function ar(e){var t=function(e){var t={};return zn(e,(function(e,n){t[encodeURIComponent(e)]=encodeURIComponent(n)})),t}(function(e){if(!Vn(e))return{};var t={};return zn(e,(function(e,n){Vn(n)||$n(n)?t[e]=JSON.stringify(n):t[e]=n})),t}(e)),n=[];return zn(t,(function(e,t){n.push(e+"="+t)})),n.join("&")}function ir(e){var t=document.createElement("a");t.href=e;var n=t.pathname||"/";return"/"!==n[0]&&(n="/"+n),{href:t.href,protocol:t.protocol.slice(0,-1),hostname:t.hostname,host:t.host,search:t.search,pathname:n,hash:t.hash}}var sr=new RegExp("("+["cookie","auth","jwt","token","key","ticket","secret","credential","session","password"].join("|")+")","i"),cr=new RegExp("("+["bearer","session"].join("|")+")","i"),ur=function(e,t){return!(!e||!t)&&(sr.test(e)||cr.test(t))};function pr(){}function lr(e){var t="[object String]"===Object.prototype.toString.call(e);return e?t?e.length:ArrayBuffer&&e instanceof ArrayBuffer?e.byteLength:window.Blob&&e instanceof Blob?e.size:e.length?e.length:0:0}function dr(e){if(!e)return"";if(!Wn(e.forEach))return"";var t=[];return e.forEach((function(e){if($n(e)&&e[0]&&!ur(e[0],e[1])){var n=e[0],r=e[1]||"";t.push(n+": "+r)}})),t.join("\r\n")}function hr(e){var t={},n=ir(e);return t.ax_protocol=n.protocol,t.ax_domain=n.hostname,t.ax_path=n.pathname,t.ax_url=(n.href||e).split("?")[0],t.ax_search=n.search,t.ax_href=n.href,t}function _r(e){return $n(e)&&e.length?function(e){for(var t=[],n=e.length,r=0;r<n;r++){var o=e[r];qn(o)?t.push(o.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):o&&o.source&&t.push(o.source)}return new RegExp(t.join("|"),"i")}(e):null}function fr(e){return!!e&&Math.random()<Number(e)}var gr=function(){function e(t){var n=this;this.postEvent=function(t){var r=Fn(Fn({},t),n.getCommonParams());e.post(n.url,r)},this.getEvent=function(t){var r=ar(Fn(Fn({},t),n.getCommonParams())),o=n.url+"?"+r;e.get(o)},this.getURL=function(){return n.url},this.options=t,this.url=this.options.reportURL}return e.post=function(e,t,n){var r=n&&n.success||pr,o=n&&n.fail||pr,a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify(t)),a.onload=function(){try{if(this.responseText){var e=JSON.parse(this.responseText);r(e)}else r({})}catch(e){o()}},a.onerror=function(){o()},a.onabort=function(){o()}},e.get=function(e,t){var n=t&&t.success||pr,r=t&&t.fail||pr,o=t&&t.getResponse||pr,a=t&&t.getResponseText||pr,i=new XMLHttpRequest;t&&t.withCredentials&&(i.withCredentials=t.withCredentials),i.open("GET",e),i.send(),i.onload=function(){o(null==this?void 0:this.response),a(this.responseText);try{if(this.responseText){var e=JSON.parse(this.responseText);n(e)}else n({})}catch(e){r()}},i.onerror=function(){r()},i.onabort=function(){r()}},e.prototype.getCommonParams=function(){return{timestamp:Date.now()}},e}();function Er(e,t,n){if(void 0===n&&(n="0"),n.length>1)throw new TypeError("expect the length of pad to be 1, but got "+e.length);return e.length>=t?e:""+Array.from({length:t-e.length}).fill(n).join("")+e}function mr(e){return e?Math.floor(Math.random()*Math.pow(10,12)).toString(16).substr(0,e):""}function yr(e,t,n){void 0===n&&(n="01");var r=""+Er((Date.now()%4294967295).toString(16),8)+function(e){var t;if("number"==typeof e)t=e;else{var n=e.replace(/-/g,"");if(!/^[0-9]+$/.test(n)){if(n.length>18)return"18"+mr(18);var r=22-n.length-4;return""+Er(""+n.length,2)+n+mr(r)}t=parseInt(n,10)}var o=t.toString(16),a=22-o.length-4;return""+Er(""+o.length,2)+o+mr(a)}(e)+("string"==typeof t?mr(4):Er(t.toString(16),4));return"00-"+r+"-"+r.substr(0,16)+"-"+n}function Ar(){var e=function(){for(var e=new Array(16),t=0,n=0;n<16;n++)0==(3&n)&&(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);var r=0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}(e)}var Tr=["/log/sentry/","/monitor_browser/collect"],Sr=Ar(),vr=Ar(),Rr=function(){};function Or(e,t){if(void 0===t&&(t=Rr),e&&qn(e)&&rr()&&Vn(document)&&Wn(document.createElement)){var n=document.createElement("script"),r=document.head;Vn(n)&&Vn(r)&&(n.src=e,n.async=!0,n.crossOrigin="anonymous",n.onload=function(){t()},Wn(r.appendChild)&&r.appendChild(n))}}function Cr(){try{return new Headers,new Request(""),new Response,window.fetch}catch(e){}}function Ir(){if(Vn(window))return window}function Pr(){if(Vn(document))return document}function wr(){if(Ir()&&Vn(window.performance))return window.performance}function br(){if(Wn(XMLHttpRequest))return XMLHttpRequest}var Nr=function(e,t,n){var r=e.commonParams,o=e.ajaxMonitorOptions,a=r||{},i=a.bid,s=a.web_id,c=(o||{}).sampleHitTrace,u=function(e,t){var n=ir(e),r=ir(t);return n.protocol===r.protocol&&n.host===r.host}(n,t);return i&&s&&c&&u},Mr=function(e,t,n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(!e)return pr;var a=e[t],i=n.apply(void 0,Gn([a],Bn(r))),s=i;return Wn(s)&&(s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return i.apply(this,e)}catch(t){return Wn(a)&&a.apply(this,e)}}),e[t]=s,function(n){n&&s!==e[t]||(e[t]=a)}}};function Lr(e,t){return e instanceof t}function kr(e,t){return e instanceof t}var Dr=function(e){var t,n;return null!==(n=null===(t=e.ajaxMonitorOptions)||void 0===t?void 0:t.errorRequestCollect)&&void 0!==n&&n},Ur=function(e){var t=e,n={},r=function(){return Object.keys(t).forEach((function(e){return!(e in n)&&Object.defineProperty(n,e,{get:function(){return t[e]}})}))};return r(),[n,function(e){t=Yn({},t,e),r()}]},Kr=function(e){var t,n=window.requestAnimationFrame,r=window.cancelAnimationFrame,o=!Wn(n)||e&&document&&document.hidden?function(e){return e(0),0}:n,a=Wn(r)?r:pr;return[function(e){t&&a(t),t=o(e)},o,a]};function xr(e,t){return void 0===t&&(t=wr()),(0,Bn(function(e){var t=e&&e.timing||void 0;return[t,function(){return e&&e.now?e.now():(Date.now?Date.now():+new Date)-(t&&t.navigationStart||0)},function(t){var n=(e||{}).getEntriesByType;return Wn(n)&&n.call(e,t)||[]},function(){var t=(e||{}).clearResourceTimings;Wn(t)&&t.call(e)},function(t){var n=(e||{}).getEntriesByName;return Wn(n)&&n.call(e,t)||[]}]}(t),5)[4])(e).pop()}var Fr=function(e,t,n,r){var o,a=e._method,i=e._requestHeaders,s=e._url,c=e._start,u=e._data,p={ev_type:"ajax",ax_status:(e.status||0).toString(),ax_type:a,ax_request_header:dr(i||[]),ax_domain:"",ax_duration:0,ax_path:"",ax_protocol:"",ax_response_header:"",ax_size:0,ax_url:"",ax_href:""};if("function"==typeof e.getAllResponseHeaders&&(p.ax_response_header=function(e){if(qn(e)){var t=e.split("\r\n"),n=[];return t.forEach((function(e,t){if(e&&Wn(e.split)){var r=e.split(": ");ur(r[0],r[1])||n.push([r[0],r[1]])}})),dr(n)}return Vn(e)?dr(Object.keys(e).filter((function(t){return!ur(t,e[t])})).map((function(t){return[t,e[t]]}))):e}(e.getAllResponseHeaders())),Nr(t,s,r)){var l=n||e.getResponseHeader("x-tt-trace-id");l&&(p.trace_id=l,p.trace_host=e.getResponseHeader("x-tt-trace-host")||void 0,p.log_id=e.getResponseHeader("x-tt-logid")||void 0)}p.ax_duration=Date.now()-c,200===e.status&&(p.ax_size=function(e){if(""===e.responseType||"text"===e.responseType)return lr(e.responseText);if(e.response)return lr(e.response);try{return lr(e.responseText)}catch(e){return 0}}(e)),(p=Fn(Fn({},p),hr(s))).resource_timing=xr(p.ax_href);var d=p.ax_status;return Dr(t)&&"2"!==d[0]&&"3"!==d[0]&&(p.ax_request={body:u?""+u:void 0,search:ir(s).search,content_type:i&&(null===(o=i.find((function(e){return"content-type"===e[0].toLowerCase()})))||void 0===o?void 0:o[1])}),p},Hr=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Bn(t,2),o=r[0],a=r[1];return this._url=a||"",this._method=o&&o.toLowerCase()||"",e.apply(this,t)}},jr=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._requestHeaders=this._requestHeaders||[],this._requestHeaders.push(t),e&&e.apply(this,t)}},Br=function(e,t,n,r){var o=null;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(Nr(t,this._url,r)){var s=t.commonParams||{},c=s.bid,u=s.web_id;c&&u&&(o=yr(u,c),this.setRequestHeader("x-tt-trace-id",o))}return Gr(this)(t,o,n,r),this._start=Date.now(),this._data=null==a?void 0:a[0],e.apply(this,a)}},Gr=function(e){return Mr(e,"onreadystatechange",(function(t,n,r,o,a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return 4===this.readyState&&o&&o({name:"AjaxMonitor",type:"get",event:Fr(e,n,r,a)}),t&&t.apply(this,i)}}))},Vr=function(e,t,n){void 0===t&&(t=!1);var r="";return r=Lr(e,n)?e.url:e,t||(r=qn(r)?r.split("?")[0]:r),r};var Wr=function(e,t,n){return Lr(e,n)?e.body:null==t?void 0:t.body},qr=function(e,t){if(!e)return"";var n=[];return kr(e,t)?e.forEach((function(e,t){n.push([t,e])})):$n(e)?n.push.apply(n,Gn([],Bn(e))):n.push.apply(n,Gn([],Bn(Object.entries(e)))),dr(n)};function $r(e,t,n){if(e){if(kr(e,n))return e.get(t)||void 0;if($n(e)){var r=e.find((function(e){return t===e[0]}));return null==r?void 0:r[1]}return e[t]}}var Qr=function(e,t,n,r,o,a){return function(i,s){void 0===s&&(s={});var c=Vr(i,void 0,o);if(!function(e){if(!qn(e))return!1;var t=Bn(e.split(":"),2),n=t[0];return!t[1]||("http"===n||"https"===n)}(c))return e(i,s);var u=t.commonParams||{},p=u.bid,l=u.web_id,d=Date.now(),h={ev_type:"ajax",ax_size:0};try{Nr(t,c,a)&&(s.headers||(s.headers=[]),p&&l&&(h.trace_id=yr(p,l),function(e,t,n,r){kr(e,r)?e.append(t,n):$n(e)?e.push([t,n]):e[t]=n}(s.headers,"x-tt-trace-id",h.trace_id,r)))}catch(e){}h.ax_type=function(e,t,n){var r=t&&t.method||"get";return Lr(e,n)&&(r=e.method||r),r.toLowerCase()}(i,s,o),h=Fn(Fn({},h),hr(Vr(i,!0,o)));var _=function(){h.resource_timing=xr(h.ax_href),function(e,t,n,r,o,a){var i,s=t.ax_status;if(Dr(e)&&"2"!==s[0]&&"3"!==s[0]){var c=Vr(n,!0,o);t.ax_request={body:null===(i=Wr(n,r,o))||void 0===i?void 0:i.toString(),search:ir(c).search,content_type:$r(r.headers,"Content-Type",a)}}}(t,h,i,s,o,r),null==n||n({name:"FetchMonitor",type:"get",event:h})};return e(i,s).then((function(e){var n;try{h.ax_status=(e.status||0).toString(),h.ax_duration=Date.now()-d,h.ax_response_header=qr(e.headers,r),h.ax_request_header=qr(function(e,t,n,r){var o=new n;return Lr(e,r)&&e.headers&&Wn(e.headers.forEach)&&e.headers.forEach((function(e,t){o.append(t,e)})),t.headers&&new n(t.headers).forEach((function(e,t){o.append(t,e)})),o}(i,s,r,o),r);var u=function(t,n){e.headers.has(t)&&(h[n]=e.headers.get(t)||void 0)};Wn(null===(n=e.headers)||void 0===n?void 0:n.has)&&(e.headers.has("content-length")&&(h.ax_size=Number(e.headers.get("content-length"))||0),Nr(t,c,a)&&(u("x-tt-trace-host","trace_host"),u("x-tt-trace-id","trace_id"),u("x-tt-logid","log_id"))),setTimeout((function(){_()}),100)}catch(e){}return e}),(function(e){try{h.ax_status="0",h.ax_duration=Date.now()-d,_()}catch(e){}return Promise.reject(e)}))}},zr=["SCRIPT","STYLE","META","HEAD"],Yr=function(e,t,n,r){if(!e||r.indexOf(e.tagName)>-1)return 0;var o=e.children,a=void 0===o?[]:o,i=[].slice.call(a).reduceRight((function(e,n){return e+Yr(n,t+1,e>0,r)}),0);if(i<=0&&!n){if(!Wn(e.getBoundingClientRect))return 0;var s=e.getBoundingClientRect()||{},c=s.top,u=s.height;if(c>window.innerHeight||u<=0)return 0}return i+1+.5*t},Jr=function(e,t,n){var r;return void 0===e&&(e=Pr()),void 0===t&&(t=function(){if(Ir()&&Wn(window.MutationObserver))return window.MutationObserver}()),void 0===n&&(n=null===(r=function(){var e=wr();if(e&&Vn(e.timing))return e.timing}())||void 0===r?void 0:r.navigationStart),function(r,o){var a=Date.now(),i=[],s=zr.concat(r.ignoreTags||[]),c=function(){return i.push({time:Date.now()-a,score:Yr(e&&e.body,1,!1,s)})},u=Bn(Kr(!0),1)[0],p=Bn(function(e,t){var n=e&&new e(t);return[function(e,t){n&&e&&n.observe(e,t)},function(){return n&&n.disconnect()}]}(t,(function(){return u(c)})),2),l=p[0],d=p[1],h=function(e){void 0===e&&(e=0),d();var t=function(e){var t=Bn(void 0===e?[]:e),n=t[0],r=t.slice(1);return r&&r.reduce((function(e,t){var n=Bn(e,2),r=n[0],o=n[1],a=t.score-r.score;return[t,t.time>=r.time&&o.rate<a?{time:t.time,rate:a}:o]}),[n,{time:null==n?void 0:n.time,rate:0}])[1].time||0}(i),n={name:"FMPMonitor",type:"post",event:{ev_type:"fmp",fmp:t?t+e:0}};return o&&o(n),n},_=a-(n||0);return l(e,{subtree:!0,childList:!0}),[d,h,h.bind(null,_)]}},Xr=function(){function e(){this.name="PathMonitor",this.callback=pr,this.onPathChange=pr,this.currentURL=""}return e.prototype.setup=function(e){rr()&&(this.currentURL=location.href,this.callback=e,this.start())},e.prototype.onChange=function(e){this.onPathChange=e},e.prototype.start=function(){this.monitorHashChange(),rr()&&Vn(window.history)&&Wn(window.history.pushState)&&Wn(window.history.replaceState)&&(this.monitorPopState(),this.monitorPushState(),this.monitorReplaceState())},e.prototype.monitorPopState=function(){var e=this;window.addEventListener("popstate",(function(){e.handleStateChange(e.currentURL,location.href),e.replaceCurrentURL(location.href)}))},e.prototype.monitorHashChange=function(){var e=this;window.addEventListener("hashchange",(function(){var t=e.parseHash(location.hash);t&&e.pathChangeHandler(e.getPath(t),"hash"),e.replaceCurrentURL(location.href)}))},e.prototype.monitorPushState=function(){var e=this,t=window.history.pushState;t&&(window.history.pushState=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(this,n)}finally{e.handleHistoryStateChange.apply(e,Gn([],Bn(n)))}})},e.prototype.monitorReplaceState=function(){var e=this,t=window.history.replaceState;t&&(window.history.replaceState=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return t.apply(this,n)}finally{e.handleHistoryStateChange.apply(e,Gn([],Bn(n)))}})},e.prototype.pathChangeHandler=function(e,t,n){qn(e)&&Wn(this.callback)&&(this.onPathChange&&this.onPathChange({path:e,type:t,url:n}),this.callback({name:this.name,type:"get",event:{ev_type:"pageview",path:e,type:t}}))},e.prototype.handleHistoryStateChange=function(e,t,n){n&&(this.handleStateChange(this.currentURL,n),this.replaceCurrentURL(n))},e.prototype.handleStateChange=function(e,t){var n=this.parseURL(e),r=this.parseURL(t);r&&n&&(r.pathname===n.pathname?r.hash!==n.hash&&this.pathChangeHandler(this.getPath(r.hash),"hash",r):this.pathChangeHandler(this.getPath(r.pathname),"pathname",r))},e.prototype.parseURL=function(e){if(!e)return null;if("string"!=typeof e)return null;if(e.match(/^\/[^\/]/))return new URL(location.protocol+"//"+location.host+e);try{return new URL(e)}catch(e){return null}},e.prototype.parseHash=function(e){return e?"string"!=typeof e?"/":e.replace(/^#/,""):"/"},e.prototype.getPath=function(e){var t=e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"";return t=this.parseHash(t)},e.prototype.replaceCurrentURL=function(e){this.currentURL!==e&&(this.currentURL=e)},e.monitorName="PathMonitor",e}(),Zr=function(e,t,n,r){var o=function(){function n(t){this.props=t,this.name=e}return n.prototype.setup=function(e){this.monitor=function(e,t,n,r){void 0===t&&(t={}),void 0===r&&(r=[]);try{var o=e.apply(void 0,Gn([],Bn(r)));return o&&o(t,n)||[]}catch(e){return[]}}(t,this.props,e,r)},n.monitorName=e,n}();return n.forEach((function(e,t){return o.prototype[e]=function(){for(var e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return null===(n=null===(e=this.monitor)||void 0===e?void 0:e[t])||void 0===n?void 0:n.call.apply(n,Gn([e],Bn(r)))}})),o},eo=Zr("AjaxMonitor",(function(e,t){void 0===e&&(e=br()),void 0===t&&(t=null===location||void 0===location?void 0:location.href);var n=e&&e.prototype;if(n)return function(e,r){var o=Bn(Ur(e),2),a=o[0],i=o[1];return Mr(n,"open",Hr)(),Mr(n,"send",Br)(a,r,t||""),Mr(n,"setRequestHeader",jr)(),[i]}}),["updateConfig"]),to=Zr("FetchMonitor",(function(e,t,n,r){if(void 0===e&&(e=Cr()&&Ir()),void 0===t&&(t=window.Headers),void 0===n&&(n=window.Request),void 0===r&&(r=null===location||void 0===location?void 0:location.href),e&&t&&n)return function(o,a){var i=Bn(Ur(o),2),s=i[0],c=i[1];return Mr(e,"fetch",Qr)(s,a,t,n,r||""),[c]}}),["updateConfig"]),no=function(){function e(){}return e.prototype.sendEvent=function(e){var t=this.getEventToBeSent(e);t&&this.idleSendEvent(t)},e.prototype.getEventToBeSent=function(e){var t=this._modifyEvent(e);if(this._shouldSend(t))return t},e.prototype._modifyEvent=function(e){return e},e.prototype._shouldSend=function(e){return!0},e.prototype._send=function(e){},e.prototype.idleSendEvent=function(e){this._send(e)},e}(),ro=function(e){function t(t){var n,r,o=e.call(this)||this;return o.reportQueue=[],o.isReady=!0,o.batchReportLength=null!==(n=t.maxBatchReportLength)&&void 0!==n?n:10,o.batchReportWait=null!==(r=t.batchReportWait)&&void 0!==r?r:1e3,o.batchReportTimeout=null,o}return xn(t,e),Object.defineProperty(t.prototype,"ready",{get:function(){return this.isReady},set:function(e){this.isReady=e,this.isReady&&this._uploadQueue()},enumerable:!1,configurable:!0}),t.prototype._send=function(e){var t=this,n=this.buildParams(e);null===n||function(e){return void 0===e}(n)||(this.reportQueue.push(n),this.isReady&&(this.reportQueue.length>=this.batchReportLength&&this._uploadQueue(),this.batchReportTimeout&&clearTimeout(this.batchReportTimeout),this.batchReportTimeout=setTimeout((function(){t._uploadQueue()}),this.batchReportWait)))},t.prototype._uploadQueue=function(){if(this.reportQueue.length&&this.ready){var e={ev_type:"batch",list:this.reportQueue};this.reportQueue=[],this._request({event:e,type:"post"})}},t.prototype._request=function(e){},t}(no),oo="https://lf3-cdn-tos.bytegoofy.com/goofy/slardar/fe/sdk/plugins",ao=oo+"/sentry.3.6.34.cn.js";function io(e){return!!e&&Math.random()<Number(e)}function so(e,t){return Vn(e)?Vn(t)?Fn(Fn({},e),{overrides:t}):e:{}}var co=function(e){return"https://"+(null!=e?e:"i.snssdk.com")+"/log/sentry/v2/api/slardar/main/"},uo=function(e){return"https://"+(null!=e?e:"i.snssdk.com")+"/log/sentry/v2/api/slardar/batch/"},po=function(e){return"https://"+(null!=e?e:"i.snssdk.com")+"/slardar/sdk_setting"};function lo(e){return"error"===e.type}function ho(e){return"unhandledrejection"===e.type}function _o(e){var t,n,r;if((null===(t=window.__SLARDAR__)||void 0===t?void 0:t.plugins)&&$n(null===(n=window.__SLARDAR__)||void 0===n?void 0:n.plugins)){var o=null===(r=window.__SLARDAR__)||void 0===r?void 0:r.plugins,a=void 0;return o.forEach((function(t){t.version===e.version&&t[e.name]&&(a=t[e.name])})),a}}var fo=function(e){function t(t){var n,r=e.call(this,null!=t?t:{reportURL:""})||this;return r.setTransport=function(){r.transport||(r.transport=new gr({reportURL:r.getReportURL()}),r.updateStatus())},r.setOnOptionsUpdate=function(e){r.onOptionsUpdate=e},r.uploadQueue=function(){r._uploadQueue()},r.updateConfig=function(e){var t,n,o,a=null===(n=null===(t=r.options)||void 0===t?void 0:t.commonParams)||void 0===n?void 0:n.pid;r.options=r.normalizeOptions(e),a&&(null===(o=null==e?void 0:e.commonParams)||void 0===o?void 0:o.pid)&&e.commonParams.pid!==a&&r.sendPageview(),r.onOptionsUpdate&&r.onOptionsUpdate(r.options)},r.sendPageview=function(){Wn(r.sendEvent)&&r.sendEvent({name:"PageViewMonitor",type:"get",event:{ev_type:"pageview"}})},r.sendEvent=function(t){r.chechIsReady()?e.prototype.sendEvent.call(r,t):r.preQueue.push(t)},r.buildSendParams=function(e){return r.buildParams(e)},r.reportURL=null!==(n=null==t?void 0:t.reportURL)&&void 0!==n?n:"",r.preQueue=[],r.clientStatus=0,r.enable=!1,r}return xn(t,e),t.prototype.setEnable=function(e){this.enable||(this.enable=e,this.enable&&this.updateStatus())},t.prototype.getReportURL=function(){return this.reportURL||this.getBatchReportURL()},Object.defineProperty(t.prototype,"contextAgent",{get:function(){var e=this,t={set:function(n,r){return e.options?(e.options.commonParams.context||(e.options.commonParams.context={}),e.options.commonParams.context[n]=r,t):t},delete:function(n){var r;return(null===(r=e.options)||void 0===r?void 0:r.commonParams.context)&&"string"!=typeof e.options.commonParams.context&&Qn(e.options.commonParams.context,n)&&delete e.options.commonParams.context[n],t},clear:function(){return e.options?(e.options.commonParams.context={},t):t},get:function(t){var n,r,o;return null===(o=null===(r=null===(n=e.options)||void 0===n?void 0:n.commonParams)||void 0===r?void 0:r.context)||void 0===o?void 0:o[t]},toObject:function(){var t,n,r;return"string"==typeof(null===(t=e.options)||void 0===t?void 0:t.commonParams.context)?{}:Fn({},null===(r=null===(n=e.options)||void 0===n?void 0:n.commonParams)||void 0===r?void 0:r.context)}};return t},enumerable:!1,configurable:!0}),t.prototype._shouldSend=function(e){var t,n;if(!((null===(t=this.options)||void 0===t?void 0:t.monitors)&&e&&Vn(e)&&(null===(n=e.event)||void 0===n?void 0:n.ev_type)))return!1;var r=this.options.monitors;if("AjaxMonitor"===e.name||"FetchMonitor"===e.name){var o=_r(Tr||[]);if(o&&o.test(e.event.ax_url))return!1}return!!r.BaseMonitor.webIDHit||!!r.BaseMonitor.sampleHit&&("PathMonitor"===e.name?Eo({sendParams:e,pageViewMonitor:r.PageViewMonitor,baseMonitor:r.BaseMonitor}):"PageViewMonitor"===e.name?mo({pageViewMonitor:r.PageViewMonitor}):"AjaxMonitor"===e.name||"FetchMonitor"===e.name?go({sendParams:e,ajaxMonitor:r.AjaxMonitor}):"PerformanceMonitor"===e.name?yo({performanceMonitor:r.PerformanceMonitor}):"EmitMonitor"===e.name?Ao({sendParams:e,flexibleMonitor:r.FlexibleMonitor}):"StaticErrorMonitor"===e.name?To({sendParams:e,staticErrorMonitor:r.StaticErrorMonitor}):"HijackMonitor"===e.name?So({hijackMonitor:r.HijackMonitor}):"JSErrorMonitor"!==e.name||vo({jsErrorMonitor:r.JSErrorMonitor}))},t.prototype._modifyEvent=function(e){var t;if(!(null===(t=this.options)||void 0===t?void 0:t.monitors)||!e||!Vn(e))return{};var n=this.options.monitors;return"PerformanceMonitor"===e.name?Ro({sendParams:e,performanceMonitor:n.PerformanceMonitor}):"PathMonitor"===e.name?Oo({sendParams:e,baseMonitor:n.BaseMonitor,effect:this.updateConfig}):e},t.prototype.buildParams=function(e){var t,n,r,o,a=e.event||{},i=e.overrides||{},s=i.context,c=Hn(i,["context"]),u=Fn({},null!==(n=null===(t=this.options)||void 0===t?void 0:t.commonParams)&&void 0!==n?n:{});if(Vn(s)){var p=Fn(Fn({},null!==(r=Vn(u.context)&&u.context)&&void 0!==r?r:{}),s||{});u.context=p}var l=Fn(Fn(Fn({},a),u||{}),c);return l=this.normalizeEvent(l),(null===(o=this.options)||void 0===o?void 0:o.custom)&&Wn(this.options.custom.beforeSend)&&(l=this.options.custom.beforeSend(l||{})),l},t.prototype._request=function(e){var t;if(e&&e.event){var n=e.type,r=e.event,o=window.automation_test_info;if(o&&(r.automation_test_info=o),"beacon"===(null===(t=this.options)||void 0===t?void 0:t.commonParams.report_type)&&navigator&&navigator.sendBeacon){var a=JSON.stringify(r);navigator.sendBeacon(this.getReportURL(),a)}else this.transport&&("get"!==n?"post"===n&&this.transport.postEvent(r):this.transport.getEvent(r))}},t.prototype.chechIsReady=function(){return 2===this.clientStatus},t.prototype.updateStatus=function(){var t=this;switch(this.clientStatus){case 0:this.clientStatus=1;break;case 1:if(this.clientStatus=2,!this.preQueue.length)return;this.preQueue.forEach((function(n){e.prototype.sendEvent.call(t,n)})),this.preQueue=[]}},t.prototype.getBatchReportURL=function(){var e;return"https://"+(null===(e=this.options)||void 0===e?void 0:e.commonParams.report_domain)+"/log/sentry/v2/api/slardar/batch/"},t.prototype.normalizeOptions=function(e){var t;return Yn({},null!==(t=this.options)&&void 0!==t?t:{},e)},t.prototype.normalizeEvent=function(e){var t=Fn(Fn({},e),{url:window.location.href,client_time:Date.now()});return Vn(e.context)&&(t.context=JSON.stringify(e.context)),t||{}},t}(ro);function go(e){var t=e.sendParams,n=e.ajaxMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=n.whitelistUrls;if($n(r)&&r.length>0){var o=_r(n.whitelistUrls||[]);return!(!o||!o.test(t.event.ax_url))}var a=_r(n.ignore||[]);if(a&&a.test(t.event.ax_url))return!1;var i=n.statusCodeSample;if(i&&Qn(i,t.event.ax_status))return io(i[t.event.ax_status]);var s=n.requestUrlSample;if(s){var c=!1,u=!1;if(s.forEach((function(e){if(!c){var n=_r([e.url]);(null==n?void 0:n.test(t.event.ax_url))&&(c=!0,u=io(e.sampleRate))}})),c)return u}return!0}function Eo(e){var t=e.sendParams,n=e.pageViewMonitor,r=e.baseMonitor;return 1===r.appTypeSetting.type&&t.event.type===r.appTypeSetting.SPA&&(!n||(!!n.webIDHit||!!n.sampleHit))}function mo(e){var t=e.pageViewMonitor;return!t||(!!t.webIDHit||!!t.sampleHit)}function yo(e){var t=e.performanceMonitor;return!t||(!!t.webIDHit||!!t.sampleHit)}function Ao(e){var t=e.sendParams,n=e.flexibleMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=n.eventNameHit;if(r){var o=t.event.flexible_data_list[0].event_name;if(Qn(r,o))return io(r[o])}return!0}function To(e){var t=e.sendParams,n=e.staticErrorMonitor;if(!n)return!0;if(n.webIDHit)return!0;if(!n.sampleHit)return!1;var r=_r(n.ignore||[]);return!r||!r.test(t.event.st_src)}function So(e){var t=e.hijackMonitor;return!t||(!!t.webIDHit||!!t.sampleHit)}function vo(e){var t=e.jsErrorMonitor;return!t||(!!t.webIDHit||!!t.sampleHit)}function Ro(e){var t,n=e.sendParams,r=e.performanceMonitor;if(!r)return n;if(!or())return{};if(n.event.isAsync)t=n.event.load>r.spaSlowSessionTime;else{var o=window.performance.timing;t=o.loadEventEnd-o.navigationStart>r.slowSessionTime}if(n.event.resources&&$n(n.event.resources)){var a=_r(r.geckoUrls||[]);n.event.resources.forEach((function(e,t){var r,o,i,s;(null===(r=n.event.resources)||void 0===r?void 0:r[t])&&Vn(null===(o=n.event.resources)||void 0===o?void 0:o[t])&&Wn(null===(i=n.event.resources)||void 0===i?void 0:i[t].toJSON)&&(n.event.resources[t]=null===(s=n.event.resources)||void 0===s?void 0:s[t].toJSON(),n.event.resources[t].is_gecko=a&&a.test(e.name||"")?"1":"0")}))}return r.webIDHitStaticResource||r.sampleHitStaticResource?n.event.upload_reason="sample":t?n.event.upload_reason="slow_session":(delete n.event.resources,n.event.has_resource=0),n}function Oo(e){var t=e.sendParams,n=e.baseMonitor,r=e.effect;return 1===n.appTypeSetting.type&&n.appTypeSetting.SPA===t.event.type&&(r({commonParams:{pid:t.event.path}}),delete t.event.type,delete t.event.path),{}}var Co=function(){var e="";return(null===document||void 0===document?void 0:document.cookie)&&(e=function(e,t){var n,r;if(!e||!t)return"";var o=e.split(";"),a={};try{for(var i=jn(o),s=i.next();!s.done;s=i.next()){var c=s.value.split("="),u=qn(c[0])&&c[0].trim();u&&qn(c[1])&&(a[u]=c[1].trim())}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a[t]||""}(document.cookie,"MONITOR_WEB_ID")),e};function Io(e){var t,n,r,o;return Yn({},{commonParams:{version:"",hostname:window.location.hostname,protocol:window.location.protocol.slice(0,-1),url:window.location.href,slardar_session_id:Sr,sample_rate:1,pid:location.pathname,report_domain:"i.snssdk.com",screen_resolution:(void 0===n&&(n=window),rr()&&(null===(r=n.screen)||void 0===r?void 0:r.width)&&(null===(o=n.screen)||void 0===o?void 0:o.height)?n.screen.width+"x"+n.screen.height:"0x0"),network_type:(t=navigator.connection||navigator.mozConnection||navigator.webkitConnection,t&&qn(t.effectiveType)?t.effectiveType:"unknown"),bid:"",context:{},slardar_web_id:Co()||vr,report_type:"xhr",performanceAuto:!0,reportURLSingle:"",region:"cn",env:"production",refreshPrecollectedContext:!1,maxBatchReportLength:10,batchReportWait:1e3},flags:{hookPath:!0,hookXHR:!0,hookFetch:!0,enableSizeStats:!0,enableFMP:!0,enablePerformance:!0,enableResourcePerformance:!0,enableStaticError:!0,enableCatchJSError:!0,enableCatchGlobalJSError:!0,enableCatchJSErrorV2:!1,enableCrash:!1,enableMemoryRecord:!1,enableFPSJankTimesMonitor:!1,enableBreadcrumb:!0,catchUnhandledRejection:!0,catchUnhandledRejectionV2:!0,hookConsole:!1,hookDom:!0},monitors:{BaseMonitor:{appTypeSetting:{type:0,SPA:"",renderType:0},webIDHit:!1,sampleHit:fr(1)},PageViewMonitor:{webIDHit:!1,sampleHit:fr(1)},JSErrorMonitor:{webIDHit:!1,sampleHit:fr(1),webIDHitBehavior:fr(0),sampleHitBehavior:fr(0),ignoreErrors:[],whitelistUrls:[],blacklistUrls:[],download_link:""},AjaxMonitor:{webIDHit:!1,sampleHit:fr(1),sampleHitTrace:fr(0),ignore:Tr,abort:!1,whitelistUrls:[],statusCodeSample:{},requestUrlSample:[],errorRequestCollect:!1},PerformanceMonitor:{webIDHit:!1,sampleHit:fr(1),webIDHitStaticResource:!1,sampleHitStaticResource:fr(.1),slowSessionTime:8e3,spaSlowSessionTime:4e3,geckoUrls:[],interval:0,checkPoint:[]},FlexibleMonitor:{webIDHit:!1,sampleHit:fr(1),eventNameHit:{},eventNameSampleHit:fr(1)},StaticErrorMonitor:{webIDHit:!1,sampleHit:fr(1),ignore:Tr},HijackMonitor:{webIDHit:!1,sampleHit:fr(.1)},FMPMonitor:{}},plugins:{render:{enable:0},spa:{enable:0,type:""},behavior:{enable:0,slardar_web_ids:[],sample_rate:0,download_link:"https://lf3-cdn-tos.bytegoofy.com/goofy/slardar/fe/sdk/plugins/behavior.3.6.34.cn.js"},sentry:{enable:0,behavior_enable:0,behavior_sample_rate:0,behavior_slardar_web_ids:[],download_link:ao}},custom:{beforeSend:function(e){return e}},heatmap:{openList:[]}},e)}var Po=function(e,t){var n=!1;return e?(e.forEach((function(e){n||!e.condition.is_default&&"slardar_web_id"===e.condition.field&&nr(e.condition.values,t.web_id)&&(n=!0)})),n):n},wo=function(e){var t=!1;return!e||(e.forEach((function(e){e.condition.field&&t||(t=io(Number(e.value)))})),t)},bo=function(e){var t=[];if(e)try{t=JSON.parse(e)}catch(e){t=[]}return t},No=function(e){var t=[];return e.forEach((function(e){if(e.value){var n=bo(e.value);t.push.apply(t,Gn([],Bn(n)))}})),t},Mo=function(e,t){var n={},r=[];return e.forEach((function(e){e.condition.field===t&&e.condition.values&&e.condition.values.forEach((function(t){Qn(n,t)||(n[t]=Number(e.value)||0,r.push({url:t,sampleRate:n[t]}))}))})),{flatten:n,list:r}},Lo=function(e){var t,n,r=e.setting,o=e.info,a=Yn({PageViewMonitor:{},JSErrorMonitor:{},AjaxMonitor:{},PerformanceMonitor:{},FlexibleMonitor:{},StaticErrorMonitor:{},HijackMonitor:{},BaseMonitor:{appTypeSetting:{}},FMPMonitor:{}},r.monitors);r.ajaxWhitelistUrls&&$n(r.ajaxWhitelistUrls)&&(a.AjaxMonitor.whitelistUrls=(a.AjaxMonitor.whitelistUrls||[]).concat(r.ajaxWhitelistUrls)),r.ignoreAjax&&$n(r.ignoreAjax)&&(a.AjaxMonitor.ignore=(a.AjaxMonitor.ignore||[]).concat(r.ignoreAjax)),Qn(r,"geckoUrls")&&(a.PerformanceMonitor.geckoUrls=r.geckoUrls),r.ignoreStatic&&$n(r.ignoreStatic)&&(a.StaticErrorMonitor.ignore=(a.StaticErrorMonitor.ignore||[]).concat(r.ignoreStatic)),(null===(t=r.plugins)||void 0===t?void 0:t.sentry)&&(a.JSErrorMonitor=Fn(Fn({},a.JSErrorMonitor||{}),r.plugins.sentry)),r.errorRelease&&(a.JSErrorMonitor.release=r.errorRelease),r.ignoreErrors&&$n(r.ignoreErrors)&&(a.JSErrorMonitor.ignoreErrors=r.ignoreErrors),r.errorBlacklistUrls&&$n(r.errorBlacklistUrls)&&(a.JSErrorMonitor.blacklistUrls=r.errorBlacklistUrls),r.errorWhitelistUrls&&$n(r.errorWhitelistUrls)&&(a.JSErrorMonitor.whitelistUrls=r.errorWhitelistUrls),r.fmpIgnoreTags&&$n(r.fmpIgnoreTags)&&(a.FMPMonitor.ignoreTags=r.fmpIgnoreTags),Qn(r,"sampleRate")&&(a.BaseMonitor.sampleHit=io(r.sampleRate));var i=r.plugins;if(i&&Vn(i)){if(Qn(i,"spa")){var s=i.spa;s&&Qn(s,"enable")&&(a.BaseMonitor.appTypeSetting.type=Number(s.enable)),s&&Qn(s,"type")&&(a.BaseMonitor.appTypeSetting.SPA=s.type)}if(i.render){var c=null===(n=r.plugins)||void 0===n?void 0:n.render;if(c&&Vn(c)&&Qn(c,"enable")){var u=[{pids:[],value:c.enable,isDefault:!0}];a.BaseMonitor.appTypeSetting.renderType=xo({renderRules:u,pid:o.pid})}}}return a},ko=function(e){var t;return void 0===e&&(e={}),Yn({sentry:{},behavior:{},spa:{},render:{}},null!==(t=e.plugins)&&void 0!==t?t:{})},Do=function(e){var t;void 0===e&&(e={});var n=Yn({},null!==(t=e.commonParams)&&void 0!==t?t:{});if(!Vn(e))return n;var r=["bid","context","pid","slardar_web_id","slardar_session_id","performanceAuto","report_type","region","env","refreshPrecollectedContext","maxBatchReportLength","batchReportWait"];return zn(e,(function(e,t){nr(r,e)&&("report_domain"===e&&"mon-va.byteoversea.com"===t?n.region="maliva":n[e]=t)})),zn({cookieid:"slardar_web_id",sampleRate:"sample_rate",reportDomain:"report_domain",domain:"report_domain",sample_rate:"sample_rate",slardar_web_id:"slardar_web_id"},(function(t,r){Qn(e,t)&&(n[r]=e[t])})),n.slardar_web_id&&(n.slardar_web_id=n.slardar_web_id.toString()),n},Uo=function(e){var t;void 0===e&&(e={});var n=Yn({},null!==(t=e.flags)&&void 0!==t?t:{});if(!Vn(e))return n;var r=["hookPath","hookXHR","hookFetch","enableSizeStats","enableFMP","enablePerformance","enableStaticError","enableCatchJSError","enableCatchJSErrorV2","enableCatchGlobalJSError","enableResourcePerformance","enableCrash","enableMemoryRecord","enableFPSJankTimesMonitor","enableBreadcrumb","catchUnhandledRejection","catchUnhandledRejectionV2","hookConsole","hookDom"];return zn(e,(function(e,t){nr(r,e)&&(n[e]=t)})),n};function Ko(e,t){var n,r,o,a,i,s,c,u,p,l={PageViewMonitor:{},JSErrorMonitor:{},AjaxMonitor:{},PerformanceMonitor:{},FlexibleMonitor:{},StaticErrorMonitor:{},HijackMonitor:{},BaseMonitor:{}},d=null!==(n=e.setting)&&void 0!==n?n:{};if((null===(o=null===(r=d.page_view)||void 0===r?void 0:r.enable_rate)||void 0===o?void 0:o.length)&&(l.PageViewMonitor.webIDHit=Po(d.page_view.enable_rate,t),l.PageViewMonitor.sampleHit=wo(d.page_view.enable_rate)),d.jserr&&((null===(a=d.jserr.enable_rate)||void 0===a?void 0:a.length)&&(l.JSErrorMonitor.webIDHit=Po(d.jserr.enable_rate,t),l.JSErrorMonitor.sampleHit=wo(d.jserr.enable_rate)),d.jserr.ignore_errors&&(l.JSErrorMonitor.ignoreErrors=No(d.jserr.ignore_errors)),d.jserr.blacklist_urls&&(l.JSErrorMonitor.blacklistUrls=No(d.jserr.blacklist_urls)),d.jserr.whitelist_urls&&(l.JSErrorMonitor.whitelistUrls=No(d.jserr.whitelist_urls))),d.ajax&&(d.ajax.enable_rate&&(l.AjaxMonitor.webIDHit=Po(d.ajax.enable_rate,t),l.AjaxMonitor.sampleHit=wo(d.ajax.enable_rate)),d.ajax.request_sample_rate&&(l.AjaxMonitor.statusCodeSample=Mo(d.ajax.request_sample_rate,"status_code").flatten,l.AjaxMonitor.requestUrlSample=Mo(d.ajax.request_sample_rate,"request_url").list),d.ajax.trace_rate&&(l.AjaxMonitor.sampleHitTrace=wo(d.ajax.trace_rate)),d.ajax.enable_request_param_collect_on_error&&(l.AjaxMonitor.errorRequestCollect=function(e,t){var n,r;void 0===t&&(t=!1);try{for(var o=jn(e),a=o.next();!a.done;a=o.next()){var i=a.value;if(i.value)return"true"===i.value}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return t}(d.ajax.enable_request_param_collect_on_error))),(null===(i=d.static_resource)||void 0===i?void 0:i.enable_rate)&&(l.PerformanceMonitor.webIDHitStaticResource=Po(d.static_resource.enable_rate,t),l.PerformanceMonitor.sampleHitStaticResource=wo(d.static_resource.enable_rate)),(null===(s=d.performance)||void 0===s?void 0:s.enable_rate)&&(l.PerformanceMonitor.webIDHit=Po(d.performance.enable_rate,t),l.PerformanceMonitor.sampleHit=wo(d.performance.enable_rate)),d.flexible&&(d.flexible.enable_rate&&(l.FlexibleMonitor.webIDHit=Po(d.flexible.enable_rate,t),l.FlexibleMonitor.sampleHit=wo(d.flexible.enable_rate)),d.flexible.event_name_sample_rate&&(l.FlexibleMonitor.eventNameHit=Mo(d.flexible.event_name_sample_rate,"event_name").flatten,l.FlexibleMonitor.eventNameSampleHit=wo(d.flexible.event_name_sample_rate))),(null===(c=d.static_err)||void 0===c?void 0:c.enable_rate)&&(l.StaticErrorMonitor.webIDHit=Po(d.static_err.enable_rate,t),l.StaticErrorMonitor.sampleHit=wo(d.static_err.enable_rate)),d.general){var h=d.general.app_type_setting;if(h){var _={type:Number(h.app_type[0].value),SPA:h.app_type_spa[0].value,renderType:xo({renderRules:(u=h.app_render_type,p=[],u.forEach((function(e){"pid"===e.condition.field.toLowerCase()&&"like"===e.condition.op.toLowerCase()&&e.value?p.push({pids:bo(e.value),value:parseInt(e.value,10),isDefault:!1}):e.condition.is_default&&p.push({pids:[],value:parseInt(e.value,10),isDefault:!0})})),p),pid:t.pid})};l.BaseMonitor.appTypeSetting=_}}var f=e.whitelist;return $n(f)&&f.forEach((function(e){t.web_id===e&&(l.BaseMonitor.webIDHit=!0,l.AjaxMonitor.sampleHitTrace=!0)})),l}function xo(e){var t=e.renderRules,n=e.pid;if(!t||!n)return 0;for(var r=0;r<t.length;r++){var o=t[r];if($n(o.pids)&&o.pids.length>0){var a=_r(o.pids);if(a&&a.test(n))return o.value}if(o.isDefault&&r===t.length-1)return o.value}return 0}var Fo=function(){function e(){var e=this;this.version="3.6.34",this.instance=function(){for(var t,n,r,o,a,i,s,c,u,p,l,d,h,_,f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];switch(f[0]){case"init":return void e.init(f[1]);case"config":return void e.config(f[1]);case"sendCustomCountLog":case"sendCustomTimeLog":case"emit":case"send":return void(e.shared.monitors.EmitMonitor?(t=e.shared.monitors.EmitMonitor).handOut.apply(t,Gn([],Bn(f))):e.instance("precollect","emit",f));case"precollect":var E=e.shared.collect,m=e.finalConfig.commonParams.refreshPrecollectedContext?{}:{pid:e.finalConfig.commonParams.pid,url:e.finalConfig.commonParams.url,context:e.finalConfig.commonParams.context};if("sentry"===f[1])return void E.sentry.push({event:f[2],params:m});if("exception"===f[1]){var y=f[3]||{},A=y.context,T=Hn(y,["context"]),S=Fn(Fn({},Vn(m.context)&&m.context),A);return m.context=S,void E.exception.push({exception:f[2],params:Fn(Fn({},m),T)})}if("error"===f[1]){if(!f[2]||!f[2][0])return;var v=f[2][0]||{};return lo(v)&&((v.error||v.message)&&E.jsError.push({event:v,params:m}),(null===(n=v.target)||void 0===n?void 0:n.tagName)&&E.staticError.push({event:v,params:m})),void(ho(v)&&E.jsError.push({event:v,params:m}))}return void("emit"===f[1]&&E.emit.push({event:f[2],params:m}));case"Sentry":var R=f[1];if(Wn(R)){var O=null===(o=null===(r=e.shared.monitors)||void 0===r?void 0:r.JSErrorMonitor)||void 0===o?void 0:o.getSentry();O?R(O):e.instance("precollect","sentry",f[1])}return;case"report":return void(e.client&&e.client.uploadQueue());case"performanceSend":return void(null===(s=null===(i=null===(a=e.shared.monitors)||void 0===a?void 0:a.PerformanceMonitor)||void 0===i?void 0:i.send)||void 0===s||s.call(i));case"performanceInit":return void(null===(p=null===(u=null===(c=e.shared.monitors)||void 0===c?void 0:c.PerformanceMonitor)||void 0===u?void 0:u.initAsync)||void 0===p||p.call(u,e.finalConfig.commonParams.pid));case"captureException":if(e.shared.monitors.JSExceptionMonitor){var C=e.shared.monitors.JSExceptionMonitor.buildEvent(f[1]),I=so(C,null!==(l=f[2])&&void 0!==l?l:{});null===(h=null===(d=e.client)||void 0===d?void 0:d.sendEvent)||void 0===h||h.call(d,I)}else e.instance("precollect","exception",f[1],f[2]);return;case"context":return void(e.client&&(null===(_=f[1])||void 0===_||_.call(f,e.client.contextAgent)));default:return}},this.changeReortType=function(t){var n;e.finalConfig.commonParams.report_type=t,null===(n=e.client)||void 0===n||n.updateConfig(e.finalConfig)},this.onClose=function(){var t,n;t=e.onCloseReport,n=e.visibilityChange,Wn(t)&&(Wn(window.addEventListener)&&(window.addEventListener("unload",t),window.addEventListener("beforeunload",t),window.addEventListener("pagehide",t)),Wn(document.addEventListener)&&document.addEventListener("visibilitychange",(function(e){Wn(n)?n(e):"hidden"===document.visibilityState&&t(e)})))},this.visibilityChange=function(){"hidden"===document.visibilityState&&e.onCloseReport(),"visible"===document.visibilityState&&e.changeReortType("xhr")},this.onCloseReport=function(){var t;e.changeReortType("beacon"),null===(t=e.client)||void 0===t||t.uploadQueue()},this.defaultClientConfig=Io({commonParams:{version:this.version}}),this.finalConfig=Io({commonParams:{version:this.version}}),this.client=void 0,this.userConfig={},this.inited=!1,this.configed=!1,this.shared={config:this.finalConfig,instance:[],collect:{sentry:[],jsError:[],staticError:[],emit:[],exception:[]},monitors:{}},this.baseParams={bid:this.shared.config.commonParams.bid||"",pid:this.shared.config.commonParams.pid||""},this.serverSetting=this.__SLARDAR__REPALCE__HOLDER__,this.saveInstance()}return e.prototype.handleUserConfig=function(e){var t;this.userConfig=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;)n=Zn(n,e[r]),r++;return n}(this.userConfig,e),(null===(t=this.userConfig)||void 0===t?void 0:t.onlyUseLocalSetting)&&(this.serverSetting={}),this.mergeSettings()},e.prototype.setBaseParams=function(){this.baseParams.bid=this.shared.config.commonParams.bid||"",this.baseParams.pid=this.shared.config.commonParams.pid||""},e.prototype.init=function(e){var t=this;this.handleUserConfig(e);var n=this.finalConfig;if(!this.inited){this.inited=!0,this.client=new fo({reportURL:uo(n.commonParams.report_domain),maxBatchReportLength:n.commonParams.maxBatchReportLength,batchReportWait:n.commonParams.batchReportWait}),this.client.setOnOptionsUpdate((function(e){e&&e.commonParams.pid!==t.finalConfig.commonParams.pid&&t.handleUserConfig({pid:e.commonParams.pid})})),n.commonParams.refreshPrecollectedContext&&this.refreshPrecollectedContext();var r=this.setMonitors();this.setupMonitors(r),this.shared.instance&&$n(this.shared.instance)&&this.shared.instance.push(n.commonParams.bid),this.getServerSetting(n.commonParams.bid),this.onClose()}},e.prototype.config=function(e){var t;if(this.configed=!0,this.inited){this.handleUserConfig(e);var n=this.finalConfig;null===(t=this.client)||void 0===t||t.updateConfig(n)}else this.init(e);this.tryUnlockClient()},e.prototype.getServerSetting=function(e){var t=this;if(this.serverSetting)this.handleServerSetting();else{var n=po(this.finalConfig.commonParams.report_domain)+"?bid="+e;gr.get(n,{success:function(e){try{t.serverSetting=e.data||{},t.handleServerSetting()}catch(e){t.userConfig.sampleRate=.001,t.handleServerSetting()}},fail:function(){t.userConfig.sampleRate=.001,t.handleServerSetting()},withCredentials:!0})}},e.prototype.setMonitors=function(){var e,t,n=this,r=[],o=this.finalConfig.flags,a=this.finalConfig.commonParams;if(o.hookPath&&r.push(new Xr),o.hookXHR&&r.push(new eo({commonParams:{web_id:a.slardar_web_id,bid:a.bid},ajaxMonitorOptions:this.finalConfig.monitors.AjaxMonitor})),o.hookFetch&&r.push(new to({commonParams:{web_id:a.slardar_web_id,bid:a.bid},ajaxMonitorOptions:this.finalConfig.monitors.AjaxMonitor})),o.enableFMP){var i=null===(e=Jr())||void 0===e?void 0:e(this.finalConfig.monitors.FMPMonitor);this.shared.FMPMonitor=i}return(null===(t=this.shared)||void 0===t?void 0:t.monitors)&&r.forEach((function(e){n.shared.monitors[e.name]=e})),r},e.prototype.setupMonitors=function(e){var t=this;this.client&&this.client.sendEvent&&e.forEach((function(e){var n;e.setup(null===(n=t.client)||void 0===n?void 0:n.sendEvent)}))},e.prototype.shouldSetClientEnable=function(){return"production"===this.finalConfig.commonParams.env},e.prototype.tryUnlockClient=function(){var e;null===(e=this.client)||void 0===e||e.setEnable(this.shouldSetClientEnable()&&this.configed&&!!this.serverSetting)},e.prototype.handleServerSetting=function(){var e,t;this.mergeSettings();var n=this.finalConfig;this.client.updateConfig(n),this.client.setTransport(),this.tryUnlockClient(),this.client.sendPageview(),this.shared.transport=this.client.transport,this.shared.sendEvent=this.client.sendEvent.bind(this.client),this.setCookie(n.commonParams.slardar_web_id),null===(e=this.shared.monitors.FetchMonitor)||void 0===e||e.updateConfig({commonParams:{web_id:n.commonParams.slardar_web_id,bid:n.commonParams.bid},ajaxMonitorOptions:n.monitors.AjaxMonitor}),null===(t=this.shared.monitors.AjaxMonitor)||void 0===t||t.updateConfig({commonParams:{web_id:n.commonParams.slardar_web_id,bid:n.commonParams.bid},ajaxMonitorOptions:n.monitors.AjaxMonitor}),this.loadMonitors(),n.flags.enableCatchJSError&&this.loadSentry(),n.heatmap.openList.length&&this.loadHeatmap(),location.search.indexOf("slardar_heatmap_draw")>-1&&this.loadHeatmapDraw()},e.prototype.loadSentry=function(){var e=this;Or("https://lf3-cdn-tos.bytegoofy.com/goofy/slardar/fe/sdk/plugins/sentry.3.6.34.cn.js",(function(){var t=_o({name:"SetSentryMonitors",version:e.version});if(t){var n=new t({catchUnhandledRejection:e.finalConfig.flags.catchUnhandledRejection,hookConsole:e.finalConfig.flags.hookConsole,hookDom:e.finalConfig.flags.hookDom,memoryRecordMonitor:e.shared.monitors.MemoryRecordMonitor,collect:e.shared.collect,sendEvent:e.client.sendEvent,jsErrorOptions:e.shared.config.monitors.JSErrorMonitor});n.init(),e.shared.monitors=Fn(Fn({},e.shared.monitors),n.getInstalledMonitors())}}))},e.prototype.loadMonitors=function(){var e=this;Or("https://lf3-cdn-tos.bytegoofy.com/goofy/slardar/fe/sdk/plugins/monitors.3.6.34.cn.js",(function(){var t,n=_o({name:"SetMonitors",version:e.version});if(n)try{var r=new n({config:e.finalConfig,fmpMonitor:e.shared.FMPMonitor,report:function(){return e.instance("report")},sendEvent:null===(t=e.client)||void 0===t?void 0:t.sendEvent,captureException:function(t){return e.instance("Sentry",(function(e){e.captureException(t)}))},collect:e.shared.collect});r.init(),e.shared.monitors=Fn(Fn({},e.shared.monitors),r.getInstalledMonitors())}catch(t){e.instance("Sentry",(function(e){e.captureException(t);try{e.withScope((function(t){t.setTag("from","slardar-sdk"),e.captureMessage("SLARDAR_ERROR: "+typeof n),e.captureMessage("SLARDAR_ERROR: "+n.toString())}))}catch(t){e.withScope((function(n){n.setTag("from","slardar-sdk"),e.captureException(t)}))}}))}}))},e.prototype.loadHeatmap=function(){var e=this;Or("https://lf3-cdn-tos.bytegoofy.com/goofy/slardar/fe/sdk/plugins/heatmap.3.6.34.cn.js",(function(){var t=_o({name:"SetHeatmap",version:e.version});if(t){var n=new t({config:e.finalConfig,report:function(){return e.instance("report")},sendEvent:e.client.sendEvent,collect:e.shared.collect,pathMonitor:e.shared.monitors.PathMonitor,buildSendParams:e.client.buildSendParams,reportURL:e.client.getReportURL()});n.init(),e.shared.monitors=Fn(Fn({},e.shared.monitors),n.getInstalledMonitors())}}))},e.prototype.loadHeatmapDraw=function(){var e=this;Or("https://lf3-cdn-tos.bytegoofy.com/goofy/slardar/fe/sdk/plugins/heatmap-draw.3.6.34.cn.js",(function(){var t=_o({name:"SetHeatmapDraw",version:e.version});t&&new t({config:e.finalConfig,pathMonitor:e.shared.monitors.PathMonitor}).init()}))},e.prototype.setCookie=function(e){e&&(document.cookie="MONITOR_WEB_ID="+e+";max-age=7776000;domain="+location.hostname+";path=/")},e.prototype.normalizeSetting=function(e){return{commonParams:this.getClientCommonParams(e),flags:this.getClientFlags(e),plugins:this.getClientPluginsSetting(e),monitors:this.getClientMonitorsSetting(e),custom:this.getClientCustom(e),heatmap:this.getClientHeatmap(e)}},e.prototype.normalizeServerSetting=function(e){var t;return Qn(e,"setting")?{commonParams:Do(e),monitors:Ko(e,this.getNormoalizeInfo()),heatmap:e.heatmap}:this.normalizeSetting({cookieid:e.cookieid,reportDomain:e.reportDomain,bid:e.bid,plugins:e.plugins,heatmap:null!==(t=e.heatmap)&&void 0!==t?t:{openList:[]}})},e.prototype.getClientHeatmap=function(e){var t;return null!==(t=e.heatmap)&&void 0!==t?t:{}},e.prototype.mergeSettings=function(){var e=this.serverSetting?this.normalizeServerSetting(this.serverSetting):{},t=this.normalizeSetting(this.userConfig),n=Yn(this.defaultClientConfig,e,t);n.commonParams.reportURLSingle=co(n.commonParams.report_domain),n.commonParams.pid=this.getPid(n),this.shared.config=n,this.setBaseParams(),this.finalConfig=n},e.prototype.getPid=function(e){if(e.commonParams.pid)return e.commonParams.pid;var t=e.monitors.BaseMonitor;return 1===t.appTypeSetting.type&&"hash"===t.appTypeSetting.SPA?location.hash.slice(1)||"/":location.pathname},e.prototype.getClientCommonParams=function(e){return Do(e)},e.prototype.getClientFlags=function(e){return Uo(e)},e.prototype.getClientCustom=function(e){var t={};return e.beforeSend&&Wn(e.beforeSend)&&(t.beforeSend=e.beforeSend),t},e.prototype.getClientMonitorsSetting=function(e){return Lo({setting:e,info:this.getNormoalizeInfo()})},e.prototype.getClientPluginsSetting=function(e){return ko(e)},e.prototype.getNormoalizeInfo=function(){return{web_id:this.finalConfig.commonParams.slardar_web_id,pid:this.finalConfig.commonParams.pid}},e.prototype.saveInstance=function(){window.__SLARDAR__||(window.__SLARDAR__={}),window.__SLARDAR__&&!$n(window.__SLARDAR__.instances)&&(window.__SLARDAR__.instances=[]),window.__SLARDAR__&&$n(window.__SLARDAR__.instances)&&window.__SLARDAR__.instances.push({version:this.version})},e.prototype.refreshPrecollectedContext=function(){var e,t=this;zn(null!==(e=this.shared.collect)&&void 0!==e?e:{},(function(e){var n;null===(n=t.shared.collect)||void 0===n||n[e].forEach((function(e){return e.params={}}))}))},e}(),Ho=pr;if(rr()){var jo=new Fo;(Ho=jo.instance).version=jo.version,Ho.shared=jo.shared,Ho.SlardarBrowser=Fo,Ho._baseParams=jo.baseParams}var Bo=Ho;t.a=Bo}).call(this,n(5))},,function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(6)(n(4),"Map");e.exports=r},function(e,t,n){var r=n(13),o=n(7);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(4).Symbol;e.exports=r},function(e,t,n){var r=n(48);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){(function(e){var r=n(4),o=n(131),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;e.exports=c}).call(this,n(29)(e))},function(e,t,n){var r=n(133),o=n(134),a=n(135),i=a&&a.isTypedArray,s=i?o(i):r;e.exports=s},function(e,t,n){e.exports=n(176)},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(5))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(84),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(r(e),t)}},function(e,t,n){var r=n(11),o=n(14),a=n(85);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,t){e.exports={}},function(e,t,n){var r=n(11),o=n(39),a=n(90),i=n(37),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(a(e),t=i(t,!0),a(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")(),p=Object.prototype.toString,l=Math.max,d=Math.min,h=function(){return u.Date.now()};function _(e,t,n){var r,o,a,i,s,c,u=0,p=!1,_=!1,E=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=r,a=o;return r=o=void 0,u=t,i=e.apply(a,n)}function y(e){return u=e,s=setTimeout(T,t),p?m(e):i}function A(e){var n=e-c;return void 0===c||n>=t||n<0||_&&e-u>=a}function T(){var e=h();if(A(e))return S(e);s=setTimeout(T,function(e){var n=t-(e-c);return _?d(n,a-(e-u)):n}(e))}function S(e){return s=void 0,E&&r?m(e):(r=o=void 0,i)}function v(){var e=h(),n=A(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return y(c);if(_)return s=setTimeout(T,t),m(c)}return void 0===s&&(s=setTimeout(T,t)),i}return t=g(t)||0,f(n)&&(p=!!n.leading,a=(_="maxWait"in n)?l(g(n.maxWait)||0,t):a,E="trailing"in n?!!n.trailing:E),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},v.flush=function(){return void 0===s?i:S(h())},v}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var s=o.test(e);return s||a.test(e)?i(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return f(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),_(e,t,{leading:r,maxWait:t,trailing:o})}}).call(this,n(5))},function(e,t,n){var r=n(15),o=n(97),a=n(98),i=n(99),s=n(100),c=n(101);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=s,u.prototype.set=c,e.exports=u},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(5))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(108),o=n(115),a=n(117),i=n(118),s=n(119);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(28),o=n(12);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t,n){var r=n(6),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(4).Uint8Array;e.exports=r},function(e,t,n){var r=n(51)(Object.getPrototypeOf,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(129),o=n(9),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(56),o=n(140),a=n(20);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t,n){var r=n(139),o=n(52),a=n(19),i=n(31),s=n(57),c=n(32),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),p=!n&&o(e),l=!n&&!p&&i(e),d=!n&&!p&&!l&&c(e),h=n||p||l||d,_=h?r(e.length,String):[],f=_.length;for(var g in e)!t&&!u.call(e,g)||h&&("length"==g||l&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||_.push(g);return _}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(153),o=n(156),a=n(157);e.exports=function(e,t,n,i,s,c){var u=1&n,p=e.length,l=t.length;if(p!=l&&!(u&&l>p))return!1;var d=c.get(e),h=c.get(t);if(d&&h)return d==t&&h==e;var _=-1,f=!0,g=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++_<p;){var E=e[_],m=t[_];if(i)var y=u?i(m,E,_,t,e,c):i(E,m,_,e,t,c);if(void 0!==y){if(y)continue;f=!1;break}if(g){if(!o(t,(function(e,t){if(!a(g,t)&&(E===e||s(E,e,n,i,c)))return g.push(t)}))){f=!1;break}}else if(E!==m&&!s(E,m,n,i,c)){f=!1;break}}return c.delete(e),c.delete(t),f}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(3);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),a=i.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(3),o=n(182),a={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=n(64)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(a)})),e.exports=c}).call(this,n(181))},function(e,t,n){"use strict";var r=n(3),o=n(183),a=n(185),i=n(61),s=n(186),c=n(189),u=n(190),p=n(65);e.exports=function(e){return new Promise((function(t,n){var l=e.data,d=e.headers;r.isFormData(l)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(_+":"+f)}var g=s(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),i(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};o(t,n,a),h=null}},h.onabort=function(){h&&(n(p("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(p("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(p(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var E=(e.withCredentials||u(g))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;E&&(d[e.xsrfHeaderName]=E)}if("setRequestHeader"in h&&r.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),l||(l=null),h.send(l)}))}},function(e,t,n){"use strict";var r=n(184);e.exports=function(e,t,n,o,a){var i=new Error(e);return r(i,t,n,o,a)}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){t=t||{};var n={},o=["url","method","data"],a=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(e[o],t[o])}r.forEach(o,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(a,u),r.forEach(i,(function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(void 0,t[o])})),r.forEach(s,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var p=o.concat(a).concat(i).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===p.indexOf(e)}));return r.forEach(l,u),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){var r=n(91),o=n(142)((function(e,t,n){r(e,t,n)}));e.exports=o},,,,,,function(e,t,n){e.exports=n(75)},function(e,t,n){var r=n(76);e.exports=r},function(e,t,n){n(77);var r=n(40).Object,o=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(o.sham=!0)},function(e,t,n){var r=n(78),o=n(11);r({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n(41).f})},function(e,t,n){"use strict";var r=n(34),o=n(79).f,a=n(86),i=n(40),s=n(87),c=n(89),u=n(38),p=function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,l,d,h,_,f,g,E,m=e.target,y=e.global,A=e.stat,T=e.proto,S=y?r:A?r[m]:(r[m]||{}).prototype,v=y?i:i[m]||(i[m]={}),R=v.prototype;for(d in t)n=!a(y?d:m+(A?".":"#")+d,e.forced)&&S&&u(S,d),_=v[d],n&&(f=e.noTargetGet?(E=o(S,d))&&E.value:S[d]),h=n&&f?f:t[d],n&&typeof _==typeof h||(g=e.bind&&n?s(h,r):e.wrap&&n?p(h):T&&"function"==typeof h?s(Function.call,h):h,(e.sham||h&&h.sham||_&&_.sham)&&c(g,"sham",!0),v[d]=g,T&&(u(i,l=m+"Prototype")||c(i,l,{}),i[l][d]=h,e.real&&R&&!R[d]&&c(R,d,h)))}},function(e,t,n){var r=n(11),o=n(80),a=n(35),i=n(81),s=n(37),c=n(38),u=n(39),p=Object.getOwnPropertyDescriptor;t.f=r?p:function(e,t){if(e=i(e),t=s(t,!0),u)try{return p(e,t)}catch(e){}if(c(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);t.f=a?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(82),o=n(36);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(14),o=n(83),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(36);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(34),o=n(24),a=r.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,n){var r=n(14),o=/#|\.prototype\./,a=function(e,t){var n=s[i(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},i=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},function(e,t,n){var r=n(88);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(11),o=n(41),a=n(35);e.exports=r?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(24);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(43),o=n(47),a=n(120),i=n(122),s=n(7),c=n(55),u=n(54);e.exports=function e(t,n,p,l,d){t!==n&&a(n,(function(a,c){if(d||(d=new r),s(a))i(t,n,c,p,e,l,d);else{var h=l?l(u(t,c),a,c+"",t,n,d):void 0;void 0===h&&(h=a),o(t,c,h)}}),c)}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(16),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(16);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(16);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(16);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(15);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(15),o=n(25),a=n(46);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(26),o=n(105),a=n(7),i=n(45),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,p=c.toString,l=u.hasOwnProperty,d=RegExp("^"+p.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?d:s).test(i(e))}},function(e,t,n){var r=n(27),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[s]=n:delete e[s]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,o=n(106),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,t,n){var r=n(4)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(109),o=n(15),a=n(25);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},function(e,t,n){var r=n(110),o=n(111),a=n(112),i=n(113),s=n(114);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(17);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(17),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(17),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(17);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(18);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(18);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(18);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(18);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(121)();e.exports=r},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),s=i.length;s--;){var c=i[e?s:++o];if(!1===n(a[c],c,a))break}return t}}},function(e,t,n){var r=n(47),o=n(123),a=n(124),i=n(126),s=n(127),c=n(52),u=n(19),p=n(130),l=n(31),d=n(26),h=n(7),_=n(132),f=n(32),g=n(54),E=n(136);e.exports=function(e,t,n,m,y,A,T){var S=g(e,n),v=g(t,n),R=T.get(v);if(R)r(e,n,R);else{var O=A?A(S,v,n+"",e,t,T):void 0,C=void 0===O;if(C){var I=u(v),P=!I&&l(v),w=!I&&!P&&f(v);O=v,I||P||w?u(S)?O=S:p(S)?O=i(S):P?(C=!1,O=o(v,!0)):w?(C=!1,O=a(v,!0)):O=[]:_(v)||c(v)?(O=S,c(S)?O=E(S):h(S)&&!d(S)||(O=s(v))):C=!1}C&&(T.set(v,O),y(O,v,m,A,T),T.delete(v)),r(e,n,O)}}},function(e,t,n){(function(e){var r=n(4),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,s=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(29)(e))},function(e,t,n){var r=n(125);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(49);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(128),o=n(50),a=n(30);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(7),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){var r=n(13),o=n(9);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},function(e,t,n){var r=n(20),o=n(9);e.exports=function(e){return o(e)&&r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(13),o=n(50),a=n(9),i=Function.prototype,s=Object.prototype,c=i.toString,u=s.hasOwnProperty,p=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==p}},function(e,t,n){var r=n(13),o=n(53),a=n(9),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!i[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(44),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}).call(this,n(29)(e))},function(e,t,n){var r=n(137),o=n(55);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(138),o=n(28);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],p=a?a(n[u],e[u],u,n,e):void 0;void 0===p&&(p=e[u]),i?o(n,u,p):r(n,u,p)}return n}},function(e,t,n){var r=n(28),o=n(12),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(7),o=n(30),a=n(141),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&i.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(143),o=n(150);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,s&&o(n[0],n[1],s)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var c=n[r];c&&e(t,c,r,i)}return t}))}},function(e,t,n){var r=n(58),o=n(144),a=n(146);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){var r=n(145),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,s=o(a.length-t,0),c=Array(s);++i<s;)c[i]=a[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=a[i];return u[t]=n(c),r(e,this,u)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(147),o=n(149)(r);e.exports=o},function(e,t,n){var r=n(148),o=n(48),a=n(58),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(12),o=n(20),a=n(57),i=n(7);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?o(n)&&a(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(152),o=n(9);e.exports=function e(t,n,a,i,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,s))}},function(e,t,n){var r=n(43),o=n(59),a=n(158),i=n(161),s=n(171),c=n(19),u=n(31),p=n(32),l="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,h,_,f){var g=c(e),E=c(t),m=g?"[object Array]":s(e),y=E?"[object Array]":s(t),A=(m="[object Arguments]"==m?l:m)==l,T=(y="[object Arguments]"==y?l:y)==l,S=m==y;if(S&&u(e)){if(!u(t))return!1;g=!0,A=!1}if(S&&!A)return f||(f=new r),g||p(e)?o(e,t,n,h,_,f):a(e,t,m,n,h,_,f);if(!(1&n)){var v=A&&d.call(e,"__wrapped__"),R=T&&d.call(t,"__wrapped__");if(v||R){var O=v?e.value():e,C=R?t.value():t;return f||(f=new r),_(O,C,n,h,f)}}return!!S&&(f||(f=new r),i(e,t,n,h,_,f))}},function(e,t,n){var r=n(46),o=n(154),a=n(155);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(27),o=n(49),a=n(12),i=n(59),s=n(159),c=n(160),u=r?r.prototype:void 0,p=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,l,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!l(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var _=1&r;if(h||(h=c),e.size!=t.size&&!_)return!1;var f=d.get(e);if(f)return f==t;r|=2,d.set(e,t);var g=i(h(e),h(t),r,u,l,d);return d.delete(e),g;case"[object Symbol]":if(p)return p.call(e)==p.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(162),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,s){var c=1&n,u=r(e),p=u.length;if(p!=r(t).length&&!c)return!1;for(var l=p;l--;){var d=u[l];if(!(c?d in t:o.call(t,d)))return!1}var h=s.get(e),_=s.get(t);if(h&&_)return h==t&&_==e;var f=!0;s.set(e,t),s.set(t,e);for(var g=c;++l<p;){var E=e[d=u[l]],m=t[d];if(a)var y=c?a(m,E,d,t,e,s):a(E,m,d,e,t,s);if(!(void 0===y?E===m||i(E,m,n,a,s):y)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var A=e.constructor,T=t.constructor;A==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof A&&A instanceof A&&"function"==typeof T&&T instanceof T||(f=!1)}return s.delete(e),s.delete(t),f}},function(e,t,n){var r=n(163),o=n(165),a=n(168);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(164),o=n(19);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(166),o=n(167),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(56),o=n(169),a=n(20);e.exports=function(e){return a(e)?r(e):o(e)}},function(e,t,n){var r=n(30),o=n(170),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(51)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(172),o=n(25),a=n(173),i=n(174),s=n(175),c=n(13),u=n(45),p=u(r),l=u(o),d=u(a),h=u(i),_=u(s),f=c;(r&&"[object DataView]"!=f(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=f(new o)||a&&"[object Promise]"!=f(a.resolve())||i&&"[object Set]"!=f(new i)||s&&"[object WeakMap]"!=f(new s))&&(f=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case p:return"[object DataView]";case l:return"[object Map]";case d:return"[object Promise]";case h:return"[object Set]";case _:return"[object WeakMap]"}return t}),e.exports=f},function(e,t,n){var r=n(6)(n(4),"DataView");e.exports=r},function(e,t,n){var r=n(6)(n(4),"Promise");e.exports=r},function(e,t,n){var r=n(6)(n(4),"Set");e.exports=r},function(e,t,n){var r=n(6)(n(4),"WeakMap");e.exports=r},function(e,t,n){"use strict";var r=n(3),o=n(60),a=n(177),i=n(66);function s(e){var t=new a(e),n=o(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var c=s(n(63));c.Axios=a,c.create=function(e){return s(i(c.defaults,e))},c.Cancel=n(67),c.CancelToken=n(191),c.isCancel=n(62),c.all=function(e){return Promise.all(e)},c.spread=n(192),c.isAxiosError=n(193),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(3),o=n(61),a=n(178),i=n(179),s=n(66);function c(e){this.defaults=e,this.interceptors={request:new a,response:new a}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[i,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(3);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";var r=n(3),o=n(180),a=n(62),i=n(63);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,u=[],p=!1,l=-1;function d(){p&&c&&(p=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!p){var e=s(d);p=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,p=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new _(e,t)),1!==u.length||p||s(h)},_.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(65);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(3);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,a,i){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(187),o=n(188);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(3),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,i={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},function(e,t,n){"use strict";var r=n(3);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(67);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,n){"use strict";n.r(t),n.d(t,"initEngine",(function(){return ol})),n.d(t,"preInstallApps",(function(){return al})),n.d(t,"updateTheme",(function(){return il})),n.d(t,"registerApi",(function(){return Jo})),n.d(t,"registerModule",(function(){return a})),n.d(t,"EPlatformModuleNames",(function(){return s})),n.d(t,"updateData",(function(){return Iu})),n.d(t,"debugCommands",(function(){return Rn})),n.d(t,"updateAppVisibility",(function(){return Uu})),n.d(t,"extendApiForShell",(function(){return qu})),n.d(t,"ZAxis",(function(){return tl})),n.d(t,"pushTypedMessage",(function(){return $u})),n.d(t,"getTypedConfig",(function(){return Ju})),n.d(t,"engineEventHooks",(function(){return Xu})),n.d(t,"diagnose",(function(){return ep})),n.d(t,"engineVersion",(function(){return sl}));var r={};n.r(r),n.d(r,"login",(function(){return Ua})),n.d(r,"getUserInfo",(function(){return qa})),n.d(r,"enterProfile",(function(){return ni})),n.d(r,"chooseContact",(function(){return ci})),n.d(r,"chooseChat",(function(){return di})),n.d(r,"getSystemInfo",(function(){return fi})),n.d(r,"getHostInfo",(function(){return gi})),n.d(r,"triggerHostOnEvent",(function(){return Ei})),n.d(r,"offHostOnEvent",(function(){return mi})),n.d(r,"onViewResize",(function(){return Ri})),n.d(r,"offViewResize",(function(){return Oi})),n.d(r,"openSchema",(function(){return Qi})),n.d(r,"createRequestTask",(function(){return ys})),n.d(r,"operateRequestTask",(function(){return As})),n.d(r,"clearStorage",(function(){return vs})),n.d(r,"setStorage",(function(){return Cs})),n.d(r,"getStorage",(function(){return ws})),n.d(r,"removeStorage",(function(){return Ms})),n.d(r,"getStorageInfo",(function(){return Ds})),n.d(r,"getStorageData",(function(){return xs})),n.d(r,"saveState",(function(){return Fs})),n.d(r,"setBlockInfo",(function(){return Hs})),n.d(r,"cancel",(function(){return js})),n.d(r,"monitorReport",(function(){return Bs})),n.d(r,"createAudioInstance",(function(){return ec})),n.d(r,"setAudioState",(function(){return rc})),n.d(r,"getAudioState",(function(){return nc})),n.d(r,"operateAudio",(function(){return oc})),n.d(r,"destroyAudioInstance",(function(){return tc})),n.d(r,"showModal",(function(){return uc})),n.d(r,"showToast",(function(){return Tc})),n.d(r,"hideToast",(function(){return vc})),n.d(r,"concatFiles",(function(){return Ic})),n.d(r,"saveLog",(function(){return wc})),n.d(r,"createSocketTask",(function(){return xc})),n.d(r,"operateSocketTask",(function(){return Hc}));const o=new Map;function a(e,t){o.set(e,t)}function i(e){const t=o.get(e);return t||console.warn(`platform module [${e}] not register`),t}var s;!function(e){e.START_SERVER="startServer",e.RUNTIME_TO_SERVER_COMMUNICATION="runtimeToServer",e.SERVER_TO_RUNTIME_COMMUNICATION="serverToRuntime",e.STORAGE="Storage",e.FETCH="fetch",e.REQUEST="request",e.REPORT="report",e.WORKER_CONTAINER="WorkerContainer",e.SHADOW_RENDER_CONTAINER="ShadowRenderContainer",e.IFRAME_RENDER_CONTAINER="IframeRenderContainer",e.PLATFORM_COMMON="platformCommon",e.RUNTIME_COMMON="runtimeCommon",e.SERVER_COMMON="serverCommon",e.FS="fs",e.DOWNLOAD_FILE="downloadFile",e.REPORT_TEA="reportTea",e.COOKIE_MANAGER="cookieManager",e.INVOKE_RUST_NET_API="invokeRustNetApi"}(s||(s={}));var c,u=n(0),p=n.n(u);!function(e){e.NORMAL="callbacks",e.ONCE="onceCallbacks"}(c||(c={}));class l{constructor(){p()(this,"callbacks",void 0),p()(this,"onceCallbacks",void 0),this.callbacks={},this.onceCallbacks={}}_on(e,t,n){const r=this[e][t];return r?r.includes(n)||r.push(n):this[e][t]=[n],this}on(e,t){return this._on(c.NORMAL,e,t)}once(e,t){return this._on(c.ONCE,e,t)}emit(e,...t){const n=this.callbacks[e],r=this.onceCallbacks[e];return n&&n.slice().forEach(e=>{e(...t)}),r&&(r.slice().forEach(e=>{e(...t)}),delete this.onceCallbacks[e]),this}off(e,t){return t?["callbacks","onceCallbacks"].forEach(n=>{const r=this[n][e]||[],o=r.findIndex(e=>e===t);o>-1&&r.splice(o,1),0===r.length&&delete this[n][e]}):(delete this.callbacks[e],delete this.onceCallbacks[e]),this}removeAllListeners(e){e?(delete this.callbacks[e],delete this.onceCallbacks[e]):(this.callbacks={},this.onceCallbacks={})}}const d=window.__PC_ENGINE_GLOBAL_EMITTER__||(window.__PC_ENGINE_GLOBAL_EMITTER__=new l);class h{constructor(e){p()(this,"type",void 0),this.type=e}getEmitEventName(){return"runtime"===this.type?"to_server":"to_runtime"}getOnEventName(){return"runtime"===this.type?"to_runtime":"to_server"}postMessage(e){d.emit(this.getEmitEventName(),e)}onMessage(e){d.on(this.getOnEventName(),e)}offMessage(e){d.off(this.getOnEventName(),e)}destroy(){}}var _,f,g=n(8);!function(e){e.BLOCK="block",e.GADGET="Gadget",e.H5="H5",e.Z_AXIS="ZAxis",e.ALL="all"}(_||(_={})),function(e){e.BLOCK="block",e.GADGET="Gadget",e.H5="H5",e.Z_AXIS="ZAxis"}(f||(f={}));const E={[f.BLOCK]:"block",[f.GADGET]:"gadget",[f.H5]:"webApp",[f.Z_AXIS]:f.Z_AXIS};var m,y;!function(e){e.BROWSER="browser",e.LARK="lark",e.BROWSER_PLUGIN="browser-plugin"}(m||(m={})),function(e){e.ONLINE="online",e.STAGING="staging",e.BOE="boe",e.PRE="pre",e.TEST="test"}(y||(y={}));const A=[y.ONLINE,y.BOE,y.PRE];var T;!function(e){e.FEISHU="feishu",e.LARK="lark"}(T||(T={}));const S=[T.FEISHU,T.LARK],v=["pc","mobile"];var R;!function(e){e[e.API=1]="API",e[e.OPEN=7]="OPEN",e[e.MP_CONFIG=32]="MP_CONFIG",e[e.OPEN_APP_INTERFACE=53]="OPEN_APP_INTERFACE",e[e.MP_REFER=31]="MP_REFER",e[e.DOCS_PEER=62]="DOCS_PEER"}(R||(R={}));const O={[R.API]:"internal-api-lark-api",[R.OPEN_APP_INTERFACE]:"internal-api",[R.OPEN]:"open"},C={open:R.OPEN,"internal-api-lark-api":R.API,"internal-api":R.OPEN_APP_INTERFACE};var I;!function(e){e.GET_CHATIDS_BY_OPENCHATIDS="/getChatIDsByOpenChatIDs",e.GET_CHATID_BY_OPENID="/v2/getChatIDByOpenID",e.GET_OPEN_USER_SUMMARY="/v4/getOpenUserSummary",e.GET_USERIDS_BY_OPENIDS="/v2/getUserIDsByOpenIDs",e.GET_OPENIDS_BY_USERIDS="/v2/getOpenIDsByUserIDs",e.GET_UPDATE_APP_INFOS="/GetUpdateAppInfos",e.GET_OPENCHATIDS_BY_CHATIDS="/v4/getOpenChatIDsByChatIDs",e.GET_USERID_BY_OPENID="/v2/getUserIDByOpenID",e.LIGHT_SERVICE_INVIKE="/light_service/invoke",e.GET_OPEN_DEPARTMENT_IDS_BY_DepIDS="/getOpenDepIDsByDepIDs"}(I||(I={}));function P(e,t=!0){const n=i(s.PLATFORM_COMMON);return n&&n.isFeatureEnabled(e,t)}const w=(e,t)=>{const n=i(s.PLATFORM_COMMON);return n&&n.pathBasename(e,t)};async function b(e){const t=i(s.PLATFORM_COMMON);return t&&t.getV3SettingByKey(e)}function N(e){const t=i(s.PLATFORM_COMMON);return t&&t.isAppLinkUrl(e)}var M=n(42),L=n.n(M);function k(){const e=[];for(let t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]="0123456789abcdef".substr(8|e[19],1),e[8]=e[13]=e[18]=e[23]="-";return e.join("")}function D(e){if(void 0===e)return"Undefined";if(null===e)return"Null";const t=Object.prototype.toString.call(e);return t.slice(t.indexOf(" ")+1,-1)}function U(e){const t=D(e);return"Array"===t||"Object"===t}const K={string:function(e){return"string"==typeof e||"String"===D(e)},undefined:function(e){return void 0===e},object:U,array:function(e){return Array.isArray(e)},function:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e&&!Number.isNaN(e)},arrayBuffer:function(e){return"ArrayBuffer"===D(e)},uint8Array:function(e){return"Uint8Array"===D(e)||e instanceof Uint8Array},blob:function(e){return e instanceof Blob},boolean:function(e){return!0===e||!1===e}};function x(e,t){let n;return(...r)=>{n&&(clearTimeout(n),n=null),n=setTimeout(()=>{"function"==typeof e&&e(...r)},t)}}function F(e){try{return decodeURIComponent(e)}catch(e){}return e}function H(e,t){const n=(e||"").match(/^([^?]+)(\?(.*))?$/);if(!n)return{path:e,query:{}};const r=n[1],o=n[3];if(!o)return{path:r,query:{}};const a={},i=o.split("&");for(let e=0;e<i.length;e++){const n=i[e].match(/([^=]+)=(.*)/);if(n){const e=t&&n[2]?F(n[2]):n[2];a[n[1]]=e}}return{path:r,query:a}}const j={"content-type":"Content-Type"};function B(e){const t={};return Object.keys(e).forEach(n=>{const r=n.toLowerCase();j[r]?t[j[r]]=e[n]:t[n]=e[n]}),t}function G(e){if("string"==typeof e)return e;return(new TextDecoder).decode(e)}function V(e){return/\.js\.bc_v3$/.test(e)}function W(){return function(){const e=navigator.userAgent;return/iPhone|iPad|iOS/i.test(e)||/safari/i.test(e)&&!/chrome/i.test(e)}()&&"ontouchend"in window}async function q(e,t=0){return new Promise((n,r)=>{let o=0;const a=async()=>{try{const t=await e();n(t)}catch(e){o<t?(o++,a()):r(e)}};a()})}function $(e){return e.catch(e=>{}),e}const{base64ToUint8:Q,Uint8ToBase64:z}=function(){const e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],t=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function n(e){if(e>=t.length)throw new Error("Unable to parse base64 string.");const n=t[e];if(255===n)throw new Error("Unable to parse base64 string.");return n}return{base64ToUint8:function(e){if(e.length%4!=0)throw new Error("Unable to parse base64 string.");const t=e.indexOf("=");if(-1!==t&&t<e.length-2)throw new Error("Unable to parse base64 string.");const r=e.endsWith("==")?2:e.endsWith("=")?1:0,o=e.length,a=new Uint8Array(o/4*3);let i;for(let t=0,r=0;t<o;t+=4,r+=3)i=n(e.charCodeAt(t))<<18|n(e.charCodeAt(t+1))<<12|n(e.charCodeAt(t+2))<<6|n(e.charCodeAt(t+3)),a[r]=i>>16,a[r+1]=i>>8&255,a[r+2]=255&i;return a.subarray(0,a.length-r)},Uint8ToBase64:function(t){let n,r="";const o=t.length;for(n=2;n<o;n+=3)r+=e[t[n-2]>>2],r+=e[(3&t[n-2])<<4|t[n-1]>>4],r+=e[(15&t[n-1])<<2|t[n]>>6],r+=e[63&t[n]];return n===o+1&&(r+=e[t[n-2]>>2],r+=e[(3&t[n-2])<<4],r+="=="),n===o&&(r+=e[t[n-2]>>2],r+=e[(3&t[n-2])<<4|t[n-1]>>4],r+=e[(15&t[n-1])<<2],r+="="),r}}}();const Y=Object(g.a)().__EngineCDNDomain__,J=`https://${Y||"sf6-scmcdn-cn.feishucdn.com"}/goofy/pc/engine/block/browser/es6/`;let X=function(){if(Y)return J;try{const e=document.currentScript,t=e&&(e.src||location.href),n=t?t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"):"";return/^https?:/i.test(n)&&n.includes("/goofy/pc/engine")?n:""}catch(e){return""}}()||J;function Z(e){return`${X}${e}`}function ee(){return X}const te=e=>{const t=new Blob([e],{type:"text/javascript"});return n=t,"undefined"!=typeof window?(window.URL||window.webkitURL).createObjectURL(n):URL.createObjectURL(n);var n};var ne,re;!function(e){e.WORKER_CODE="worker_code",e.WORKER_CODE_BYTECODE="worker_byte_code",e.WEBVIEW_CODE="webview_code",e.QJS_GROUP_CODE="qjs_group_code",e.SERVER_CODE="server_code"}(ne||(ne={})),function(e){e.TEXT="text",e.URL="url"}(re||(re={}));function oe(e){const t=e.length+"2.21.5";let n="";for(let e=t.length-1;e>=0;e--)n+=String.fromCharCode(97+~~t[e]);return n}function ae(e){return"op_engine_code_cache_"+e}function ie(e,t,n){const r={[t]:n,tag:oe(n)};try{localStorage.setItem(ae(e),JSON.stringify(r))}catch(e){}}function se(e,t,n=re.TEXT){const r=ae(e);try{const e=localStorage.getItem(r);if(!e)return;const o=JSON.parse(e),a=o[t],i=o.tag;if(a&&oe(a)===i)return n===re.TEXT?a:te(a);localStorage.removeItem(r)}catch(e){}}async function ce(){const e=Z("server-2.21.5.js"),t=se(ne.SERVER_CODE,e);if(t)return t;const n=await fetch(e).then(e=>e.ok?e.text():Promise.reject(new Error("fetch server failed, "+e.status)));return ie(ne.SERVER_CODE,e,n),n}var ue,pe,le=n(22);!function(e){e.REQUEST="request",e.RESPONSE="response",e.PUBLISH="publish"}(ue||(ue={})),function(e){e[e.UNKNOWN=-4e3]="UNKNOWN",e[e.LAUNCH_TIMEOUT=-4001]="LAUNCH_TIMEOUT",e[e.SDK_INVALID=-4023]="SDK_INVALID",e[e.CONTAINERS_INIT_ERROR=-4024]="CONTAINERS_INIT_ERROR",e[e.GET_APP_CODE_FAIL=-4025]="GET_APP_CODE_FAIL",e[e.RUN_APP_CODE_ERROR=-4026]="RUN_APP_CODE_ERROR",e[e.USER_CANCEL=-4027]="USER_CANCEL",e[e.APP_CHECK_FAIL=-4028]="APP_CHECK_FAIL",e[e.SERVER_UNKNOWN=-5e4]="SERVER_UNKNOWN",e[e.SERVER_SDK_VERSION_IS_LOW=-50001]="SERVER_SDK_VERSION_IS_LOW",e[e.SERVER_BASIC_LIB_VERSION_IS_LOW=-50002]="SERVER_BASIC_LIB_VERSION_IS_LOW",e[e.SERVER_CLIENT_VERSION_IS_LOW=-50003]="SERVER_CLIENT_VERSION_IS_LOW",e[e.SERVER_APP_CHECK_NETWORK_ERROR=-50004]="SERVER_APP_CHECK_NETWORK_ERROR",e[e.SERVER_APP_CHECK_SERVER_FAIL=-50005]="SERVER_APP_CHECK_SERVER_FAIL",e[e.SERVER_GET_META_FAILED=-50100]="SERVER_GET_META_FAILED",e[e.SERVER_FETCH_META_SERVER_FAIL=-50101]="SERVER_FETCH_META_SERVER_FAIL",e[e.SERVER_META_INVALID=-50102]="SERVER_META_INVALID",e[e.SERVER_INVALID_DEBUG_URL=-50103]="SERVER_INVALID_DEBUG_URL",e[e.SERVER_PREVIEW_PKG_URL_IS_NOT_LOCALHOST=-50104]="SERVER_PREVIEW_PKG_URL_IS_NOT_LOCALHOST",e[e.SERVER_PREVIEW_PKG_URL_IS_NOT_IN_WHITELIST=-50105]="SERVER_PREVIEW_PKG_URL_IS_NOT_IN_WHITELIST",e[e.SERVER_INVALID_APPID=-50106]="SERVER_INVALID_APPID",e[e.SERVER_FETCH_META_NETWORK_ERROR=-50107]="SERVER_FETCH_META_NETWORK_ERROR",e[e.SERVER_FETCH_META_DECRYPT_ERROR=-50108]="SERVER_FETCH_META_DECRYPT_ERROR",e[e.SERVER_FETCH_META_SERVER_INTERNAL_FAIL=-50109]="SERVER_FETCH_META_SERVER_INTERNAL_FAIL",e[e.SERVER_GET_PACKAGE_FAILED=-50200]="SERVER_GET_PACKAGE_FAILED",e[e.SERVER_GET_SUB_PACKAGE_FAILED=-50201]="SERVER_GET_SUB_PACKAGE_FAILED",e[e.SERVER_PACKAGE_FETCH_ERROR=-50202]="SERVER_PACKAGE_FETCH_ERROR",e[e.SERVER_PACKAGE_FETCH_NETWORK_ERROR=-50203]="SERVER_PACKAGE_FETCH_NETWORK_ERROR",e[e.SERVER_PACKAGE_FETCH_SERVER_INTERNAL_FAIL=-50204]="SERVER_PACKAGE_FETCH_SERVER_INTERNAL_FAIL",e[e.SERVER_PACKAGE_FETCH_RUST_FAIL=-50205]="SERVER_PACKAGE_FETCH_RUST_FAIL",e[e.SERVER_PACKAGE_INSTALL_FAILED=-50206]="SERVER_PACKAGE_INSTALL_FAILED",e[e.SERVER_PACKAGE_INSTALL_FILE_FAILED=-50207]="SERVER_PACKAGE_INSTALL_FILE_FAILED",e[e.SERVER_PACKAGE_INSTALL_BLOB_FAILED=-50208]="SERVER_PACKAGE_INSTALL_BLOB_FAILED",e[e.SERVER_GET_SDK_FAILED=-50300]="SERVER_GET_SDK_FAILED",e[e.SERVER_BLOB_SDK_INVALID=-50301]="SERVER_BLOB_SDK_INVALID",e[e.SERVER_SDK_FETCH_FAILED=-50302]="SERVER_SDK_FETCH_FAILED",e[e.SERVER_SDK_INSTALL_FAILED=-50303]="SERVER_SDK_INSTALL_FAILED",e[e.SERVER_SDK_FETCH_CONFIG_FAILED=-50304]="SERVER_SDK_FETCH_CONFIG_FAILED",e[e.SERVER_SDK_FETCH_NETWORK_ERROR=-50305]="SERVER_SDK_FETCH_NETWORK_ERROR",e[e.SERVER_SDK_FETCH_INTERNAL_ERROR=-50306]="SERVER_SDK_FETCH_INTERNAL_ERROR",e[e.SERVER_SDK_FETCH_RUST_FAILED=-50307]="SERVER_SDK_FETCH_RUST_FAILED",e[e.SERVER_SDK_INSTALL_FILE_FAILED=-50308]="SERVER_SDK_INSTALL_FILE_FAILED",e[e.SERVER_SDK_INSTALL_BLOB_FAILED=-50309]="SERVER_SDK_INSTALL_BLOB_FAILED",e[e.SERVER_SDK_SETTINGS_NETWORK_ERROR=-50310]="SERVER_SDK_SETTINGS_NETWORK_ERROR",e[e.SERVER_SDK_SETTINGS_HOST_ERROR=-50311]="SERVER_SDK_SETTINGS_HOST_ERROR",e[e.SERVER_SDK_SETTINGS_SERVER_INTERNAL_ERROR=-50312]="SERVER_SDK_SETTINGS_SERVER_INTERNAL_ERROR",e[e.SERVER_GET_CONFIG_FAILED=-50400]="SERVER_GET_CONFIG_FAILED",e[e.SERVER_UPDATE_APP_FAILED=-50500]="SERVER_UPDATE_APP_FAILED",e[e.SERVER_COMPONENT_DOWNLOAD_FAILED=-50600]="SERVER_COMPONENT_DOWNLOAD_FAILED",e[e.SERVER_COMPONENT_UNZIP_FAILED=-50601]="SERVER_COMPONENT_UNZIP_FAILED",e[e.SERVER_COMPONENT_GET_SETTINGS_FAILED=-50602]="SERVER_COMPONENT_GET_SETTINGS_FAILED",e[e.SERVER_COMPONENT_FILE_OCCUPIED=-50603]="SERVER_COMPONENT_FILE_OCCUPIED"}(pe||(pe={}));const de={configValueEmpty:{domain:"client.open_platform.common.config",code:10001,level:4,message:"config_value_empty"},fetchMinaConfigResult:{domain:"client.open_platform.common.config",code:10002,level:2,message:"fetch_mina_config_result"},fetchSettingsConfigResult:{domain:"client.open_platform.common.config",code:10003,level:2,message:"fetch_settings_config_result"},fetchConfigResult:{domain:"client.open_platform.common.config",code:10004,level:2,message:"fetch_config_result"}},he={domain:"js.open_platform.pc_engine.launch",code:10004,level:4,message:"meta_network_error"},_e={domain:"js.open_platform.pc_engine.launch",code:10005,level:4,message:"meta_decrypt_fail"},fe={domain:"js.open_platform.pc_engine.launch",code:10006,level:4,message:"meta_server_internal_error"},ge={domain:"js.open_platform.pc_engine.launch",code:10008,level:4,message:"meta_server_fail"},Ee={domain:"js.open_platform.pc_engine.launch",code:10009,level:4,message:"package_network_error"},me={domain:"js.open_platform.pc_engine.launch",code:10010,level:4,message:"package_server_internal_error"},ye={domain:"js.open_platform.pc_engine.launch",code:10011,level:4,message:"package_rust_fail"},Ae={domain:"js.open_platform.pc_engine.launch",code:10012,level:4,message:"package_install_file_fail"},Te={domain:"js.open_platform.pc_engine.launch",code:10013,level:4,message:"package_install_blob_fail"},Se={domain:"js.open_platform.pc_engine.launch",code:10014,level:4,message:"sdk_network_error"},ve={domain:"js.open_platform.pc_engine.launch",code:10015,level:4,message:"sdk_server_internal_error"},Re={domain:"js.open_platform.pc_engine.launch",code:10016,level:4,message:"sdk_rust_fail"},Oe={domain:"js.open_platform.pc_engine.launch",code:10017,level:4,message:"sdk_install_file_fail"},Ce={domain:"js.open_platform.pc_engine.launch",code:10018,level:4,message:"sdk_install_blob_fail"},Ie={domain:"js.open_platform.pc_engine.launch",code:10019,level:4,message:"sdk_settings_host_error"},Pe={domain:"js.open_platform.pc_engine.launch",code:10020,level:4,message:"sdk_settings_network_error"},we={domain:"js.open_platform.pc_engine.launch",code:10021,level:4,message:"sdk_settings_server_internal_error"},be={domain:"js.open_platform.pc_engine.launch",code:10022,level:4,message:"runtime_jssdk_code_fail"},Ne={domain:"js.open_platform.pc_engine.launch",code:10023,level:4,message:"runtime_app_code_fail"},Me={domain:"js.open_platform.pc_engine.launch",code:10024,level:4,message:"app_check_fail"},Le={domain:"js.open_platform.pc_engine.launch",code:10025,level:4,message:"unknown"};var ke,De,Ue,Ke,xe=n(1);!function(e){e.COMMON="client.open_platform.common",e.GADGET="client.open_platform.gadget",e.H5="client.open_platform.web",e.CARD="client.open_platform.app_card"}(ke||(ke={})),function(e){e.DEFAULT="client.open_platform.common",e.PACKAGE="client.open_platform.common.package",e.META="client.open_platform.common.meta",e.CONFIG="client.open_platform.common.config",e.MA_APP_STRATEGY="client.open_platform.gadget.app_strategy.ma",e.API_COMMON="client.open_platform.api.common",e.NETWORK_QUALITY="network_quality_type_change"}(De||(De={})),function(e){e.DEFAULT="client.open_platform.gadget",e.LAUNCH="client.open_platform.gadget.launch",e.APPLOAD="client.open_platform.gadget.app_load",e.LIFECYCLE="client.open_platform.gadget.lifecycle"}(Ue||(Ue={})),function(e){e.REAL_MACHINE_DEBUG="client.open_platform.opdev.realmachine_debug"}(Ke||(Ke={}));const Fe={CONFIG:{CONFIG_VALUE_EMPTY:de.configValueEmpty,FETCH_SETTINGS_CONFIG_RESULT:de.fetchSettingsConfigResult,FETCH_CONFIG_RESULT:de.fetchConfigResult},API_COMMON:{RECEIVE_SDK_INVOKE:{domain:De.API_COMMON,code:10002,level:xe.e.normal,message:"native_receive_invoke"},NATIVE_CALLBACK_INVOKE:{domain:De.API_COMMON,code:10003,level:xe.e.normal,message:"native_callback_invoke"},NATIVE_INVOKE_START:{domain:De.API_COMMON,code:10004,level:xe.e.normal,message:"native_invoke_start"},NATIVE_INVOKE_RESULT:{domain:De.API_COMMON,code:10005,level:xe.e.normal,message:"native_invoke_result"},NATIVE_PARAM_CHECKER:{domain:De.API_COMMON,code:10010,level:xe.e.normal,message:"plugin_input_checker"}},NETWORK_QUALITY:{NETWORK_QUALITY_TYPE_CHANGE:{domain:De.NETWORK_QUALITY,code:10006,level:xe.e.normal,message:"network_quality_type_change"}}},He={LAUNCH:{JSSDK_VERSION_IS_LOW:{domain:"js.open_platform.pc_engine.launch",code:10026,level:xe.e.warn,message:"jssdk_version_is_low"},BLOCKIT_LIB_VERSION_IS_LOW:{domain:"js.open_platform.pc_engine.launch",code:10027,level:xe.e.warn,message:"blockit_lib_version_is_low"},CLIENT_VERSION_IS_LOW:{domain:"js.open_platform.pc_engine.launch",code:10028,level:xe.e.warn,message:"client_version_is_low"}},LIFECYCLE:{PAGE_APPEAR:{domain:Ue.LIFECYCLE,code:1e4,level:xe.e.normal,message:"page_appear"},PAGE_READY:{domain:Ue.LIFECYCLE,code:10001,level:xe.e.normal,message:"page_onready"},PAGE_DISAPPEAR:{domain:Ue.LIFECYCLE,code:10002,level:xe.e.normal,message:"page_disappear"},GADGET_FOCUS:{domain:Ue.LIFECYCLE,code:10005,level:xe.e.normal,message:"gadget_focus"},GADGET_LOSE_FOCUS:{domain:Ue.LIFECYCLE,code:10006,level:xe.e.normal,message:"gadget_lose_focus"},GADGET_CLOSE:{domain:Ue.LIFECYCLE,code:10007,level:xe.e.normal,message:"gadget_close"}}},je={REAL_MACHINE_DEBUG:{SOCKET_INIT:{domain:Ke.REAL_MACHINE_DEBUG,code:1e4,level:xe.e.normal,message:"realmachine_socket_init"},SOCKET_OPEN:{domain:Ke.REAL_MACHINE_DEBUG,code:10001,level:xe.e.normal,message:"realmachine_socket_open"},SOCKET_FAILED:{domain:Ke.REAL_MACHINE_DEBUG,code:10002,level:xe.e.error,message:"realmachine_socket_failed"},SOCKET_DISCONNECT:{domain:Ke.REAL_MACHINE_DEBUG,code:10003,level:xe.e.normal,message:"realmachine_socket_disconnected"},STOP_DEBUG:{domain:Ke.REAL_MACHINE_DEBUG,code:10004,level:xe.e.normal,message:"realmachine_client_finish_debug"},SEND_INIT_MESSAGE:{domain:Ke.REAL_MACHINE_DEBUG,code:10005,level:xe.e.normal,message:"realmachine_init_worker"}}};function Be(e){const t=""+e;return"[object Object]"===t?JSON.stringify(e):t}class Ge{static fromError(e,t={code:pe.UNKNOWN},n){let{message:r}=t;const{monitorCode:o,code:a=pe.UNKNOWN}=t;return e&&"OPError"===e.name?((e=new Ge(e)).code===pe.UNKNOWN&&void 0!==t.code&&(e.code=t.code),Object.keys(t).forEach(n=>{void 0===e[n]&&void 0!==t[n]&&(e[n]=t[n])}),e):(r=r||e&&e.message&&String(e.message)||Be(e),new Ge({...t,message:r,code:a,monitorCode:o}))}constructor(e){p()(this,"name","OPError"),p()(this,"_displayMessage",""),p()(this,"message",void 0),p()(this,"code",void 0),p()(this,"serverErrorCode",void 0),p()(this,"monitorCode",void 0),p()(this,"traceId",void 0),p()(this,"requestId",void 0),p()(this,"httpCode",void 0),p()(this,"rustTaskKey",void 0),p()(this,"installStage",void 0),p()(this,"installSourcePath",void 0),p()(this,"installTargetPath",void 0),p()(this,"installPkgFormat",void 0),p()(this,"isLarkSettings",void 0),p()(this,"requestUrl",void 0);const{message:t,code:n,monitorCode:r,tracing:o,traceId:a,displayMessage:i,serverErrorCode:s,requestId:c,httpCode:u,rustTaskKey:l}=e;this._displayMessage=i||n&&pe[n]||"",this.message=Be(t||this._displayMessage),this.code=n||pe.UNKNOWN,this.monitorCode=r,this.traceId=a||o&&o.traceId,this.serverErrorCode=s,this.requestId=c,this.httpCode=u,this.rustTaskKey=l,this.installStage=e.installStage,this.installSourcePath=e.installSourcePath,this.installTargetPath=e.installTargetPath,this.installPkgFormat=e.installPkgFormat,this.isLarkSettings=e.isLarkSettings,this.requestUrl=e.requestUrl}get displayMessage(){return this._displayMessage||pe[this.code]||"UNKNOWN"}set displayMessage(e){this._displayMessage=e}setMap(e){return Object.keys(e).forEach(t=>{const n=e[t];void 0!==n&&(this[t]=n)}),this}setMonitorCode(e){return e&&(this.monitorCode=e),this}toJSON(){return{...this,displayMessage:this._displayMessage}}toString(){return`EngineError: ${this.code} ${this.message}`+(void 0!==this.monitorCode?" monitorCode="+JSON.stringify(this.monitorCode):"")+(void 0!==this.traceId?" traceId="+this.traceId:"")+(void 0!==this.serverErrorCode?" serverErrorCode="+this.serverErrorCode:"")+(void 0!==this.requestId?" requestId="+this.requestId:"")+(void 0!==this.httpCode?" httpCode="+this.httpCode:"")+(void 0!==this.rustTaskKey?" rustTaskKey="+this.rustTaskKey:"")+(void 0!==this.requestUrl?" requestUrl="+this.requestUrl:"")+(void 0!==this.installStage?" installStage="+this.installStage:"")+(void 0!==this.installSourcePath?" installSourcePath="+this.installSourcePath:"")+(void 0!==this.installTargetPath?" installTargetPath="+this.installTargetPath:"")+(void 0!==this.installPkgFormat?" installPkgFormat="+this.installPkgFormat:"")}get isServerInternalError(){return!!this.httpCode&&(this.httpCode>=300||this.httpCode<200)}get isServerError(){return!!this.serverErrorCode&&0!==this.serverErrorCode}get isNetworkError(){return/failed to fetch/i.test(this.message)||/network error/i.test(this.message)}}function Ve(e){return Be(e)}var We;!function(e){e.CONTAINER_SERVER="0"}(We||(We={}));const qe=new class{constructor(e){p()(this,"invokeCallbackMap",new Map),p()(this,"channel",void 0),p()(this,"eventCallbackMap",new Map),p()(this,"services",{}),p()(this,"communication",void 0),p()(this,"dataCaches",[]),p()(this,"createTime",Date.now()),p()(this,"increasingId",1),p()(this,"messageHandler",e=>{if(e.channel===this.channel)switch(e.type){case ue.REQUEST:this._onInvokeRequest(e);break;case ue.RESPONSE:this._onInvokeResponse(e);break;case ue.PUBLISH:this._onPublish(e)}}),this.channel=e,this.communication={postMessage:e=>this.dataCaches.push(e),onMessage:()=>{},offMessage:()=>{}}}registerServices(e){this.services=Object.assign(this.services,e)}setCommunication(e){this.communication!==e&&(this.communication&&this.communication.offMessage(this.messageHandler),this.communication=e,e.onMessage(this.messageHandler),this.dataCaches.length&&(this.dataCaches.forEach(t=>e.postMessage(t)),this.dataCaches.length=0))}invoke(e,t,n,r){n=n||{};const{timeout:o}=n,a=`${k()}-${this.createTime}-${this.increasingId}`;let i;return this.increasingId++,this.communication.postMessage({channel:this.channel,type:ue.REQUEST,apiName:e,params:t,cid:a}),K.number(o)&&(i=Object(g.a)().setTimeout(()=>{const t=this.invokeCallbackMap.get(a);t&&(this.invokeCallbackMap.delete(a),t(new Error("invoke timeout. apiName: "+e)))},o)),new Promise((e,t)=>{this.invokeCallbackMap.set(a,(n,o)=>{void 0!==i&&Object(g.a)().clearTimeout(i);const a=n?Ge.fromError(n):void 0;a?t(a):e(o),"function"==typeof r&&r(a,o)})})}subscribe(e,t){this.eventCallbackMap.has(e)||this.eventCallbackMap.set(e,[]);const n=this.eventCallbackMap.get(e);return n.push(t),()=>{const e=n.findIndex(e=>t===e);e>-1&&n.splice(e,1)}}publish(e,t,n){const r={channel:this.channel,type:ue.PUBLISH,eventName:e,data:t};n?this._onPublish(r):this.communication.postMessage(r)}async _onInvokeRequest(e){const{cid:t,apiName:n,params:r}=e;if(this.services&&"function"==typeof this.services[n]){const e=this.services[n];let o,a=null;try{o=await e(r)}catch(e){a=Ge.fromError(e)}this.communication.postMessage({channel:this.channel,type:ue.RESPONSE,cid:t,data:o,error:a})}else this.communication.postMessage({channel:this.channel,type:ue.RESPONSE,cid:t,error:{message:`[${n}]: service not found`}})}_onInvokeResponse(e){const{cid:t,data:n,error:r}=e,o=this.invokeCallbackMap.get(t);"function"==typeof o&&(o(r,n),this.invokeCallbackMap.delete(t))}_onPublish(e){const{eventName:t,data:n}=e,r=this.eventCallbackMap.get(t);r&&[...r].forEach(e=>{try{e(n)}catch(e){}})}}(We.CONTAINER_SERVER);const $e={setLocalStorage:async({key:e,value:t})=>(localStorage.setItem(e,t),!0),getLocalStorage:async({key:e})=>localStorage.getItem(e),removeLocalStorage:async({key:e})=>localStorage.removeItem(e)};function Qe(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function ze(e,t,n,r,o,a){return Qe((i=Qe(Qe(t,e),Qe(r,a)))<<(s=o)|i>>>32-s,n);var i,s}function Ye(e,t,n,r,o,a,i){return ze(t&n|~t&r,e,t,o,a,i)}function Je(e,t,n,r,o,a,i){return ze(t&r|n&~r,e,t,o,a,i)}function Xe(e,t,n,r,o,a,i){return ze(t^n^r,e,t,o,a,i)}function Ze(e,t,n,r,o,a,i){return ze(n^(t|~r),e,t,o,a,i)}function et(e,t){var n,r,o,a,i;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,u=-1732584194,p=271733878;for(n=0;n<e.length;n+=16)r=s,o=c,a=u,i=p,s=Ye(s,c,u,p,e[n],7,-680876936),p=Ye(p,s,c,u,e[n+1],12,-389564586),u=Ye(u,p,s,c,e[n+2],17,606105819),c=Ye(c,u,p,s,e[n+3],22,-1044525330),s=Ye(s,c,u,p,e[n+4],7,-176418897),p=Ye(p,s,c,u,e[n+5],12,1200080426),u=Ye(u,p,s,c,e[n+6],17,-1473231341),c=Ye(c,u,p,s,e[n+7],22,-45705983),s=Ye(s,c,u,p,e[n+8],7,1770035416),p=Ye(p,s,c,u,e[n+9],12,-1958414417),u=Ye(u,p,s,c,e[n+10],17,-42063),c=Ye(c,u,p,s,e[n+11],22,-1990404162),s=Ye(s,c,u,p,e[n+12],7,1804603682),p=Ye(p,s,c,u,e[n+13],12,-40341101),u=Ye(u,p,s,c,e[n+14],17,-1502002290),s=Je(s,c=Ye(c,u,p,s,e[n+15],22,1236535329),u,p,e[n+1],5,-165796510),p=Je(p,s,c,u,e[n+6],9,-1069501632),u=Je(u,p,s,c,e[n+11],14,643717713),c=Je(c,u,p,s,e[n],20,-373897302),s=Je(s,c,u,p,e[n+5],5,-701558691),p=Je(p,s,c,u,e[n+10],9,38016083),u=Je(u,p,s,c,e[n+15],14,-660478335),c=Je(c,u,p,s,e[n+4],20,-405537848),s=Je(s,c,u,p,e[n+9],5,568446438),p=Je(p,s,c,u,e[n+14],9,-1019803690),u=Je(u,p,s,c,e[n+3],14,-187363961),c=Je(c,u,p,s,e[n+8],20,1163531501),s=Je(s,c,u,p,e[n+13],5,-1444681467),p=Je(p,s,c,u,e[n+2],9,-51403784),u=Je(u,p,s,c,e[n+7],14,1735328473),s=Xe(s,c=Je(c,u,p,s,e[n+12],20,-1926607734),u,p,e[n+5],4,-378558),p=Xe(p,s,c,u,e[n+8],11,-2022574463),u=Xe(u,p,s,c,e[n+11],16,1839030562),c=Xe(c,u,p,s,e[n+14],23,-35309556),s=Xe(s,c,u,p,e[n+1],4,-1530992060),p=Xe(p,s,c,u,e[n+4],11,1272893353),u=Xe(u,p,s,c,e[n+7],16,-155497632),c=Xe(c,u,p,s,e[n+10],23,-1094730640),s=Xe(s,c,u,p,e[n+13],4,681279174),p=Xe(p,s,c,u,e[n],11,-358537222),u=Xe(u,p,s,c,e[n+3],16,-722521979),c=Xe(c,u,p,s,e[n+6],23,76029189),s=Xe(s,c,u,p,e[n+9],4,-640364487),p=Xe(p,s,c,u,e[n+12],11,-421815835),u=Xe(u,p,s,c,e[n+15],16,530742520),s=Ze(s,c=Xe(c,u,p,s,e[n+2],23,-995338651),u,p,e[n],6,-198630844),p=Ze(p,s,c,u,e[n+7],10,1126891415),u=Ze(u,p,s,c,e[n+14],15,-1416354905),c=Ze(c,u,p,s,e[n+5],21,-57434055),s=Ze(s,c,u,p,e[n+12],6,1700485571),p=Ze(p,s,c,u,e[n+3],10,-1894986606),u=Ze(u,p,s,c,e[n+10],15,-1051523),c=Ze(c,u,p,s,e[n+1],21,-2054922799),s=Ze(s,c,u,p,e[n+8],6,1873313359),p=Ze(p,s,c,u,e[n+15],10,-30611744),u=Ze(u,p,s,c,e[n+6],15,-1560198380),c=Ze(c,u,p,s,e[n+13],21,1309151649),s=Ze(s,c,u,p,e[n+4],6,-145523070),p=Ze(p,s,c,u,e[n+11],10,-1120210379),u=Ze(u,p,s,c,e[n+2],15,718787259),c=Ze(c,u,p,s,e[n+9],21,-343485551),s=Qe(s,r),c=Qe(c,o),u=Qe(u,a),p=Qe(p,i);return[s,c,u,p]}function tt(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function nt(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rt(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function ot(e){return unescape(encodeURIComponent(e))}function at(e){return function(e){return tt(et(nt(e),8*e.length))}(ot(e))}function it(e,t){return function(e,t){var n,r,o=nt(e),a=[],i=[];for(a[15]=i[15]=void 0,o.length>16&&(o=et(o,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^o[n],i[n]=1549556828^o[n];return r=et(a.concat(nt(t)),512+8*t.length),tt(et(i.concat(r),640))}(ot(e),ot(t))}function st(e,t,n){return t?n?it(t,e):rt(it(t,e)):n?at(e):rt(at(e))}var ct,ut,pt=n(33),lt=n.n(pt);!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT"}(ct||(ct={})),function(e){e.TEXT="text",e.ARRAY_BUFFER="arraybuffer",e.JSON="json",e.BLOB="blob"}(ut||(ut={}));var dt,ht,_t;!function(e){e[e.STOP=0]="STOP",e[e.DESTROY=1]="DESTROY"}(dt||(dt={})),function(e){e[e.MESSAGE_CACHE=0]="MESSAGE_CACHE"}(ht||(ht={})),function(e){e[e.DO_INIT=0]="DO_INIT",e[e.INIT_RESULT=1]="INIT_RESULT",e[e.CONTAINER_MSG=3]="CONTAINER_MSG",e[e.CONTAINER_MSGS=4]="CONTAINER_MSGS",e[e.CTX_INIT=5]="CTX_INIT",e[e.CTX_INIT_RESULT=6]="CTX_INIT_RESULT",e[e.CONTAINER_TERMINATE=7]="CONTAINER_TERMINATE",e[e.CONTAINER_RESUME=8]="CONTAINER_RESUME"}(_t||(_t={}));class ft{constructor({priority:e,sampleRate:t,filters:n}){this.priority=0,this.filters=[],this.priority=e,this.sampleRate=t,this.filters=n}match(e){return this.filters.every(t=>t.match(e))}}class gt{constructor({key:e,values:t}){this.key="",this.values=[],this.key=e,this.values=t}match(e){const t=""+e[this.key];return this.values.includes(t)}}class Et{constructor(e){if(this._domainToNameRegistry=new Map,this._domainToParamInjectorRegistry=new Map,this._domainToNameCache=new Map,e instanceof Et)return e;const{defaultName:t=xe.c.defaultReportName,log:n,report:r=xe.m,commonMetrics:o={},commonCategories:a={},commonTags:i=[],defaultPlatform:s=xe.a,domainToNameMap:c,domainToParamInjectorMap:u}=e||{};this.defaultName=String(t),this.defaultPlatform=s,this._log=n,this._report=r,this.commonMetrics=o,this.commonCategories=a,this.commonTags=new Set(i),c&&Object.entries(c).forEach(([e,t])=>{this.registerEvent(t,e)}),u&&Object.entries(u).forEach(([e,t])=>{this.registerParamInjector(e,t)})}setRemoteConfig(e){this._remoteConfig=e}getRemoteConfig(){return this._remoteConfig?this._remoteConfig:this.constructor.globalRemoteConfig}log(e){xe.k.function(this._log)&&this._log(e)}report(e){const t=this.getRemoteConfig(),{name:n,metrics:r,categories:o}=e,a=Object.assign(Object.assign({[xe.c.eventName]:n},r),o);t.getSampleRate(a)<1||this._report(e)}registerEvent(e,t){if(this._domainToNameRegistry.get(t)!==e){this._domainToNameRegistry.set(t,e);for(const e of this._domainToNameCache.keys())e.startsWith(t)&&this._domainToNameCache.delete(e)}}getNameByDomain(e){return this._findName(e)||this.defaultName}registerParamInjector(e,t){this._domainToParamInjectorRegistry.set(e,t)}applyParamInjectorByDomain(e,t){for(let n=e.split("."),r=n.length,o=1;o<=r;o++){const e=n.slice(0,o).join("."),r=this._domainToParamInjectorRegistry.get(e);xe.k.function(r)&&r(t)}}_findName(e){if(this._domainToNameCache.has(e))return this._domainToNameCache.get(e);let t;for(let n=e.split("."),r=n.length,o=0;o<r;o++){const e=n.slice(0,r-o).join(".");if(t=this._domainToNameRegistry.get(e),t)return this._domainToNameCache.set(e,t),t}return this.defaultName}}Et.globalRemoteConfig=new class{constructor(){this._defaultSampleRate=1,this._traceSampleRate=0,this._normalSampleRate=1,this._warnSampleRate=1,this._errorSampleRate=1,this._fatalSampleRate=1,this._orderedRules=[]}buildConfig(e={}){const{[xe.b.sampleRate]:t,[xe.b.traceSampleRate]:n,[xe.b.normalSampleRate]:r,[xe.b.warnSampleRate]:o,[xe.b.errorSampleRate]:a,[xe.b.fatalSampleRate]:i,[xe.b.rules]:s}=e;xe.k.number(t)&&(this._defaultSampleRate=t),xe.k.number(n)&&(this._traceSampleRate=n),xe.k.number(r)&&(this._normalSampleRate=r),xe.k.number(o)&&(this._warnSampleRate=o),xe.k.number(a)&&(this._errorSampleRate=a),xe.k.number(i)&&(this._fatalSampleRate=i);const c=this._parseRules(s);this._orderedRules=c.sort((e,t)=>t.priority-e.priority)}getSampleRate(e){const t=this._getMatchedRuleInOrderedRules(e);let n=this._defaultSampleRate;switch(e[xe.d.monitorLevel]){case xe.e.trace:n=this._traceSampleRate;break;case xe.e.normal:n=this._normalSampleRate;break;case xe.e.warn:n=this._warnSampleRate;break;case xe.e.error:n=this._errorSampleRate;break;case xe.e.fatal:n=this._fatalSampleRate}return t&&!xe.k.undefined(t.sampleRate)&&(n=t.sampleRate),n>=1?1:0}_getMatchedRuleInOrderedRules(e){return this._orderedRules.find(t=>t.match(e))}_parseRules(e){return Array.isArray(e)?e=e.map(e=>{if(!xe.k.object(e))return;let{[xe.b.priority]:t,[xe.b.sampleRate]:n,[xe.b.filters]:r}=e;return xe.k.number(t)||(t=0),xe.k.number(n)||(n=void 0),r=Array.isArray(r)?r.map(e=>{if(!xe.k.object(e))return;const{[xe.b.key]:t,[xe.b.values]:n}=e;return xe.k.string(t)&&Array.isArray(n)?e=new gt({key:t,values:n}):void 0}).filter(e=>e):[],new ft({priority:t,sampleRate:n,filters:r})}).filter(e=>e):[]}};class mt{constructor(e){if(this.cacheList=[],this.waitingForReport=!1,e instanceof mt)return e;this._setConfig(e)}static setup(e){this.default._setConfig(e)}getConfig(){return this.config}log(e){if(!xe.k.function(this.config.log))return;let t=xe.f.info;switch(e.getLevel()){case xe.e.trace:case xe.e.normal:t=xe.f.info;break;case xe.e.warn:t=xe.f.warn;break;case xe.e.error:t=xe.f.error;break;case xe.e.fatal:t=xe.f.fatal;break;default:t=xe.f.info}const n=xe.c.defaultLogTag,r=e.getValue(xe.d.monitorFile),o=e.getValue(xe.d.monitorFunction),a=e.getValue(xe.d.monitorLine),i=e.getData(),s=`monitor_event : ${e.getName()} ${JSON.stringify(i)}`;this.invokeLog(Object(xe.n)({level:t,tag:n,file:r,functionName:o,line:a,content:s},xe.l))}reportTo(e){const t=e.getValue(xe.d.monitorDomain);t&&this.config.applyParamInjectorByDomain(String(t),e);const n=this._getName(e),r=e.getMetrics(),o=e.getCategories(),a=e.getInternalData(),i=this._getPlatform(e);xe.k.function(this.config.report)&&this.invokeReport(Object(xe.n)({name:n,metrics:r,categories:o,internalData:a,platform:i},xe.l))}flush(e){const{logEnabled:t=!0,reportEnabled:n=!0}=e.getInternalData(),r=e.getValue(xe.d.monitorDomain);r&&this.config.applyParamInjectorByDomain(String(r),e);const o=this._getName(e),a=e.getMetrics(),i=e.getCategories(),s=e.getInternalData(),c=this._getPlatform(e);n&&xe.k.function(this.config.report)&&this.invokeReport(Object(xe.n)({name:o,metrics:a,categories:i,internalData:s,platform:c},xe.l)),t&&this.log(e)}flushWithThrottle(e){const t=this.getConfig();if(!xe.k.function(this.config.report))return;const n=e.getValue(xe.d.monitorDomain);n&&this.config.applyParamInjectorByDomain(String(n),e);const r=this._getPlatform(e),o=this._getName(e);let a;const i=()=>{this.cacheList.forEach(e=>t.report(Object.assign(Object.assign({},e),{platform:r}))),this.cacheList.length=0,this.waitingForReport=!1,Object(xe.j)().clearTimeout(a)};this.cacheList.push({name:o,metrics:e.getMetrics(),categories:e.getCategories(),internalData:e.getInternalData()});const s=e.getValue(xe.d.monitorLevel);this.cacheList.length>=20||s&&s>=xe.e.error?i():this.waitingForReport||(this.waitingForReport=!0,a=Object(xe.j)().setTimeout(()=>{i()},2e3))}invokeLog(e){xe.k.function(this.config.log)&&this.config.log(e)}invokeReport(e){xe.k.function(this.config.report)&&this.config.report(e)}_setConfig(e){this.config=new Et(e)}_getName(e){const t=e.getValue(xe.d.monitorDomain);return e.getName()||t&&this.config.getNameByDomain(String(t))||this.config.defaultName}_getPlatform(e){return e.platform||this.config.defaultPlatform}}mt.default=new mt;class yt{constructor(e){if(e instanceof yt)return e;const{domain:t,code:n,level:r,message:o}=e||{};Object(xe.i)(this,"version",xe.h),Object(xe.i)(this,"domain",String(t)),Object(xe.i)(this,"code",Number(n)),Object(xe.i)(this,"ID",String(this.generateID())),Object(xe.i)(this,"level",r),Object(xe.i)(this,"message",String(o))}equals(e){return e instanceof yt&&e.ID===this.ID}toJSON(){return{domain:this.domain,code:this.code,level:this.level,message:this.message}}generateID(){return`${this.version}-${this.domain}-${this.code}`}}class At{constructor(e){this.metrics={},this.categories={},this.internalData={},this.tags=new Set,this._time=0,this._startTime=0,this._endTime=0,this._flushed=!1;const{service:t,name:n=xe.c.defaultReportName,code:r,platform:o,metrics:a,categories:i,internalData:s}=e||{};this.service=t?new mt(t):mt.default,this.name=n,this._platform=o,r&&(this.code=new yt(r)),this.categories=Object.assign(Object.assign({},this.service.getConfig().commonCategories),i),this.metrics=Object.assign(Object.assign({},this.service.getConfig().commonMetrics),a),this.tags=new Set(this.service.getConfig().commonTags),this.internalData=Object.assign({},s)}get time(){return this._time}get platform(){return this._platform}addMetricValue(e,t){return xe.k.undefined(t)||(this.metrics[e]=t),this}addCategoryValue(e,t){return xe.k.undefined(t)||(this.categories[e]=t),this}addTag(e){return xe.k.undefined(e)||this.tags.add(e),this}addMap(e={}){return Object.entries(e).forEach(([e,t])=>{xe.k.undefined(t)||(xe.k.number(t)?this.metrics[e]=t:this.categories[e]=t)}),this}tracing(e){return xe.k.undefined(e)||this.addCategoryValue(xe.d.traceId,e),this}flush(e){if(this._flushed)return;this._flushed=!0;const{logEnabled:t=!0,reportEnabled:n=!0}=this.getInternalData(),r=this.code||(this.hasErrorInfo()?this.codeIfError:void 0);xe.k.undefined(this.level)&&r&&r.level&&this.setLevel(r.level),r&&(this.addCategoryValue(xe.d.monitorDomain,r.domain),this.addMetricValue(xe.d.monitorCode,r.code),this.addCategoryValue(xe.d.monitorMessage,r.message)),this.tags&&this.addCategoryValue(xe.d.monitorTags,this.tagsInline()),this.time<=0&&this.setTime(Date.now()),n&&(e||this.service).reportTo(this),t&&this.service.log(this)}flushWithThrottle(){this._flushed||(this._flushed=!0,this.service.flushWithThrottle(this))}setMonitorCode(e){return xe.k.undefined(e)||(this.code=new yt(e)),this}setMonitorCodeIfError(e){return xe.k.undefined(e)||(this.codeIfError=new yt(e)),this}setLevel(e){return xe.k.undefined(e)||(this.level=e,this.addMetricValue(xe.d.monitorLevel,e)),this}setErrorCode(e){return xe.k.undefined(e)||this.addCategoryValue(xe.d.errorCode,String(e)),this}setErrorMessage(e){return xe.k.undefined(e)||this.addCategoryValue(xe.d.errorMsg,String(e)),this}setError(e){if(xe.k.undefined(e))return this;const{message:t,fileName:n,lineNumber:r,columnNumber:o,stack:a,code:i,monitorCode:s}=e;return xe.k.string(t)&&this.addCategoryValue(xe.d.errorMsg,t),xe.k.string(n)&&this.addCategoryValue(xe.d.monitorFile,n),xe.k.string(a)&&this.addCategoryValue(xe.d.monitorStack,a),xe.k.number(i)&&this.addMetricValue(xe.d.errorCode,i),xe.k.number(r)&&this.addMetricValue(xe.d.monitorLine,r),xe.k.number(o)&&this.addMetricValue(xe.d.monitorColumn,o),s&&this.setMonitorCode(s),this}setTime(e){return xe.k.undefined(e)||(this._time=e,this.addMetricValue(xe.d.time,e)),this}setPlatform(e){return e&&(this._platform=e),this}timing(e){const t=Date.now();return this._startTime>0?(this._endTime=t,this.addMetricValue(e||xe.d.duration,this._endTime-this._startTime)):this._startTime=t,this}setDuration(e){return xe.k.undefined(e)||this.addMetricValue(xe.d.duration,e),this}getCode(){return this.code}getName(){return this.name}getMetrics(){return Object.assign({},this.metrics)}getCategories(){return Object.assign({},this.categories)}getInternalData(){return this.internalData}getData(){return Object.assign(Object.assign({},this.metrics),this.categories)}getValue(e){return this.metrics[e]||this.categories[e]}setResultType(e){return this.addCategoryValue(xe.d.resultType,e),this}setResultTypeSuccess(){return this.setResultType(xe.g.success),this}setResultTypeFail(){return this.setResultType(xe.g.fail),this}setResultTypeCancel(){return this.setResultType(xe.g.cancel),this}setResultTypeTimeout(){return this.setResultType(xe.g.timeout),this}getLevel(){return this.level}getMonitorId(){return this.code&&this.code.ID}getMonitorDomain(){return this.code&&this.code.domain}toJSON(){return{name:this.name,categories:this.getCategories(),metrics:this.getMetrics()}}addInternalData(e){return Object.assign(this.internalData,e),this}hasErrorInfo(){return!xe.k.undefined(this.getValue(xe.d.errorCode))||!xe.k.undefined(this.getValue(xe.d.errorMsg))}tagsInline(){return 0===this.tags.size?"":Array.from(this.tags).reduce((e,t)=>`${e}${t?xe.c.tagSeperator+t:""}`)}}const Tt={createMonitorBuilder(e){const{MonitorClass:t}=e,n=e;return function(e){const r=Object.assign({service:n},e);let o;return o=t?new t(r):new At(r),o}}};var St,vt,Rt,Ot,Ct,It,Pt,wt,bt;!function(e){e.OP_ENGINE_INIT_START="op_engine_init_start",e.OP_ENGINE_INIT_RESUlT="op_engine_init_result",e.OP_APP_LAUNCH_START="op_app_launch_start",e.OP_APP_LAUNCH_RESULT="op_app_launch_result",e.OP_APP_LANNCH_TIMEOUT="op_app_lanuch_timeout",e.OP_LOAD_JSSDK_START="op_load_jssdk_start",e.OP_LOAD_JSSDK_RESULT="op_load_jssdk_result",e.OP_LOAD_META_START="op_load_meta_start",e.OP_LOAD_META_RESULT="op_load_meta_result",e.OP_META_REQUEST_START="op_meta_request_start",e.OP_META_REQUEST_RESULT="op_meta_request_result",e.OP_LOAD_PACKAGE_START="op_load_package_start",e.OP_LOAD_PACKAGE_RESULT="op_load_package_result",e.OP_PACKAGE_DOWNLOAD_START="op_package_download_start",e.OP_PACKAGE_DOWNLOAD_RESULT="op_package_download_result",e.OP_ACTIVATE_SUCCESS="op_activate_success",e.OP_ACTIVATE_FAIL="op_activate_fail",e.OP_INACTIVATE_FAIL="op_inactivate_fail",e.OP_INACTIVATE_TIMEOUT="op_inactivate_timeout",e.OP_GET_WORKER_CODE="op_get_worker_code",e.OP_GET_JSSDK_CODE="op_get_jssdk_code",e.OP_ON_CREATE_APP_START="op_on_create_app_start",e.OP_ON_CREATE_APP_Result="op_on_create_app_result",e.OP_INIT_CONTAINER_START="op_init_container_start",e.OP_INIT_CONTAINER_RESULT="op_init_container_result",e.OP_INIT_APP_START="op_init_app_start",e.OP_INIT_APP_RESULT="op_init_app_result",e.OP_WORKER_CONTAINER_START="op_worker_container_start",e.OP_WORKER_CONTAINER_RESULT="op_worker_container_result",e.OP_WORKER_LOAD_APP_START="op_worker_load_app_start",e.OP_WORKER_LOAD_APP_RESULT="op_worker_load_app_result",e.OP_RENDER_CONTAINER_START="op_render_container_start",e.OP_RENDER_CONTAINER_RESULT="op_render_container_result",e.OP_RENDER_LOAD_APP_START="op_render_load_app_start",e.OP_RENDER_LOAD_APP_RESULT="op_render_load_app_result",e.OP_RENDER_LOAD_PAGE_START="op_render_load_page_start",e.OP_RENDER_LOAD_PAGE_RESULT="op_render_load_page_result",e.OP_SUBPKG_SERVICE_LOAD_START="op_subpkg_service_load_start",e.OP_SUBPKG_SERVICE_LOAD_RESULT="op_subpkg_service_load_result",e.OP_RENDER_PAGE_START="op_render_page_start",e.OP_RENDER_PAGE_SUCCESS="op_render_page_success",e.OP_APP_FIRST_RENDER_SUCCESS="op_app_first_render_success",e.OP_APP_CHECK_START="op_app_check_start",e.OP_APP_CHECK_RESULT="op_app_check_result",e.OP_PLATFORM_SUPPORT_WASM="op_platform_support_wasm",e.MP_APP_PRELOAD_START="mp_app_preload_start",e.MP_APP_PRELOAD_RESULT="mp_app_preload_result",e.MP_APP_LAUNCH_START="mp_app_launch_start",e.MP_APP_LAUNCH_RESULT="mp_app_launch_result",e.MP_APP_CONTAINER_START="mp_app_container_start",e.MP_APP_CONTAINER_LOADED="mp_app_container_loaded",e.MP_APP_LOAD_START="mp_app_load_start",e.MP_LOAD_TIMELINE="mp_load_timeline",e.MP_LOAD_META_START="mp_load_meta_start",e.MP_LOAD_META_RESULT="mp_load_meta_result",e.MP_LOAD_PACKAGE_START="mp_load_package_start",e.MP_LOAD_PACKAGE_RESULT="mp_load_package_result",e.MP_META_REQUEST_START="mp_meta_request_start",e.MP_META_REQUEST_RESULT="mp_meta_request_result",e.MP_DOWNLOAD_START="mp_download_start",e.MP_DOWNLOAD_RESULT="mp_download_result",e.MP_JSCORE_LOAD_START="mp_jscore_load_start",e.MP_JSCORE_LOAD_RESULT="mp_jscore_load_result",e.MP_JSCORE_LIB_LOAD_START="mp_jscore_lib_load_start",e.MP_JSCORE_LIB_LOAD_RESULT="mp_jscore_lib_load_result",e.MP_JSCORE_APP_LOAD_START="mp_jscore_app_load_start",e.MP_JSCORE_APP_LOAD_RESULT="mp_jscore_app_load_result",e.MP_JSCORE_APP_LOAD_DOM_READY="mp_jscore_load_dom_ready",e.MP_WEBVIEW_LOAD_START="mp_webview_load_start",e.MP_WEBVIEW_LOAD_RESULT="mp_webview_load_result",e.MP_WEBVIEW_APP_LOAD_START="mp_webview_app_load_start",e.MP_WEBVIEW_APP_LOAD_RESULT="mp_webview_app_load_result",e.MP_WEBVIEW_LIB_LOAD_START="mp_webview_lib_load_start",e.MP_WEBVIEW_LIB_LOAD_RESULT="mp_webview_lib_load_result",e.MP_WEBVIEW_PAGE_LOAD_START="mp_webview_page_load_start",e.MP_WEBVIEW_PAGE_LOAD_RESULT="mp_webview_page_load_result",e.MP_WEBVIEW_LOAD_DOM_READY="mp_webview_load_dom_ready",e.MP_LIFECYCLE_PAGE_ON_READY="mp_lifecycle_page_onready",e.MP_LOAD_DOM_READY="mp_load_domready",e.MP_APP_LAUNCH_ASYNC_EVENT="mp_app_launch_async_event",e.MP_LOAD_SUB_PACKAGE_START="mp_load_sub_package_start",e.MP_LOAD_SUB_PACKAGE_RESULT="mp_load_sub_package_result",e.MP_REQUEST_START="mp_request_start",e.MP_REQUEST_RESULT="mp_request_result",e.MP_REQUEST_DOWNLOAD_START="mp_request_download_start",e.MP_REQUEST_DOWNLOAD_RESULT="mp_request_download_result",e.MP_REQUEST_UPLOAD_START="mp_request_upload_start",e.MP_REQUEST_UPLOAD_RESULT="mp_request_upload_result",e.OP_COMMON_META_REQUEST_RESULT="op_common_meta_request_result",e.OP_COMMON_PACKAGE_DOWNLOAD_RESULT="op_common_package_download_result",e.OP_COMM_PACKAGE_INSTALL_RESULT="op_common_package_install_result",e.MP_JS_RUNTIME_ERROR="mp_js_runtime_error",e.MP_LIB_DOWNLOAD_RESULT="mp_lib_download_result",e.MP_WEBVIEW_LOAD_EXCEPTION="mp_webview_load_exception",e.MP_LIFECYCLE_PAGE_START="mp_lifecycle_page_start",e.MP_ORGANIZATION_API_INVIKE="mp_organization_api_invoke",e.MP_REPORT_ANALYTICS="mp_report_analytics",e.MP_APPCENTER2WINDOW_CLICK="mp_AppCenter2Window_click",e.MP_WEBSOCKET_ONMESSAGE="mp_websocket_onmessage",e.OP_APP_STRATEGY_INFO_CHECK="op_app_strategy_info_check",e.OP_APP_BADE_PULL_NODE="op_app_badge_pull_node",e.OP_APP_BADGE_UPGRADE_NOTICE_NODE="op_app_badge_update_notice_node",e.OP_APP_AUTH_SETTING="op_app_auth_setting",e.OP_APP_BADGE_REPORT_NODE="op_app_badge_report_node",e.OP_LAUNCH_FAILPAGE_CLICK="op_launch_failpage_click",e.API_INVOKE_AUTHORIZE="api_invoke_authorize",e.AUTHORIZE_MODAL_SHOW="authorize_modal_show",e.API_AUTHORIZE_CALLBACK="api_authorize_callback",e.API_INVOKE_UPDATEBADGE="api_invoke_updateBadge",e.APP_SETTING_SET_BADGE="app_setting_set_Badge",e.API_AUTHREQUEST_REQUEST="api_authrequest_request",e.API_AUTHREQUEST_SENDREQUEST="api_authrequest_sendrequest",e.OP_API_INVOKE="op_api_invoke",e.OP_ANALYSIS_ONUPDATEREADY="op_analysis_onUpdateReady"}(St||(St={})),function(e){e.APP_KEY="_app_key"}(vt||(vt={})),function(e){e.ERROR_CODE="error_code",e.ERROR_MSG="error_msg",e.SERVER_ERROR_CODE="server_error_code",e.SERVER_ERROR_MSG="server_error_msg",e.ENV_TYPE="env_type",e.HOST="block_host",e.NET_STATUS="net_status",e.RESULT_TYPE="result_type",e.TENANT_ID="tenant_id",e.USER_ID="user_id",e.APP_ID="app_id",e.ENGINE_TYPE="engine_type",e.APP_TYPE="app_type",e.SUB_TYPE="sub_type",e.IDENTIFIER="identifier",e.INSTANCE_ID="block_id",e.MODE="mode",e.FROM="from",e.SCENE="scene",e.APP_LAUNCH_TIME="app_launch_time",e.PRELOAD_TYPE="preload_type",e.JS_SDK_VERSION="js_version",e.APP_VERSION="app_version",e.APP_NAME="app_name",e.LAUNCH_TYPE="launch_type",e.TASK_TYPE="task_type",e.REQUEST_TYPE="request_type",e.META_CACHE="meta_cache",e.PACKAGE_CACHE="package_cache",e.PAGE_PATH="page_path",e.IS_FIRST_LAUNCH_PAGE="first_launch_page",e.IS_PRELOAD_IFRAME="is_preload_iframe",e.REQUEST_VERSION="request_version",e.METHOD="method",e.PATH="path",e.DOMAIN="domain",e.HTTP_CODE="http_code",e.REQUEST_CHANNEL="channel",e.PKG_URL="pkg_url",e.PKG_MD5="pkg_md5",e.RESOURCE_TYPE="resource_type",e.PC_USE_MOBILE_PKG="pc_use_mobile_pkg",e.FILE_SIZE="file_size",e.FROM_REQUEST_START_DURATION="from_request_start_duration",e.STACK="stack",e.APP_KEY="_app_key",e.FIRST_LAUNCH="first_launch",e.DATA_VERSION="_data_version",e.API_NAME="api_name",e.SOCKET_RETURN_TYPE="socket_return_type",e.PARAMS_DOUBLE_CHECK_COST="open_app_double_check_cost",e.RUST_SDK_DURATION="rust_sdk_duration",e.RUST_DOUBLE_CHECK_COST="double_check_duration",e.RUST_ERROR_MSG="error_msg",e.RUST_APP_ID="app_id",e.REQUEST_ID="request_id",e.LOGID_ID="log_id",e.RUST_FEATURE_TYPE="feature_type",e.RUST_IS_NULL="is_null",e.RUST_DATA_FROM="data_from",e.VERSION_TYPE="version_type",e.SUB_PACKAGE_ROOT="subpackage_root",e.SUB_PACKAGE_INDEPENDENT="subpackage_independent",e.IS_PREFETCH="is_prefetch",e.GET_JSSDK_COST="get_jssdk_cost",e.LOAD_WEBVIEW_JS_COST="load_webview_js_cost",e.DOM_READY_COST="dom_ready_cost",e.GET_APP_CODE_COST="get_app_code_cost",e.EXEC_APP_CODE_COST="exec_app_code_cost",e.FROM_APP_LAUNCH_START_TO_PAGE_READY="from_app_launch_start_to_page_ready",e.CONFIG_KEY="config_key",e.CONFIG_TS="config_ts",e.CONFIG_KEY_COUNT="key_count",e.APP_LAUNCH_TIMELINE="op_app_launch_timeline",e.APP_LAUNCH_USE_CACHE="launch_use_cache",e.ENGINE_VERSION="engine_version"}(Rt||(Rt={})),function(e){e[e.TRUE=1]="TRUE",e[e.FALSE=0]="FALSE"}(Ot||(Ot={})),function(e){e.SUCCESS="success",e.FAIL="fail",e.TIMEOUT="timeout",e.CANCEL="cancel",e.APP_STATE_CANCEL="app_state_cancel"}(Ct||(Ct={})),function(e){e.ASYNC="async",e.PRELOAD="preload",e.NORMAL="normal",e.UNKNOWN="unknown"}(It||(It={})),function(e){e.ASYNC="async",e.PRELOAD="preload",e.NORMAL="normal",e.UNKNOWN="unknown"}(Pt||(Pt={})),function(e){e.TEA="Tea",e.Slardar="Slardar",e.TEASlardar="TeaSlardar"}(wt||(wt={}));class Nt extends At{constructor(...e){super(...e),p()(this,"linkTraceId",void 0)}setAppKey(e){return this.addInternalData({[vt.APP_KEY]:e}),this}getAppKey(){return this.getInternalData()[vt.APP_KEY]}setTracing(e){return this.tracing(e&&e.traceId),this}link(e){return e?(this.linkTraceId=e.traceId,this):this}flush(e){const t=this.getData()[xe.d.traceId];return t&&this.linkTraceId&&t!==this.linkTraceId&&this.service.getConfig().report({name:"mp_app_event_link",categories:{[xe.d.traceId]:t,link_trace_id:this.linkTraceId},platform:"Slardar"}),super.flush(e)}addInternalDataPublic(e){return e&&super.addInternalData(e),this}setError(e){if(super.setError(e),e){const t=Ge.fromError(e);this.addMap({[Rt.HTTP_CODE]:t.httpCode,[Rt.SERVER_ERROR_CODE]:t.serverErrorCode,[Rt.REQUEST_ID]:t.requestId})}return this}}let Mt;!function(e){e.MICROAPP_USER_AUTH_SCOPE="microapp.userauthscope",e.EXPIRE_TIME_FG="microapp.login.expiretime",e.OPENSCHEMA_WHITELIST_FOR_PC="gadget.pc.openschema.whitelist",e.OPENPLATFORM_WINDOW_NAVIGATION_STYLE_PC="openplatform.window.navigation.style.pc",e.MICROAPP_API_REPORT_ANALYTICS="microapp.api.report_analytics",e.GADGET_ABOUT_VERSION_UPDATE_TIP="gadget.about.version.update.tip",e.LARK_APP_NOTIFICATION="lark.app.notification",e.GADGET_PACKAGE_STRATEGY="gadget.package.strategy.forbidden",e.GADGET_FORCE_UPDATE_STRATEGY="gadget.force.update.always",e.GADGET_START_PAGE_STRATEGY="gadget.runtime.startpage.strategy",e.OPENPLATFORM_WINDOW_NAVAIGATION_STYLE_PC="openplatform.window.navigation.style.pc",e.MICROAPP_API_DEVICEID="microapp.api.deviceid",e.LARK_MESSENGER_USERCARD="lark.messenger.usercard",e.DIAGNOSE_ENABLE="gadget.diagnose.api.enable",e.ENABLE_PRELOAD="openplatform.gadget.preload",e.OPEN_APP_INFO="gadget.open_app.info",e.APP_STATE_CTL="gadget.app.state.control",e.APP_STATE_RELOAD="gadget.app.state.reload",e.SIDEBAR_ADD_UA="gadget.sidebar.add.ua",e.ENABLE_GADGET_FORCE_UPDATE="gadget.enable.force.update",e.OPENSCHEMA_ENABLE_EXTERNAL="gadget.pc.openschema.enable.external.new",e.SDK_UPDATE_ENABLE_GREYHASH="gadget.pc.sdk.enable.greyhash",e.RESTRICT_RENAME="gadget.pc.restrict.rename",e.SHARE_APP_API_V2="gadget.share_app.api",e.OPEN_APP_BADGE="gadget.open_app.badge",e.SHARE_APP_PATH="gadget.share_app.path",e.DOWNLOAD_FILE_FILE_PATH="gadget.pc.downloadfile.filepath",e.API_TOGGLE_CHAT="gadget.api.togglechat",e.API_GET_URL_QUERY="pc.engine.api.get.query",e.WEBVIEW_OBSERVER_ENABLE="openplatform.gadget.webview.observer",e.CREATE_NEW_PRELOAD_RENDER="create.new.preload.render",e.CONTAINER_PRELOAD="gadget.container.preload",e.OP_ENABLE_SDK_API_MONITOR="op.enable.sdk.api.monitor",e.OPEN_APPENGINE_SUBPACKAGE_ENABLED="open.appengine.subpackage.enabled",e.OP_GADGET_PREVIEW_IMAGE_NEW="op.gadget.preview.image.new",e.ECOSYSTEM_MONITOR_HEARTBEAT_ENABLE="ecosystem.monitor.heartbeat.enable",e.APP_NOTIFICATION_ENABLED="open.app.notification.enabled",e.BLOCK_SHARE_SERVER="pc.engine.block.share.server",e.OPENPLATFORM_UPLOAD_MONITOR_TEA="openplatform.upload.monitor.tea",e.GADGET_HEART_BEAT_ENABLE="gadget.pc.heart.beat.enable",e.OPENPLATFORM_SCOPE_USER_INFO="openplatform.scope.add_user_info",e.OPEN_GADGET_TABBAR_RENDER="open.gadget.tabbar_render",e.OPEN_APPENGINE_PREFETCH_ENABLE="open.appengine.prefetch.enabled",e.OPENPLATFORM_PC_OFFLINE_IFRAME="openplatform.pc.offline.iframe",e.OP_REQUEST_DISABLE_PRE_FETCH="openplatform.request.disable.prefetch",e.OPENPLATFORM_SETTING_SCOPE_RUNDATA="openplatform.setting.scope_run_data",e.OP_NETWORK_V2_IF_DELETE_UA_KEY="openplatform.v2.network.api.use_new_ua",e.OP_FORBID_CHECK_API_ERR_CODE="openplatform.forbid.check.api_err_code"}(bt||(bt={}));const Lt=function(e){if(!Mt)throw Error("you must invoke monitor.init first! monitor params: "+JSON.stringify(e));return Mt(e)};Lt.init=function(e){Mt&&console.warn("you should not invoke monitor.init repeatedly!"),Mt=Tt.createMonitorBuilder({...e,MonitorClass:Nt,defaultPlatform:"Slardar"})};const kt=(()=>{try{if(13===function(){const e=navigator.userAgent.match(/(iPhone\s*OS|iOS|iPad\s*OS)\s+(\d+)/i);return+(e?e[2]:"")}())return!1;if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1})();const Dt=new class{constructor(){p()(this,"engineHookMap",void 0),this.engineHookMap=new Map}tap(e,t,n){const r=n||"common_key";if(this.engineHookMap.has(r)){const n=this.engineHookMap.get(r);n.has(e)?n.get(e).push(t):n.set(e,[t])}else{const n=new Map;n.set(e,[t]),this.engineHookMap.set(r,n)}return()=>{const n=this.engineHookMap.get(r).get(e)||[],o=n.findIndex(e=>e===t);o>-1&&n.splice(o,1)}}async callSeries(e,t,n){const r=this.getAllTasks(e,n);if(0!==r.length){let e=t;try{for(const t of r)e=await t(e);return e}catch(e){throw e}}}callParallel(e,t,n){const r=this.getAllTasks(e,n),o=[];return r.forEach(e=>{const n=Promise.resolve(e(t));o.push(n)}),Promise.all(o)}hasHook(e,t){if(t&&this.engineHookMap.has(t)){return this.engineHookMap.get(t).has(e)}if(this.engineHookMap.has("common_key")){return this.engineHookMap.get("common_key").has(e)}return!1}getAllTasks(e,t){let n=[];if(t&&this.engineHookMap.has(t)){const r=this.engineHookMap.get(t);r.has(e)&&(n=r.get(e).concat())}if(this.engineHookMap.has("common_key")){const t=this.engineHookMap.get("common_key");t.has(e)&&(n=n.concat(t.get(e)))}return n}clearHooks(e){const t=this.engineHookMap.get(e);t&&t.clear(),this.engineHookMap.delete(e)}};var Ut;!function(e){e.ON_APP_CREATE_START="onAppCreateStart",e.ON_LOAD_SUCCESS="onLoadSuccess",e.ON_LOAD_FAIL="onLoadFail",e.ON_WORKER_DOCUMETREADY="onWorkerDocumentReady",e.ON_RENDER_DOCUMETREADY="onRenderDocumentReady",e.ON_BOTH_DOCUMENTREADY="onBothDocumentReady",e.ON_SUBMIT="onSubmit",e.ON_CANCEL_CREATOR="onCancelCreator",e.ON_ACTIVATE="onActivate",e.ON_INACTIVATE="onInactive",e.ON_APP_CONFIG="onAppConfig",e.ON_UPDATE_READY="onUpdateReady",e.ON_SDK_LOADED="onSDKLoaded",e.SERVER_GET_SDK="getSDK",e.SERVER_UPDATE_SDK="updateSDK",e.SERVER_CLEAR_SDK="clearSDK",e.SERVER_GET_PACKAGE="getPackage",e.SERVER_UPDATE_PACKAGE="updatePackage"}(Ut||(Ut={}));var Kt,xt,Ft=new class{constructor(){p()(this,"_workerMap",new Map),p()(this,"addPreload",e=>{this._workerMap.set("preload",e)}),p()(this,"clearPreload",()=>{this._workerMap.delete("preload")}),p()(this,"getPreload",()=>this._workerMap.get("preload")),p()(this,"add",(e,t)=>{this._workerMap.set(e,t)}),p()(this,"remove",e=>{this._workerMap.delete(e)}),p()(this,"get",e=>this._workerMap.get(e))}};!function(e){e.CANCEL="task_cancel"}(Kt||(Kt={}));class Ht{constructor(){p()(this,"_taskQueue",[])}_clearInvalidTasks(e){let t=e+1;for(;t<this._taskQueue.length;)this._taskQueue[t].cancel(),t++;return this._taskQueue.slice(0,e+1)}createTask(e,t){const n=this._taskQueue.findIndex(t=>t.key===e&&t.isValid());if(n>-1){this._taskQueue=this._clearInvalidTasks(n);const e=this._taskQueue[this._taskQueue.length-1];if(e.priority>=t.priority)return e.promise;e.cancel()}const r=this._taskQueue[0];r&&r.cancel();const o=this._wrapTask(e,t);return this._taskQueue.push(o),this._taskQueue[0]===o&&this._runTask(),o.promise}_wrapTask(e,t){let n,r=!1,o=!1;const a=new Promise((e,t)=>{n={resolve:e,reject:t}});return{key:e,promise:a,priority:t.priority,run:async()=>{try{r=!0;const e=await t.run();return n.resolve(e),a}catch(e){n.reject(e)}},cancel:()=>!!o||(r?o=t.cancel&&t.cancel():(n.reject(new Error(Kt.CANCEL)),o=!0),o),isValid:()=>!o}}async _runTask(){const e=this._taskQueue[0];e&&(await e.run(),this._taskQueue.shift(),this._runTask())}}!function(e){e.ACTIVATE_FAIL="activate fail",e.INACTIVATE_FAIL="inactivate fail",e.INACTIVATE_CANCEL="inactivate cancel"}(xt||(xt={}));class jt{constructor(e,t){p()(this,"_appKey",void 0),p()(this,"_id",void 0),p()(this,"_taskQueue",void 0),p()(this,"_activeState",{}),p()(this,"_inactivateLock",!1),this._appKey=e,this._id=t,this._taskQueue=new Ht}lockAutoInactivate(e){this._inactivateLock=e}async activate(){const e=Ft.get(this._appKey);if(e){const t=e.activate(this._activeState),{_appKey:n}=this;try{Dt.callParallel(Ut.ON_ACTIVATE,{type:"start"},n),await this._taskQueue.createTask(n+"_activate",t),Dt.callParallel(Ut.ON_ACTIVATE,{type:"success"},n)}catch(e){Dt.callParallel(Ut.ON_ACTIVATE,{type:"fail"},n),Lt({name:St.OP_ACTIVATE_FAIL}).setAppKey(n).setResultTypeFail().setErrorMessage(""+e).flush()}}}async inactivate(e,t){if(e&&this._inactivateLock)return;const{delay:n=0,force:r=!1}=t||{},o=Ft.get(this._appKey);if(o){const e=o.inactivate(n,r),{_appKey:t}=this,a=setTimeout(()=>{Lt({name:St.OP_INACTIVATE_TIMEOUT}).setAppKey(t).setResultTypeFail().setErrorMessage("inactivate timeout").flush()},5e3);try{Dt.callParallel(Ut.ON_INACTIVATE,{type:"start"},t),await this._taskQueue.createTask(t+"_inactivate",e),Dt.callParallel(Ut.ON_INACTIVATE,{type:"success"},t),clearTimeout(a)}catch(e){clearTimeout(a),Dt.callParallel(Ut.ON_INACTIVATE,{type:"fail"},t);const n=e&&e.message;if(n===xt.INACTIVATE_CANCEL||n===Kt.CANCEL)return;Lt({name:St.OP_INACTIVATE_FAIL}).setAppKey(t).setResultTypeFail().setErrorMessage(""+e).flush()}}}setState(e){this._activeState.state=e}}const Bt=new Map,Gt={startup(e,t){const n=new jt(e,t);return Bt.set(e,n),n},shutdown(e){Bt.delete(e)},getOperate:e=>Bt.get(e)},Vt=new Map;function Wt(e,t){Vt.has(e)||Vt.set(e,[]),Vt.get(e).push(t)}const qt=new Map;function $t(e,t,n){qt.has(e)||(qt.set(e,{}),Wt(e,()=>qt.delete(e))),qt.get(e)[t]=n}function Qt(e,t){if(qt.has(e))return qt.get(e)[t]}var zt;!function(e){e.APP_LAUNCH_PARAMS="app_launch_params",e.APP_TRACINGS="app_tracings",e.LAUNCH_TAG="launch_tag",e.RENDER_STATUS="render_status",e.EXIT_STATE="exit_state",e.APP_BASE_ATTRS="app_base_attrs",e.APP_PREFETCH="app_prefetch"}(zt||(zt={}));const{setEngineInitTime:Yt,getEngineInitTime:Jt}=(()=>{let e=0;return{setEngineInitTime:()=>{e=(new Date).valueOf()},getEngineInitTime:()=>e}})();var Xt,Zt;function en(e,t){const n=Qt(e,zt.LAUNCH_TAG)||[];n.push({tagName:t,timestamp:Date.now()}),$t(e,zt.LAUNCH_TAG,n)}function tn(e){const t=Jt();if(!e)return nn();const n=Qt(e,zt.LAUNCH_TAG);if(n){const e=n.map(e=>({tagName:e.tagName,relativeValue:e.timestamp-n[0].timestamp,relativeValueFromEngineInit:e.timestamp-t,abosoluteValue:e.timestamp}));return e}}function nn(){return Array.from(qt.keys()).map(e=>tn(e))}function rn(e){const t=Qt(e,zt.LAUNCH_TAG),n={};return t&&t.forEach(e=>{n[e.tagName]=e.timestamp-t[0].timestamp}),JSON.stringify(n)}!function(e){e.APP_LAUNCH_START="appLaunchStart",e.APP_DESTROY="appDestroy",e.ON_APP_CREATE_START="onAppCreateStart",e.ON_APP_CREATE_END="onAppCreateEnd",e.INIT_CONTAINER_START="initContainerStart",e.GET_SDK_CODE_START="getSdkCodeStart",e.GET_SDK_CODE_END="getSdkCodeEnd",e.EXEC_SDK_CODE_START="execSdkCodeStart",e.CREATE_WORKER_CONTAINER_END="createWorkerContainerEnd",e.CREATE_RENDER_CONTAINER_END="createRenderContainerEnd",e.INIT_CONTAINER_END="initContainerEnd",e.INIT_APP_START="initAppStart",e.GET_APP_CODE_START="getAppCodeStart",e.GET_APP_CODE_END="getAppCodeEnd",e.GET_APP_LAUNCH_DATA_START="getAppLaunchDataStart",e.GET_APP_LAUNCH_DATA_END="getAppLaunchDataEnd",e.EXEC_APP_CODE_START="execAppCodeStart",e.EXEC_APP_SERVICE_JS_END="execAppServiceJsEnd",e.EXEC_PAGE_FRAME_JS_END="execPageFrameJsEnd",e.INIT_APP_END="initAppEnd",e.APP_CHECK_START="appCheckStart",e.APP_CHECK_END="appCheckEnd",e.ON_RENDER_SUCCESS="onRenderSuccess",e.START_ROUTE="startRoute",e.CREATE_FIRST_PAGE_START="createFirstPageStart",e.SEND_ROUTE_EVENT="sendRouteEvent",e.EXEC_FIRST_PAGHE_FRAME_JS_END="execFirstPageFrameJsEnd",e.EXEC_FIRST_PAGE_PATH_FRAME_JS_END="execFirstPagePathFrameJsEnd"}(Xt||(Xt={})),function(e){e.debug="debug",e.info="info",e.error="error",e.warn="warn"}(Zt||(Zt={}));let on={};function an(){return on}const sn=new class{debug(e,t){t=Object.assign({},t,{host:an().host,time:Date.now()}),qe.invoke("log",{type:Zt.debug,tags:t,message:e})}error(e,t){t=Object.assign({},t,{host:an().host,time:Date.now()}),qe.invoke("log",{type:Zt.error,tags:t,message:e})}info(e,t,...n){t=Object.assign({},t,{host:an().host,time:Date.now()}),qe.invoke("log",{type:Zt.info,tags:t,message:e})}warn(e,t,...n){t=Object.assign({},t,{host:an().host,time:Date.now()}),qe.invoke("log",{type:Zt.warn,tags:t,message:e})}};class cn{constructor(e=10,t){p()(this,"_limit",void 0),p()(this,"_taskMap",new Map),p()(this,"_taskQueue",[]),p()(this,"_concurrencyNum",0),p()(this,"_compareFunction",void 0),this._limit=e,this._compareFunction=t}createTask(e,t){let n;if(!this._taskMap.has(e)){let r,o;n={promise:new Promise((e,t)=>{r=e,o=t}),run:async()=>{try{r(await t.run())}catch(e){o(e)}this._taskMap.delete(e)},cancel:()=>{t.cancel&&t.cancel(),this._taskMap.delete(e),o(Error("cancel"))}},this._taskQueue.push(n),this._taskMap.set(e,n),this._runTask()}return this._taskMap.get(e).promise}cancel(e){if(void 0===e)this._taskQueue=[],this._taskMap.forEach(e=>{e.cancel()});else{const t=this._taskMap.get(e);if(t){t.cancel();const e=this._taskQueue.findIndex(e=>e===t);e>-1&&this._taskQueue.splice(e,1)}}}async _runTask(){if(this._limit&&this._concurrencyNum>=this._limit)return;const e=this._compareFunction;e&&(this._taskQueue=this._taskQueue.sort((t,n)=>-e(t,n)));const t=this._taskQueue.shift();t&&(this._concurrencyNum++,await t.run(),this._concurrencyNum--,this._runTask())}}var un,pn,ln;!function(e){e.CURRENT="current",e.PREVIEW="preview",e.TEST="test"}(un||(un={})),function(e){e.LOCAL="Local",e.NET="Net"}(pn||(pn={})),function(e){e.ZH_CN="zh_CN"}(ln||(ln={}));const dn=new Map,hn=new Map,_n=new cn(0);function fn(e){const{id:t,subType:n,debugUrl:r,engineType:o}=e;return`${t}_${o}_${n}_${r||""}`}async function gn(e){const{id:t,appKey:n,engineType:r,forceUpdate:o}=e;if(r===f.H5)return;const a=fn(e);n&&hn.set(n,a);const i=dn.get(a);if(i&&(!o||!i.dirty)){sn.info(`[${t}] get cached app code`);const e=dn.get(a);return n&&e.refs.add(n),e.code}i&&dn.delete(a);const s=await async function(e){const{id:t,engineType:n,debugUrl:r,subType:o,leastVersion:a,forceUpdate:i}=e;return _n.createTask(`${t}_${n}_${o}_${r||""}`,{run:async()=>{const e=Date.now();sn.info(`[${t}] get app code start: ${e}`);const s=await qe.invoke("getPackage",{uniqueId:t,debugUrl:r,engineType:n,versionType:r?un.PREVIEW:un.CURRENT,subType:o,leastVersion:a,forceUpdate:i},{timeout:6e4});if(!s)throw new Error(`[${t}] appCode is undefined`);return sn.info(`[${t}] get app code end, cost ${Date.now()-e}`),s}})}(e),c=new Set;return n&&c.add(n),dn.set(a,{code:s,refs:c}),s}function En(e){const t=hn.get(e),n=t?dn.get(t):null;if(n)return n.code.appConfig}function mn(e){const t=fn(e),n=dn.get(t);n&&!n.dirty&&(n.dirty=!0)}var yn;!function(e){e.UNKNOWN="UNKNOWN",e.QJS="QJS",e.WebWorker="WebWorker",e.QjsInWorker="QjsInWorker"}(yn||(yn={}));const An=[],{forceUseWebworkerContainer:Tn,workerContainerModeForced:Sn,getWorkerContainerForcedMode:vn}=(()=>{let e=yn.UNKNOWN;return{forceUseWebworkerContainer:()=>{e!==yn.WebWorker&&(e=yn.WebWorker,An.forEach(e=>e()))},workerContainerModeForced:()=>e!==yn.UNKNOWN,getWorkerContainerForcedMode:()=>e}})();const Rn={getCurrentAppLaunchInfo:async function(e){const t=function(e){const t=hn.get(e);return t?dn.get(t):null}(e.appKey),n=await qe.invoke("getCurrentSDKInfo",{engineType:e.engineType});return{pkgSourceType:t&&t.code&&t.code.packageSourceType,sdkSourceType:n&&n.originSourceType}},clearLocalPackage:function(e){return qe.invoke("clearLocalPackage",e)},clearLocalSDK:function(e){return qe.invoke("clearLocalSDK",{engineType:e})},recordTag:en,outputTimeline:tn,outputBasicSatistic:function(e){const t=nn(),n={};return e.forEach(e=>{n[e]={data:[]}}),t.forEach(t=>{t.filter(t=>e.includes(t.tagName)).forEach(e=>{const{tagName:t,relativeValueFromEngineInit:r}=e;n[t].data.push(r)})}),e.forEach(e=>{const{data:t}=n[e],r=function(e){let t=e[0],n=e[0],r=e[0];return e.forEach((e,o)=>{0!==o&&(t=t?t+e:e,n=n?n>e?e:n:e,r=r&&r>e?r:e)}),{min:n,max:r,mean:t/e.length}}(t);n[e]={...r,data:t}}),n},activate:e=>{const t=Gt.getOperate(e);if(t)return t.lockAutoInactivate(!0),t.activate()},inactivate:e=>{const t=Gt.getOperate(e);if(t)return t.lockAutoInactivate(!1),t.inactivate(!1)},getConfig:function(e,t){return qe.invoke("getConfigByKeys",{engineType:e,keys:t})},useWebWorkerContainer:()=>{Tn()}},{usingQjs:On,usingQjsGrp:Cn,usingQjsInMainThread:In,deactivateEnabled:Pn,qjsEnableInCompile:wn}=(()=>{const e=Number("2");function t(){return vn()===yn.WebWorker}return{usingQjs:function(){return vn()!==yn.WebWorker&&(!!kt&&(1===e||2===e))},usingQjsGrp:function(){return vn()!==yn.WebWorker&&(!!kt&&2===e)},usingQjsInMainThread:function(){return vn()!==yn.WebWorker&&(!(t()||!kt)&&1===e)},deactivateEnabled:t,qjsEnableInCompile:function(){return!0}}})();const bn=(()=>{let e;return function(){if(e)return e;const t=` var __op_engine_webpack_path__ = "${ee()}";\n`;return e=new Promise((e,n)=>{const r=Z("worker_group-2.21.5.js"),o=se(ne.QJS_GROUP_CODE,r,re.TEXT);if(o){e(te(`${t}${o}`))}else fetch(r).then(o=>{if(!o.ok)return n(new Error("get qjs Group worker code err!!"));o.text().then(n=>{ie(ne.QJS_GROUP_CODE,r,n);e(te(`${t}${n}`))})})}),e}})();async function Nn(e,t,n=!1){const r=await fetch(e);if(r.ok){const o=await r.text();if(ie(ne.WORKER_CODE,e,o),n){const t=await async function(e,t){try{return await q(()=>qe.invoke("singleFileCompile",{src:e,fileName:t}),2)}catch(e){return new Uint8Array}}((new TextEncoder).encode(o),"workerCode");if(ie(ne.WORKER_CODE_BYTECODE,e,z(t)),t.length>0)return t}return t?o:te(o)}throw new Error("workerCode fetch failed")}let Mn;function Ln(e=!1){if("browser"===m.LARK)return Promise.resolve("./worker.js");const t=On();return Mn||(Mn=new Promise(async(n,r)=>{const o=Z("worker-2.21.5.js");try{const r=Date.now();let a;if(a=function(e,t,n=!1){let r;return n&&(r=se(ne.WORKER_CODE_BYTECODE,e,t?re.TEXT:re.URL),r)?Q(r):(r=se(ne.WORKER_CODE,e,t?re.TEXT:re.URL),r||"")}(o,t,e&&t),a||(a=await Nn(o,t,e&&t)),!a)throw new Error("get worker code fail");Lt({name:St.OP_GET_WORKER_CODE}).addMap({duration:Date.now()-r}).flush(),n(a)}catch(e){Mn=null,r("workerCode fetch failed, "+e)}})),Mn}const kn="JSSDK_SYMBOL_KEY";var Dn,Un,Kn,xn,Fn,Hn,jn,Bn;let Gn;!function(e){e.INIT="init",e.LAUNCH="launch",e.SUCC_INIT="succInit",e.ERROR_INIT="errorInit",e.SUCC_LAUNCH="succLaunch",e.ERROR_LAUNCH="errorLaunch",e.PUBLISH="publish",e.ON="on",e.INVOKE="invoke",e.LOG="log",e.APP_STATUS_CHANGE="appStatusChange",e.CONCAT_FILES="concatFiles",e.LOAD_CONCAT_FILE="loadConcatFile",e.UPDATE_SYNC="updateSync",e.INSPECTOR="inspector",e.SET_GLOBAL="setGlobal",e.SET_TRACE="setTrace",e.SET_HOST_CONFIG_INFO="setHostConfigInfo",e.LOAD_SUB_PKG_SERVICE="loadSubPkgService",e.LOAD_SUB_PKG_SERVICE_SUCCESS="loadSubPkgServiceSuccess",e.LOAD_SUB_PKG_SERVICE_FAIL="loadSubPkgServiceFail"}(Dn||(Dn={})),function(e){e[e.String=-1]="String",e[e.ByteCode=-2]="ByteCode"}(Un||(Un={})),function(e){e.PAGE="page",e.TAB="tab"}(Kn||(Kn={})),function(e){e.homePageAndLatestPage="homePageAndLatestPage",e.homePage="homePage",e.latestPage="latestPage"}(xn||(xn={})),function(e){e[e.Ok=0]="Ok",e[e.NotTabbar=1]="NotTabbar",e[e.NumberLimit=2]="NumberLimit",e[e.CurrentShow=3]="CurrentShow",e[e.Unknown=4]="Unknown"}(Fn||(Fn={})),function(e){e[e.Ok=0]="Ok",e[e.NoTabbar=1]="NoTabbar",e[e.NumberExceed=2]="NumberExceed",e[e.NumberInvalid=3]="NumberInvalid",e[e.TabPathExist=4]="TabPathExist",e[e.DarkEmpty=5]="DarkEmpty",e[e.DarkIconEmpty=6]="DarkIconEmpty",e[e.DarkSelectEmpty=7]="DarkSelectEmpty",e[e.LightEmpty=8]="LightEmpty",e[e.LightIconEmpty=9]="LightIconEmpty",e[e.LightSelectEmpty=10]="LightSelectEmpty",e[e.Unknown=11]="Unknown"}(Hn||(Hn={})),function(e){e.DEFAULT="default",e.CUSTOM="custom"}(jn||(jn={})),function(e){e.FALSE="0",e.TRUE="1"}(Bn||(Bn={}));let Vn="";class Wn{constructor(){p()(this,"wait4Promise",void 0),p()(this,"containersMap",new Map),p()(this,"_instance",void 0),p()(this,"_workerCodePosted",!1),p()(this,"_cachedCodeMap",new Map),p()(this,"groupId",Wn.groupIdCounter++)}get instance(){return this._instance}async _create_worker(){return this.wait4Promise||(this.wait4Promise=new Promise(async e=>{const t=await Gn,n=new Worker(t,{name:"group_worker_"+this.groupId});n.addEventListener("message",e=>{this.handleWorkerMsg(e)}),this._instance=n,e()})),this.wait4Promise}get numQjsCtx(){return this.containersMap.size}async createQjsInstance(e,t){this.addContainer(e),await this._create_worker();const n={msgType:_t.CTX_INIT,_container_id:e.id};return this._workerCodePosted||(this._workerCodePosted=!0,n.workerCode=t),this.instance.postMessage(n),this}addContainer(e){this.containersMap.set(e.id,e),e.attach(this)}removeContainer(e){this.containersMap.delete(e.id),e.detach()}handleWorkerMsg(e){const{msgType:t}=e.data;if(t===_t.INIT_RESULT)throw new Error("no INIT RESULT anymore!!!");if(t!==_t.CONTAINER_MSGS){if(t===_t.CTX_INIT_RESULT)throw new Error("I should not get CTX_INIT_RESULT!!!!");throw new Error("handle_worker_msg ===> unrecognized qjsWorkerGroupMsgType ===> "+e.data.msgType)}{const{_container_id:t,msgs:n}=e.data;this.containersMap.get(t).handleMsgs(n)}}postMessage4Container(e,t){this._rebuildDuplicateCode(e,t);const n={msgType:_t.CONTAINER_MSG,_container_id:e.id,_app_id:e.appId,msg:t};if(!this.instance)throw new Error("worker container not inited while posting");this.instance.postMessage(n)}_rebuildDuplicateCode(e,t){var n;const{_cachedCodeMap:r}=this,o=t,a=t;if(o.type!==Dn.INIT){if(a.type===Dn.LAUNCH&&null!=a&&null!==(n=a.data)&&void 0!==n&&n.appCodes){var i,s,c;const{appKey:t}=a.data;if(!e.appId){const n=Qt(t,zt.APP_LAUNCH_PARAMS);if(!n){const e="qjs_get_app_info_fail_appKeyas==>"+t;throw console.error(e),new Error(e)}if(e.setAppId(`${n.subType||"unknown"}__${n.id}`),!e.appId)throw console.error("qjs_debug_no_appID!!"),new Error("qjs_debug_no_appID!!")}const{appId:n}=e,o={},u={...a.data.appCodes},p=String((null===(i=a.data)||void 0===i||null===(s=i.syncData)||void 0===s||null===(c=s.systemInfo)||void 0===c?void 0:c.packageVersion)||"unknown_version");Object.keys(u).forEach(e=>{if(!/\.js$/.test(e))return;if(["page-frame.js"].includes(e))return;if(!u[e])return;let t,a;V(e)?(a=e,t=e.replace(/\.bc_v3$/,"")):(t=e,a=function(e){return V(e)?e:e+".bc_v3"}(e));const i=`${n}__${t}__${p}`;var s;r.has(i)?o[t]=r.get(i):(null===(s=u[a])||void 0===s?void 0:s.length)>0?(r.set(i,Un.ByteCode),o[t]=u[a]):(r.set(i,Un.String),o[t]=G(u[t]));delete u[t],delete u[a]}),a.data.appCodes=o}}else{const{sdkCode:e,sdkByteCode:t}=o.data;if(delete o.data.sdkByteCode,r.has(kn)){const e=r.get(kn);o.data.sdkCode=e}else(null==t?void 0:t.length)>0?(o.data.sdkCode=t,r.set(kn,Un.ByteCode)):(Vn||(Vn=G(e)),o.data.sdkCode=Vn,r.set(kn,Un.String))}}terminateContainer(e){const{id:t}=e,n={msgType:_t.CONTAINER_TERMINATE,_container_id:t};this.instance.postMessage(n)}terminate(){this._instance.terminate(),this._instance=void 0}resumeContainer(e){const t={msgType:_t.CONTAINER_RESUME,_container_id:e.id};this.instance.postMessage(t),e.handleMsgs([{type:Dn.APP_STATUS_CHANGE,data:{type:"activate",status:"success"}}])}}p()(Wn,"workerInitCbMap",new Map),p()(Wn,"groupIdCounter",0);class qn{constructor(){p()(this,"_appId",void 0),p()(this,"containerGroup",null),p()(this,"_id",void 0),p()(this,"_terminated",!1),p()(this,"_messageHandlers",[]),this._id=qn.idCounter++}static prefetchWorkerCodeUrl(){Gn||(Gn=bn())}setAppId(e){this._appId=e}get appId(){return this._appId}get id(){return this._id}async create(e){await this.attachOneContainerGroup(e)}attach(e){this.containerGroup=e}detach(){this.containerGroup=null}async attachOneContainerGroup(e){const{containerGroups:t,qjsContainerPollSize:n}=qn;if(t.length<n){const t=new Wn;return qn.containerGroups.push(t),t.numQjsCtx>0&&(e=""),t.createQjsInstance(this,e)}let r=t[0],o=r.containersMap.size;for(let e=1;e<t.length;e++){const n=t[e];if(0===n.numQjsCtx){r=n;break}n.numQjsCtx>=o||(r=n,o=n.numQjsCtx)}return r.createQjsInstance(this,e)}stop(){return dt.STOP}handleMsgs(e){e.forEach(e=>{this._handleMsg(e)})}_handleMsg(e){this._messageHandlers.forEach(t=>{try{t({data:e})}catch(t){console.error("got err while handling msg==>",e,t)}})}resume(e){this.containerGroup.resumeContainer(this)}postMessage(e){this._terminated?console.warn("qjs_debug_trying_send_msg_after_destroy"):this.containerGroup.postMessage4Container(this,e)}onMessage(e){this._messageHandlers.push(e)}offMessage(e){const t=this._messageHandlers.findIndex(t=>t===e);t>-1&&this._messageHandlers.splice(t,1)}destroy(){this.containerGroup.terminateContainer(this),this._terminated=!0}}p()(qn,"qjsContainerPollSize",1),p()(qn,"containerGroups",[]),p()(qn,"idCounter",0);let $n=0;class Qn{constructor(){p()(this,"workerInstance",void 0)}async create(e){e&&(this.workerInstance=new Worker(e,{name:"workerContainer"+$n++}))}postMessage(e){this.workerInstance.postMessage(e)}onMessage(e){this.workerInstance.addEventListener("message",e)}offMessage(e){this.workerInstance.removeEventListener("message",e)}stop(){return this.workerInstance.terminate(),this.workerInstance=null,dt.DESTROY}resume(){}destroy(){}}const zn=`__${f.BLOCK}OnRenderMessage`,Yn=`__${f.BLOCK}ToRenderMessage`;let Jn;async function Xn(e){if("string"==typeof e){return(await fetch(e,{credentials:"omit"})).text()}return G(e)}async function Zn(e){return Jn||(Jn=new Promise(async(t,n)=>{const r="string"==typeof e?e:"";try{!function(e){const t=ae(e);localStorage.removeItem(t)}(ne.WEBVIEW_CODE);const n=await Xn(e);new Function(n)(),t()}catch(e){n(new Error(`mountWebviewJs failed: ${e}, codePath: ${r}`)),Jn=void 0}})),Jn}var er=new class{constructor(){p()(this,"_renderMap",new Map),p()(this,"_idMap",new Map),p()(this,"_preloadRenderMap",new Map),p()(this,"_tabRenderCacheMap",new Map),p()(this,"addPreload",(e,t)=>{t.renderId=0,this._preloadRenderMap.set(e,t)}),p()(this,"clearPreload",e=>{this._preloadRenderMap.delete(e)}),p()(this,"getPreload",e=>this._preloadRenderMap.get(e)),p()(this,"addRender",(e,t)=>{const n=this.getRenderList(e);t.renderId||(t.renderId=this.getRenderId(e)),n.push(t)}),p()(this,"removeRender",(e,t)=>{const n=this.getRenderList(e),r=n.findIndex(e=>e===t);r>-1&&n.splice(r,1)}),p()(this,"clear",(e,t)=>{this._renderMap.delete(e),this._tabRenderCacheMap.delete(e),t||(this._idMap.delete(e),this._preloadRenderMap.delete(e))}),p()(this,"getRenders",e=>this.getRenderList(e)),p()(this,"getRender",(e,t)=>this.getRenderList(e).find(e=>e.renderId===t)),p()(this,"getTabRender",(e,t)=>this.getTabRenderCacheList(e).find(e=>e.renderId===t)),p()(this,"getPageRenders",e=>this.getRenderList(e).filter(e=>e.type===Kn.PAGE)),p()(this,"clearRenders",e=>{this._renderMap.delete(e)}),p()(this,"getTabRenderFromRenderList",e=>this.getRenderList(e).find(e=>e.type===Kn.TAB)),p()(this,"cacheTabRender",(e,t)=>{const n=this.getTabRenderCacheList(e);n.includes(t)||n.push(t)}),p()(this,"getTabRenderFromCache",(e,t)=>this.getTabRenderCacheList(e).find(e=>e.path===t)),p()(this,"removeTabRenderFromCache",(e,t)=>{const n=this.getTabRenderCacheList(e),r=n.findIndex(e=>e.path===t);-1!==r&&(n[r].destroy(),n.splice(r,1))})}getRenderId(e){const t=(this._idMap.get(e)||0)+1;return this._idMap.set(e,t),t}getRenderList(e){return this._renderMap.has(e)||this._renderMap.set(e,[]),this._renderMap.get(e)}getTabRenderCacheList(e){return this._tabRenderCacheMap.has(e)||this._tabRenderCacheMap.set(e,[]),this._tabRenderCacheMap.get(e)}popCurrent(e){return this.getRenderList(e).pop()}getCurrent(e){const t=this.getRenderList(e);return t[t.length-1]}};const tr={isMac:/mac os x/i,isWindows:/windows nt/i,isIos:/(iphone|ipad|ipod)/i,isAndroid:/android/i};let nr;const rr={},or={},ar=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;rr.dirname=function(e){const t=function(e){const t=ar.exec(e);return t?t.slice(1):[]}(e),n=t[0];let r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."};const ir=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,sr=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/;or.dirname=function(e){const t=function(e){const t=sr.exec(e);if(!t)return[];const n=(t[1]||"")+(t[2]||""),r=t[3]||"",o=ir.exec(r);return o?[n,o[1],o[2],o[3]]:[]}(e),n=t[0];let r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."};const cr=function(){if(nr)return nr;const e=navigator.userAgent.toLowerCase(),t={},n={};for(const t in tr){const r=tr[t];n[t]=r.test(e)}return t.system=n,nr=t,nr}().system.isWindows?or:rr;function ur(e){return 47===e||92===e}function pr(e){return 47===e}const lr=function(...e){if(0===e.length)return".";const{protocol:t,path:n}=function(e){const t=e.match(/^(.+?:\/\/)(.+)$/);return{protocol:t?t[1]:"",path:t?t[2]:e}}(e[0]);e[0]=n;const r=e[0].indexOf("/")>-1?"/":"\\";let o,a;for(let t=0;t<e.length;++t){const n=e[t];n.length>0&&(void 0===o?o=a=n:o+=r+n)}if(void 0===o)return".";let i=!0,s=0;if(ur(a.charCodeAt(0))){++s;const e=a.length;e>1&&ur(a.charCodeAt(1))&&(++s,e>2&&(ur(a.charCodeAt(2))?++s:i=!1))}if(i){for(;s<o.length&&ur(o.charCodeAt(s));++s);s>=2&&(o=r+o.slice(s))}return t+function(e){if(0===e.length)return".";const t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=function(e,t,n,r){let o,a="",i=0,s=-1,c=0;for(let u=0;u<=e.length;++u){if(u<e.length)o=e.charCodeAt(u);else{if(r(o))break;o=47}if(r(o)){if(s===u-1||1===c);else if(s!==u-1&&2===c){if(a.length<2||2!==i||46!==a.charCodeAt(a.length-1)||46!==a.charCodeAt(a.length-2))if(a.length>2){const e=a.lastIndexOf(n);if(e!==a.length-1){-1===e?(a="",i=0):(a=a.slice(0,e),i=a.length-1-a.lastIndexOf(n)),s=u,c=0;continue}}else if(2===a.length||1===a.length){a="",i=0,s=u,c=0;continue}t&&(a.length>0?a+=n+"..":a="..",i=2)}else a.length>0?a+=n+e.slice(s+1,u):a=e.slice(s+1,u),i=u-s-1;s=u,c=0}else 46===o&&-1!==c?++c:c=-1}return a}(e,!t,"/",pr)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e}(o)},dr={[T.FEISHU]:{[y.BOE]:"feishu-boe.cn",[y.PRE]:"feishu-pre.cn",[y.ONLINE]:"feishu.cn"},[T.LARK]:{[y.BOE]:"larksuite-boe.com",[y.PRE]:"larksuite-pre.com",[y.ONLINE]:"larksuite.com"}};const hr={getDomain:(e,t,n)=>function(e,t,n){const r=dr[n][t]||dr[n][y.ONLINE];return`${O[e]||O[R.OPEN]}.${r}`}(e,t,n),getSessionIdAsync:async()=>"",isFeatureEnabled:(e,t)=>!0,pathBasename(e,t){let n=e.lastIndexOf("/");if(n=n>-1?n:e.lastIndexOf("\\"),n<0)return e;const r=e.substring(n+1);return t?r.replace(t,""):r},pathExtname(e){const t=this.pathBasename(e),n=t.lastIndexOf(".");return n>0?t.substring(n):""},pathDirname:e=>cr.dirname(e),pathJoin:(...e)=>lr(...e),pathNormalize:e=>"",isDebugMode:async()=>!1,async getV3SettingByKey(e){},getNetworkStatus:async()=>"",pathRelative:()=>"",getAppLinkDomain:async e=>e===T.LARK?"applink.larksuite.com":"applink.feishu.cn",isAppLinkUrl:async e=>/^(https|lark):\/\/applink(\.[^./]+)+\/client\//i.test(e)};var _r,fr,gr,Er,mr,yr=new class{test(){}};!function(e){e.Number="number",e.String="string",e.Array="array",e.Boolean="boolean",e.Object="object",e.Function="function"}(_r||(_r={})),function(e){e[e.INVOKE=0]="INVOKE",e[e.ON=1]="ON"}(fr||(fr={})),function(e){e.INFO="info",e.SUCCESS="success",e.ERROR="error",e.WARNING="warning"}(gr||(gr={})),function(e){e.NONE="NONE",e.LOADING="LOADING",e.LOADED="LOADED",e.ERROR="ERROR"}(Er||(Er={})),function(e){e.PUSH_INBOX_CARDS="PUSH_INBOX_CARDS",e.PUSH_DYNAMIC_NET_STATUS="PUSH_DYNAMIC_NET_STATUS",e.OPEN_API_PUSH_EVENT="OPEN_API_PUSH_EVENT"}(mr||(mr={}));const Ar="getNTPStatus",Tr="getUserInfoEx",Sr="getAppStrategy",vr="getCardInfo",Rr="sendPreviewCard",Or="showFilePickerDialog",Cr="showChooseChat",Ir="showChooseContact",Pr="windowOpen",wr="updateOpenAppBadgeNodes",br="getOpenAppBadgeNodes",Nr="getMsgContent",Mr="checkAppSession",Lr="openSidebarApp";var kr,Dr,Ur,Kr,xr;!function(e){e.MEMORY="memory",e.DISK="disk",e.NETWORK="network",e.DEBUG="debug"}(kr||(kr={})),function(e){e.WORKER="tma-core.js",e.RENDER="webview.js",e.PAGE_FRAME="page-frame.html"}(Dr||(Dr={})),function(e){e[e.GET=1]="GET",e[e.POST=2]="POST"}(Ur||(Ur={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAIL=1]="FAIL"}(Kr||(Kr={})),function(e){e.EXCELLENT="excellent",e.EVALUATING="evaluating",e.WEAK="weak",e.NET_UN_AVAILABLE="netUnavailable",e.SERVICE_UN_AVAILABLE="serviceUnavailable",e.OFFLINE="offline",e.ONLINE="online"}(xr||(xr={}));var Fr,Hr,jr,Br;!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAIL=1]="FAIL",e[e.CANCEL=-1]="CANCEL"}(Fr||(Fr={})),function(e){e[e.P2P_CHAT=0]="P2P_CHAT",e[e.GROUP_CHAT=1]="GROUP_CHAT"}(Hr||(Hr={})),function(e){e[e.GROUP_CHATS=1]="GROUP_CHATS",e[e.P2P_CHATS=2]="P2P_CHATS",e[e.ALL_CHATS=0]="ALL_CHATS"}(jr||(jr={})),function(e){e.PC="pc"}(Br||(Br={}));var Gr,Vr,Wr,qr,$r;!function(e){e[e.CONFIRM=0]="CONFIRM",e[e.CLOSE=1]="CLOSE"}(Gr||(Gr={})),function(e){e[e.NETWORK_ERR=-1]="NETWORK_ERR",e[e.NOT_NEED_PAY=-2]="NOT_NEED_PAY"}(Vr||(Vr={})),function(e){e[e.BELOW=-1]="BELOW",e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.UNKNOWN=2]="UNKNOWN"}(Wr||(Wr={})),function(e){e[e.CONFIRM=0]="CONFIRM",e[e.CANCEL=1]="CANCEL"}(qr||(qr={})),function(e){e.GLOBAL="global",e.AFTER_LAUNCH="after_launch",e.LAUNCH="launch"}($r||($r={}));function Qr(e,t){return e.then(e=>[null,e]).catch(e=>(e&&t&&Object.assign(e,t),[e,void 0]))}const zr=(e,t,n,r)=>qe.invoke.bind(qe)(e,t,{timeout:6e4,...n},r),Yr={};function Jr(e,t){const n=n=>!t[n]&&e[n]&&(t[n]=e[n]);n("userId"),n("locale"),n("env"),n("region"),n("platform")}function Xr(e){const{eventName:t,data:n={}}=e,r={},o={};Object.entries(n).forEach(([e,t])=>{K.number(t)?r[e]=t:o[e]=t}),o&&Jr(Yr,o);const a=i(s.REPORT);a&&a.reportEvent({eventName:t,metrics:r,categories:o})}function Zr(e,t){const n=i(s.REPORT_TEA);n&&n.track(e,t)}const eo=new class{constructor(){p()(this,"apiMap",void 0),this.apiMap=new Map}generateHandler(e){return t=>e.apiType===fr.ON?e.originHandler(e=>{}):e.originHandler(t)}registerApi(e){e.originHandler=e.handler,e.handler=this.generateHandler(e),this.apiMap.set(e.name,e)}getRegisterApis(){return this.apiMap}},to=eo.registerApi.bind(eo),no=(e,t)=>eo.getRegisterApis().get(e).handler(t);var ro;!function(e){e.MP_CHECK_SESSION_RESULT="mp_check_session_result",e.MP_NETWORK_REQUEST_RESULT="mp_network_request_result",e.GADGET_SENDMESSAGECARD_CALL="gadget_sendMessageCard_call",e.GADGET_SENDMESSAGECARD_PREVIEW_CLICK="gadget_sendMessageCard_preview_click",e.GADGET_SENDMESSAGECARD_SEND="gadget_sendMessageCard_send"}(ro||(ro={}));var oo,ao,io,so;!function(e){e.OK="ok",e.FAIL="fail",e.CANCEL="cancel"}(oo||(oo={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(ao||(ao={})),function(e){e[e.SESSION_INVALID=1]="SESSION_INVALID",e[e.SERVER_ERROR=2]="SERVER_ERROR",e[e.PARSED_ERROR=3]="PARSED_ERROR",e[e.FALSE_VALID=4]="FALSE_VALID",e[e.UNKOWN_ERROR=5]="UNKOWN_ERROR"}(io||(io={})),function(e){e.SHOW_MEMBER_SELECT="showMemberSelect",e.RELOAD_APP="reloadApp",e.CLOSE_APP="closeApp",e.SET_SHARE_MENU_VISIBILITY="setShareMenuVisibility"}(so||(so={}));io.SERVER_ERROR,io.PARSED_ERROR,io.SESSION_INVALID,io.FALSE_VALID,io.UNKOWN_ERROR;var co;!function(e){e.ALL_CHATS="all_chats",e.GROUP_CHATS="group_chats",e.P2P_CHATS="p2p_chats",e.BOT="bot",e.WITHOUT_CROSS_TENANT_CHATS="without_cross_tenant_chats"}(co||(co={}));var uo;function po(e,t){return`${e}:${oo.OK}${t?" "+t:""}`}!function(e){e.new_user_scope_list="pc_new_user_scope_list",e.ShowToast_Duration_Checker="showToast_duration_checker",e.OpenDocument_FileType_Checker="openDocument_fileType_Checker",e.OpenDocument_Clould_File_Checker="openDocument_cloud_file_Checker",e.removeStorage_key_not_found="removeStorage_key_not_found",e.uploadFile_filePath_checker="uploadFile_tt_filePath_checker",e.downloadFile_filePath_checker="downloadFile_tt_filePath_checker"}(uo||(uo={}));const lo=function(e,t){return`${e}:${oo.FAIL}${t?" "+t:""}`};function ho(e){return{errMsg:lo(e," this api is not implemented")}}const _o=function(e){return{OK:`${e}:${oo.OK}`,FAIL:`${e}:${oo.FAIL}`}};function fo(e,t){if(!t)return oo.FAIL;const n=0===t.indexOf(e+":ok"),r=0===t.indexOf(e+":cancel");return n?oo.OK:r?oo.CANCEL:oo.FAIL}function go(e,t){return Boolean(0===e.indexOf(t+":ok"))}function Eo(e,t){return Boolean(0===e.indexOf(t+":fail"))}function mo(e,t){return Eo(e,t)}function yo(e,t){const n=fo(e,t);return n===oo.OK?ao.SUCCESS:n}var Ao={getSessionIdAsync:async function(){const e=i(s.PLATFORM_COMMON);return e&&e.getSessionIdAsync()},getMiniProgramUrl:()=>{const e=no("getHostConfig");return function(e,t){const n=i(s.PLATFORM_COMMON);return{appUrl:`https://${n&&n.getDomain(R.OPEN,e,t)}/open-apis/mina`}}(e.env,e.region)},getDomain:e=>{const t=no("getHostConfig");return function(e,t,n){const r=i(s.PLATFORM_COMMON);return r&&r.getDomain(e,t,n)}(e,t.env,t.region)},monitorEvents:e=>{if(i(s.REPORT))!function(e){e.forEach(Xr)}(e);else{const t=e.map(e=>{const{data:t,eventName:n}=e,r={},o={...t};return Object.keys(t).forEach(e=>{"number"==typeof t[e]&&(r[e]=t[e])}),{name:n,metrics:r,categories:o}});zr("report",t)}},analyticsTrack:(e,t)=>{Zr(e,t)},isFeatureEnabled:e=>P(e,!0),getUserId:()=>no("getHostConfig").userId,getTenantId:()=>no("getHostConfig").tenantId,getDocDomains:async e=>{const[t,n]=await Qr(Xo(e,"getDocDomains"));return!t&&n&&n.domains?n.domains:[]},getDeviceId:async e=>{const[t,n]=await Qr(Xo(e,"getDeviceId"));return t||!n||"string"!=typeof n.id?"":n.id},getNTPTime:async e=>{const[t,n]=await Qr(Xo(e,"getNTPTime"));if(!t&&n&&"number"==typeof n.time)return n.time},getNTPStatus:async e=>{const[t,n]=await Qr(Xo(e,"getNTPStatus"));if(!t&&n&&go(n.errMsg,Ar))return n.reliable},getEnv:()=>no("getHostConfig"),openFile:async(e,t)=>Xo(e,"openFile",{path:t}),hasWaterMark:async e=>{const[t,n]=await Qr(Xo(e,"hasWaterMark"));if(!t&&n&&!Eo(n.errMsg,"hasWaterMark"))return n.has},getUserInfoEx:async e=>{const[t,n]=await Qr(Xo(e,"getUserInfoEx"));if(!t&&n&&!Eo(n.errMsg,Tr))return n.data},print:async(e,t)=>{const[n,r]=await Qr(Xo(e,"print",{url:t}));return n||!r?{errMsg:"print:fail",code:Kr.FAIL}:r},getWifiInfo:async e=>{const[t,n]=await Qr(Xo(e,"getWifiInfo"));return t||!n?{errMsg:"getWifiInfo:fail",code:Kr.FAIL}:n},getAppStrategy:async(e,t)=>{const[n,r]=await Qr(Xo(e,"getAppStrategy",{appId:t}));if(!n&&r&&go(r.errMsg,Sr))return r.appState},getCardInfo:async(e,t,n,r)=>{const[o,a]=await Qr(Xo(e,"getCardInfo",{jsonStr:t,appId:n,chatId:r}));return!o&&a&&go(a.errMsg,vr)?a.richTextInfo:{}},sendPreviewCard:async(e,t,n)=>{const[r,o]=await Qr(Xo(e,"sendPreviewCard",{cardKey:t,chatIds:n}));return!r&&o&&go(o.errMsg,Rr)?o.sendInfo:{}},getOpenAppBadgeNodes:async(e,t,n,r)=>{const[o,a]=await Qr(Xo(e,"getOpenAppBadgeNodes",{strategy:r,appId:t,feature:n}));if(!o&&a)return go(a.errMsg,br)?{badgeNum:a.badgeNum,needShow:a.needShow}:void 0},updateOpenAppBadgeNodes:async(e,t,n,r)=>{const[o,a]=await Qr(Xo(e,"updateOpenAppBadgeNodes",{appId:t,feature:n,badgeNum:r}));if(!o&&a)return go(a.errMsg,wr)?{code:a.data}:void 0},showFilePickerDialog:async(e,t)=>{const[n,r]=await Qr(Xo(e,"showFilePickerDialog",t));return!n&&r&&go(r.errMsg,Or)?r.result:null},windowFocus:async(e,t,n)=>{const[r,o]=await Qr(Xo(e,"windowFocus",{appId:t,mode:n}));return r||!o?{errMsg:"windowFocus:fail"}:o},getI18n:async(e,t)=>(await Xo(e,"i18n",{keys:t})).data,getMsgContent:async(e,t,n,r,o)=>{const[a,i]=await Qr(Xo(e,"getMsgContent",{ttcode:t,appId:n,triggerCode:r,messageIds:o}));if(!a&&i)return go(i.errMsg,Nr)?{code:i.code,data:i.data,msg:i.msg,reqId:i.reqId}:void 0},checkAppSession:async(e,t,n)=>{const[r,o]=await Qr(Xo(e,"checkAppSession",{session:t,appId:n}));if(!r&&o)return go(o.errMsg,Mr)?{data:o.data}:void 0},getAppLinkDomain:async()=>function(e){const t=i(s.PLATFORM_COMMON);return t&&t.getAppLinkDomain(e)}(no("getHostConfig").region),isAppLinkUrl:async e=>N(e)};const{isFeatureEnabled:To}=Ao;function So(e,t){if(!t||!e)return"";if(To(bt.API_GET_URL_QUERY)){const n=new URL(t);if(n){const t=n.searchParams.get(e);if(null!==t)return t}return""}const n=new RegExp("[?&]"+e+"=([^&#]+)"),r=t.match(n);return r?r[1]:""}function vo(e){let t;try{t=new URL(e).pathname}catch(e){}return t}function Ro(e){let t;try{t=new URL(e).host}catch(e){}return t}var Oo,Co;!function(e){e.CONTACT_INFO="contactInfo",e.CHAT_INFO="chatInfo",e.DEVICE_ID="deviceID"}(Oo||(Oo={})),function(e){e.USER_LOCATION="userLocation",e.RECORD="record",e.USER_INFO="userInfo",e.CLIPBOARD="clipboard",e.APP_BADGE="appBadge",e.WRITE_PHOTOS_ALBUM="writePhotosAlbum",e.RUN_DATA="runData",e.DEVICE_ID="deviceID"}(Co||(Co={}));const Io=[Co.USER_LOCATION,Co.RECORD,Co.CLIPBOARD,Co.WRITE_PHOTOS_ALBUM,Co.USER_INFO],Po=[{scope:Co.RUN_DATA,isSupported:e=>-1!==[f.GADGET,f.H5].indexOf(e)&&P(bt.OPENPLATFORM_SETTING_SCOPE_RUNDATA,!0)},{scope:Co.APP_BADGE,isSupported:e=>-1!==[f.GADGET,f.H5].indexOf(e)&&P(bt.OPEN_APP_BADGE,!0)}],wo=[Co.USER_LOCATION,Co.RECORD,Co.DEVICE_ID,Co.USER_INFO,Co.CLIPBOARD,Co.APP_BADGE];var bo;!function(e){e.CAN_USE_IFRAME="pc_gadget_use_tt_iframe_list",e.META_EXPIRATION_TIME="meta_expiration_time_setting",e.USE_NEW_NETWORK_API="use_new_network_api",e.API_CROSS_PLATFORM_REFACTOR="api_crossplatform_refactor",e.ENABLE_API_CODE_RELEASE="api_code_release_list"}(bo||(bo={}));let No;async function Mo(e){const t=no("getLog");No||(No=b(bo.API_CROSS_PLATFORM_REFACTOR));const[n,r]=await Qr(No);if(n||!r||"Object"!==$o(r))return t.info(`[apiRefactor-enableNewFeature] key:${e},get feature config fail error${n&&n.message}`),No=b(bo.API_CROSS_PLATFORM_REFACTOR),!1;if(Array.isArray(r.enable_features)){const n=r.enable_features.includes(e);return t.info(`[apiRefactor-enableNewFeature] feature key:${e},enable:${n}`),n}return t.info(`[apiRefactor-enableNewFeature] feature key:${e},enable:false`),!1}const Lo=/^ttfile:\/\/(temp|user)/,ko=/^(http|https):\/\//;function Do(e,t){return{getEngineDataItem:async n=>zr("getStorageInnerItem",{appKey:t,key:n,engineType:e,useLocal:!0},{timeout:5e3}),setEngineDataItem:async(n,r)=>zr("setStorageInnerItem",{key:n,appKey:t,value:r,engineType:e,useLocal:!0},{timeout:5e3}),removeEngineDataItem:async n=>zr("removeEngineDataItem",{key:n,appKey:t,engineType:e,useLocal:!0},{timeout:5e3}),clearStorage:async()=>await zr("clearAppStorage",{appKey:t,engineType:e},{timeout:5e3}),getItem:async n=>await zr("getAppStorageItem",{appKey:t,engineType:e,key:n},{timeout:5e3}),getStorageData:async()=>await zr("getAppStorageData",{appKey:t,engineType:e},{timeout:5e3}),getStorageKeys:async()=>await zr("getAppStorageKeys",{appKey:t,engineType:e},{timeout:5e3}),getStorageLength:async()=>await zr("getAppStorageLength",{appKey:t,engineType:e},{timeout:5e3}),removeItem:async n=>await zr("removeAppStorageItem",{appKey:t,engineType:e,key:n},{timeout:5e3}),setItem:async(n,r)=>await zr("setAppStorageItem",{key:n,value:r,appKey:t,engineType:e},{timeout:5e3}),getEngineStorageData:async n=>await zr("getEngineStorageData",{appKey:t,engineType:e,key:n},{timeout:5e3}),setEngineStorageData:async(n,r)=>await zr("setEngineStorageData",{appKey:t,engineType:e,key:n,value:r},{timeout:5e3})}}function Uo(e,t){return{getOrgPermissionInfo:async()=>zr("getOrgPermissionInfo",{appId:e,engineType:t}),isValidUserScope:async e=>{const[n,r]=await Qr(zr("getSupportUserScopeList",{engineType:t}));if(n||!r){const n=await Mo(uo.new_user_scope_list);return function(e,t){if(!t)return wo;const n=[...Io];return Po.forEach(t=>{t&&t.isSupported(e)&&n.push(t.scope)}),n}(t,n).includes(e)}return r.includes(e)},getUserPermissionByKey:async n=>await zr("getUserPermissionInfoByKey",{appId:e,key:n,engineType:t}),updateUserPermissionAndSync:async(n,r)=>{await zr("updateUserPermissionAndSync",{appId:e,newPermissionInfo:{[n]:r},engineType:t})},getUserPermissionInfo:async()=>await zr("getUserPermissionInfo",{appId:e,engineType:t})}}function Ko(e){return{sandboxPathToNativePath:async t=>zr("hostPathToSystemPath",{engineType:e,hostPath:t}),getAppTempPath:async t=>zr("getAppTempPath",{engineType:e,uniqueId:t}),getUserspacePath:async()=>zr("getUserspacePath",{engineType:e}),generateTTPath:async(t,n)=>{const r=function(e){const t=e.split("?")[0];return w(t).replace(/[%#?\\]/g,"")||Date.now().toString()}(n);return zr("getUniqueTTPath",{type:t,suffix:r,engineType:e})},ttPathToSandboxPath:async t=>{if(!t||!t.ttPath)return"";const{versionType:n,uniqueId:r,version:o,ttPath:a}=t;if(Lo.test(a)){const n={...t,engineType:e};return(a.endsWith("ttfile://user")||a.endsWith("ttfile://temp"))&&(n.ttPath=a+"/"),zr("ttPathToHostPath",n)}return ko.test(a)?a:zr("resolveRelativePathToHostPath",{engineType:e,relativePath:a,versionType:n,uniqueId:r,version:o})},ttPathToNativePath:async t=>{if(!t||!t.ttPath)return"";const{versionType:n,uniqueId:r,version:o,ttPath:a}=t;if(Lo.test(a)){const n={...t,engineType:e};return(a.endsWith("ttfile://user")||a.endsWith("ttfile://temp"))&&(n.ttPath=a+"/"),zr("ttPathToSystemPath",n)}return ko.test(a)?a:zr("resolveRelativePathToSystemPath",{engineType:e,relativePath:a,versionType:n,uniqueId:r,version:o})},nativePathToSandboxPath:async t=>function(e){return 0===e.indexOf("native-resource://sandbox_fs")}(t)?function(e){return e.replace("native-resource://sandbox_fs","")}(t):zr("systemPathToHostPath",{engineType:e,systemPath:t}),getAppVersionPkgPath:async(t,n,r)=>zr("getAppPackagePath",{engineType:e,version:r,versionType:t,uniqueId:n}),getUniqueSandboxPath:async(t,n)=>zr("getUniqueHostPath",{type:t,suffix:n,engineType:e}),getAppDataPath:async t=>zr("getAppDataPath",{uniqueId:t,engineType:e})}}function xo(e){const t=no("getLog");return{info:(n,r,...o)=>{t.info(r,{apiName:n,appKey:e},...o)},error:(n,r,...o)=>{t.error(r,{apiName:n,appKey:e},...o)},debug:(n,r,...o)=>{t.debug(r,{apiName:n,appKey:e},...o)},warn:(n,r,...o)=>{t.warn(r,{apiName:n,appKey:e},...o)}}}async function Fo(e,t,n,r){return zr("decrypt",{encryptData:e,key:t,iv:n,numberKeys:r})}function Ho(e){const{key:t="",value:n={},type:r="slardar"}=e||{};try{"slardar"===r?Ao.monitorEvents([{eventName:t,data:n}]):Ao.analyticsTrack(t,n)}catch(e){return JSON.stringify(e)}}const jo={SUCCESS:{errCode:0,errMsg:"ok"},UNKNOWN_ERROR:{errCode:100,errMsg:"unknown error"},UNKNOWN_EXCEPTION:{errCode:101,errMsg:"unknown exception"},INTERNAL_ERROR:{errCode:102,errMsg:"internal error"},UNABLE_API:{errCode:103,errMsg:"feature not support"},INVALID_PARAMETER:{errCode:104,errMsg:"invalid parameter"},AUTHENTICATION_FAIL:{errCode:105,errMsg:"authentication fail"},SYSTEM_PERMISSION_DENIED:{errCode:106,errMsg:"system permission denied"},USER_PERMISSION_DENIED:{errCode:107,errMsg:"user permission denied"},ORGANIZATION_PERMISSION_DENIED:{errCode:108,errMsg:"organization permission denied"}},Bo={errCode:1000003,errMsg:"not found"},Go={errCode:1000001,errMsg:"data size exceeds the limit"},Vo={errCode:1000002,errMsg:"total storage size exceeds the limit"};async function Wo(e){const{appKey:t,engineType:n}=e,r=xo(t);try{const r=function(e){return no("getAppBaseAttrs",{appKey:e})}(t)||{},{botId:o,sdkVersion:a,mode:i,appVersion:s="1.0.0",scene:c,name:u,uniqueId:p,appId:l,versionType:d,packageVersion:h}=r;return{appId:l,botId:o,sdkVersion:a,runMode:i,appVersion:f.H5===n?s:h,scene:c,appName:u,uniqueId:p,versionType:d,...e}}catch(t){return r.info("getAppBaseInfo","get base info error "+t),{...e}}}function qo(e,t,n){if(e.errCode===jo.SUCCESS.errCode){return{errMsg:po(t,n)}}let r=lo(t,e.errMsg);return n&&(r=`${r} ${n}`),{errCode:e.errCode,errMsg:r}}function $o(e){return Object.prototype.toString.call(e).slice(8,-1)}const Qo={before:async(e,t)=>{if(t.engineType!==f.BLOCK)return;if(!e.orgAuthResources||0===e.orgAuthResources.length)return;const n=xo(t.appKey),r=await Wo(t),[o,a={}]=await Qr(zr("getOrgPermissionInfo",{appId:r.appId,engineType:t.engineType},{timeout:2e3}));if(o)return n.error("hostHooks","getOrgPermissionInfo fail, "+o,{appKey:t.appKey}),{errMsg:e.name+":fail getOrgPermissionInfo fail."};const i=[];return e.orgAuthResources.forEach(e=>{a[e]&&a[e].auth||i.push(e)}),i.length?{errMsg:`${e.name}:fail lack of permissions, [${i}]`}:void 0}},zo=()=>{};const Yo=new class{constructor(){p()(this,"apiMap",void 0),p()(this,"apiMapWithWrap",void 0),p()(this,"hooks",void 0),p()(this,"hostOffCbMap",void 0),this.apiMap=new Map,this.apiMapWithWrap=new Map,this.hostOffCbMap=new Map}registerInvokeHooks(e){e&&(this.hooks=e)}getType(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}paramsCheck(e,t){for(const n in t)if(t.hasOwnProperty(n)){const r=t[n],{type:o,required:a}=r,i=e[n];if(void 0===i&&!0===a)return!1;if(void 0!==i&&this.getType(i)!==o)return!1}return!0}generateHandler(e){return async(t,n,r)=>{if(e.apiType===fr.ON){const t=this.hostOffCbMap.get(n.appKey)||{};if(t[e.name])return;return t[e.name]=e.originHandler(t=>{n.push(""+e.name,t)},{node:n.node})||zo,this.hostOffCbMap.set(n.appKey,t)}if(e.params&&!this.paramsCheck(t||{},e.params))return{errMsg:e.name+":fail params check failed"};if(this.hooks&&this.hooks.before){const t=await this.hooks.before(e,n);if(t)return t}return e.originHandler(t,{node:n.node,fallback:r,appKey:n.appKey})}}registerApi(e){e.originHandler=e.handler,e.handler=this.generateHandler(e);return(!0===e.needWrap?this.apiMapWithWrap:this.apiMap).set(e.name,e),{name:e.name,handler:e.handler}}getRegisterApisWithNoWrap(){return this.apiMap}getRegisterApiConfig(e){return this.apiMapWithWrap.get(e)||this.apiMap.get(e)}offHostEvents(e){Object.values(this.hostOffCbMap.get(e)||{}).forEach(e=>e()),this.hostOffCbMap.delete(e)}offHostEventsByName(e,t){const n=(this.hostOffCbMap.get(e)||{})[t];n&&n()}};Yo.registerInvokeHooks(Qo);const Jo=Yo.registerApi.bind(Yo),Xo=async(e,t,n)=>{const r=Yo.getRegisterApiConfig(t);return r?await r.handler(n,e):{code:Kr.FAIL,errMsg:t+":fail api not register"}};const Zo=["light","dark"];const ea=new class{constructor(){p()(this,"_globalTheme",void 0),p()(this,"_eventEmitter",new l),p()(this,"_appKeyTheme",new Map)}_checkIsValid(e){return Zo.includes(e)}_setCurrentTheme(e,t){this._checkIsValid(e)&&(t?this._appKeyTheme.set(t,e):(this._globalTheme=e,this._appKeyTheme.clear()),this._eventEmitter.emit("onThemeChange",e,t))}init(e){this._setCurrentTheme(e)}updateTheme(e,t){this.getCurrentTheme(t)!==e&&this._setCurrentTheme(e,t)}onThemeChange(e){this._eventEmitter.on("onThemeChange",e)}offThemeChange(e){this._eventEmitter.off("onThemeChange",e)}getCurrentTheme(e){return e&&this._appKeyTheme.get(e)||this._globalTheme}clearCurrentTheme(e){e&&this._appKeyTheme.delete(e)}};let ta=0;const na=new Map;async function ra(e){if(!na.has(e)){const t=new Promise(async(t,n)=>{const r=Date.now();sn.info("getSDK fetch start: "+r);try{const n=await q(()=>qe.invoke("getSDK",e,{timeout:3e4}),2),o=function(e){let t=String(e);t=t.length%2==0?t:"0"+t;const n=t.match(/\d{2}/g);if(!n)return"";const r=n.reduce((e,t)=>e+=Number(t)+".","");return r.substr(0,r.length-1)}(n.sdkVersion||"");Dt.callParallel(Ut.ON_SDK_LOADED,{sdkVersion:o});const a=Date.now()-r;sn.info(`getSDK fetch success, cost ${a}, version: ${n.sdkVersion}`),Lt({name:St.OP_GET_JSSDK_CODE}).addMap({duration:a}).flush(),t(n)}catch(t){na.delete(e),sn.info("getSDK fetch fail, "+t),n(t)}});na.set(e,t)}return na.get(e)}let oa=!1;class aa{constructor(){p()(this,"workerInstance",void 0)}async create(e){const t=i(s.WORKER_CONTAINER);this.workerInstance=new t,await this.workerInstance.create(e)}postMessage(e){this.workerInstance.postMessage(e)}onMessage(e){this.workerInstance.onMessage(e)}offMessage(e){this.workerInstance.offMessage(e)}stop(){return this.workerInstance.stop()}resume(e){return this.workerInstance.resume(e)}destroy(){this.workerInstance.destroy()}}class ia{static getInstance(e){return this.instanceMap.has(e)||this.instanceMap.set(e,new ia(e)),this.instanceMap.get(e)}static get addContainerDelay(){return In()?300:0}constructor(e){p()(this,"workerPoolSize",0),p()(this,"pool",[]),p()(this,"engineType",void 0),p()(this,"delayTid",void 0),p()(this,"workerSuccInit",!1),this.engineType=e}clearDelayTask(){this.delayTid&&(clearTimeout(this.delayTid),this.delayTid=void 0)}pushPool(e){e.catch(()=>{const t=this.pool.findIndex(t=>t===e);t>-1&&this.pool.splice(t,1)}),this.pool.push(e)}addWorkerToPool(e){this.clearDelayTask(),e?this.delayTid=setTimeout(()=>{this.pushPool(this.createWorker())},e):this.pushPool(this.createWorker())}createWorker(){return new Promise(async(e,t)=>{try{const[t,n]=await Promise.all([ra(this.engineType),Ln(Cn())]),r=t.basePath,o=t.tmaCore,a=t.tmaCoreByteCode,i={type:Dn.INIT,data:{sdkCode:r?lr(r,Dr.WORKER):o,sdkByteCode:a}},s=new aa;await s.create(n);const c=e=>{const{type:t}=e.data;if(t===Dn.SUCC_INIT)s.offMessage(c),sn.info("tma core js exec success"),this.workerSuccInit=!0;else if(t===Dn.ERROR_INIT){const t=e.data.data;s.offMessage(c);const n="tma core js context init fail, "+t.errMsg;sn.error(n)}};s.onMessage(c),s.postMessage(i),e(s)}catch(e){t(e)}})}getWorkerFromPool(){let e;return this.pool.length?(sn.info("get worker from pool"),e=this.pool.shift()):(sn.info("get worker from new worker"),e=this.createWorker()),this.pool.length<this.workerPoolSize&&this.addWorkerToPool(ia.addContainerDelay),e}setPoolSize(e){this.workerPoolSize=e;let t=this.workerPoolSize-this.pool.length;if(t>0)for(;t;)this.addWorkerToPool(),t--}preload(){this.pool.length||this.addWorkerToPool()}}p()(ia,"instanceMap",new Map);var sa=new class{constructor(){p()(this,"_componentMap",new Map)}setComponentByAppKey(e,t){this._componentMap.set(e,t)}removeComponentByAppKey(e){return this._componentMap.delete(e)}getComponentByAppKey(e){return this._componentMap.get(e)}};const ca=new Map,ua={setRouter(e,t){ca.set(e,t)},getRouter:e=>ca.get(e),removeRouter(e){const t=ca.get(e);t&&(t.destroy(),ca.delete(e))}};var pa=n(2);const la={logEnabled:!1,reportEnabled:!1,batchBlackListEnabled:!1,batchWhiteListEnabled:!1,batchBlackList:[],batchWhiteList:[],bizBlackList:[]};class da{constructor(e){this.hitBlackList=!1,this.hitWhiteList=!1,this._batchEnabled=!1,this._createTime=Date.now(),this.generateTraceId(e),this.batchReportEnabled=this.constructor.config.reportEnabled||!1,this.batchLogEnabled=this.constructor.config.logEnabled||!1}static setConfig(e){this.config=e}static resetConfig(){this.config=Object.assign({},la)}get blackListEnabled(){return this.constructor.config.batchBlackListEnabled||la.batchBlackListEnabled}get whiteListEnabled(){return this.constructor.config.batchWhiteListEnabled||la.batchWhiteListEnabled}get batchEnabled(){return this._batchEnabled}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get createTime(){return this._createTime}generateSpan(){return new da(this)}reportTo(e){const{batchBlackListEnabled:t=la.batchBlackListEnabled,batchWhiteListEnabled:n=la.batchWhiteListEnabled,batchBlackList:r=la.batchBlackList,batchWhiteList:o=la.batchWhiteList}=this.constructor.config;return!this.hitBlackList&&t&&r.some(t=>this.matchRule(t,e))&&(this.hitBlackList=!0),!this.hitBlackList&&!this.hitWhiteList&&this.batchReportEnabled&&n&&o.some(t=>this.matchRule(t,e))&&(this.hitWhiteList=!0),this._monitorCache||(this._monitorCache=[]),!this.hitBlackList&&this._monitorCache.push(JSON.stringify(e)),this}finish(){const{batchLogEnabled:e,batchReportEnabled:t}=this;let n=t;return n&&(this.blackListEnabled&&this.hitBlackList||this.whiteListEnabled&&!this.hitWhiteList)&&(n=!1),{name:pa.a,code:{domain:pa.d,code:pa.c,level:pa.e,message:pa.f},categories:{[pa.b]:JSON.stringify(this._monitorCache),[pa.g.traceId]:this._traceId},internalData:{logEnabled:this.batchEnabled&&e,reportEnabled:this.batchEnabled&&n}}}parse(e){return"extensions"in e&&!("trace"in e)?(this._createTime=e.createTime,this._traceId=e.traceId):(this._createTime=e.trace.createTime,this._traceId=e.trace.traceId,this._batchEnabled=e.batchEnabled,e.monitorCache&&(this._monitorCache=[...e.monitorCache])),this}toJSON(){const e={trace:{createTime:this._createTime,traceId:this._traceId},batchEnabled:this._batchEnabled};return this._monitorCache&&(e.monitorCache=[...this._monitorCache]),e}serialize(){return JSON.stringify(this)}deserialize(e){const t=JSON.parse(e);return this.parse(t)}checkBatchEnabled(e){const t=this.constructor.config.bizBlackList;return!t||!t.includes(e)}subTrace(e){const t=new this.constructor(this);return e?this.checkBatchEnabled(e)?(t._batchEnabled=!0,t):(t._batchEnabled=this._batchEnabled,t):(t._batchEnabled=this.batchEnabled,t)}getTraceId(){return this._traceId}generateTraceId(e){let t;t=e?e.getTraceId():pa.h,this._traceId=Object(pa.i)(t)}matchRule(e,t){const n=t.getName(),r=t.getMonitorId(),o=t.getMonitorDomain(),{event_name:a=[],monitor_id:i=[],monitor_domain:s=[],monitor_domain_prefix:c=[]}=e;return!(!n||!a.some(e=>e===n))||(!(!r||!i.some(e=>e===r))||!(!o||!s.some(e=>e===o)&&!c.some(e=>o.startsWith(e))))}}function ha(e,t,n){return`${e}_${t}_${n}`}function _a(e,t,n){const r=Qt(e,zt.APP_TRACINGS);$t(e,zt.APP_TRACINGS,{...r,[t]:n})}function fa(e,t){const n=Qt(e,zt.APP_TRACINGS);if(n)return n[t]}function ga(e){return fa(e,e)}function Ea(e,t){if(t){return fa(e,ha(e,t.path,t.renderId))}}da.config=la;const ma=new class{constructor(){p()(this,"get",e=>this.request({...e,method:ct.GET})),p()(this,"post",e=>this.request({...e,method:ct.POST})),p()(this,"request",e=>{var t;return e.url=(t=e.url,/^https?:\/\/https?:\/\//.test(t)?t.replace(/^https?:\/\//,""):t),e.params&&(e.url=this._appendQuery(e.url,e.params),delete e.params),this._requestFunction({...e,body:U(e.body)?JSON.stringify(e.body):e.body})})}get _requestFunction(){return i(s.REQUEST)}_appendQuery(e,t){const n=new URL(e),r=n.searchParams;return t&&Object.keys(t).forEach(e=>{r.append(e,encodeURIComponent(t[e]))}),n.toString()}};var ya;!function(e){e.MP_CHECK_SESSION_RESULT="mp_check_session_result",e.MP_NETWORK_REQUEST_RESULT="mp_network_request_result",e.GADGET_SEND_MESSAGE_CARD_CALL="gadget_sendMessageCard_call",e.GADGET_SEND_MESSAGE_CARD_PREVIEW_CLICK="gadget_sendMessageCard_preview_click",e.GADGET_SEND_MESSAGE_CARD_SEND="gadget_sendMessageCard_send"}(ya||(ya={}));var Aa,Ta,Sa,va;!function(e){e.OK="ok",e.FAIL="fail",e.CANCEL="cancel"}(Aa||(Aa={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(Ta||(Ta={})),function(e){e[e.SESSION_INVALID=1]="SESSION_INVALID",e[e.SERVER_ERROR=2]="SERVER_ERROR",e[e.PARSED_ERROR=3]="PARSED_ERROR",e[e.FALSE_VALID=4]="FALSE_VALID",e[e.UNKOWN_ERROR=5]="UNKOWN_ERROR"}(Sa||(Sa={})),function(e){e.SHOW_MEMBER_SELECT="showMemberSelect",e.RELOAD_APP="reloadApp",e.CLOSE_APP="closeApp",e.SET_SHARE_MENU_VISIBILITY="setShareMenuVisibility"}(va||(va={}));Sa.SERVER_ERROR,Sa.PARSED_ERROR,Sa.SESSION_INVALID,Sa.FALSE_VALID,Sa.UNKOWN_ERROR;var Ra;!function(e){e.TEST="test",e.PREVIEW="preview",e.CURRENT="current"}(Ra||(Ra={}));var Oa,Ca,Ia,Pa;async function wa(e){return{netStatus:await async function(){const e=i(s.PLATFORM_COMMON);return e&&e.getNetworkStatus()}()}}!function(e){e.CHAT_BADGE_CHANGE="chatBadgeChangeObserved",e.ON_CHECK_FOR_UPDATE="onCheckForUpdate",e.ON_UPDATE_READY="onUpdateReady",e.ON_UPDATE_FAILED="onUpdateFailed",e.NET_WORK_QUALITY_CHANGE="onNetworkQualityChange",e.ON_UPLOAD_PROGRESS_CHANGE="onUploadFileProgress"}(Oa||(Oa={})),function(e){e.x_request_id="x-request-id",e.x_tt_logid="x-tt-logid"}(Ca||(Ca={})),function(e){e[e.EXCELLENT=1]="EXCELLENT",e[e.EVALUATING=2]="EVALUATING",e[e.WEAK=3]="WEAK",e[e.NET_UN_AVAILABLE=4]="NET_UN_AVAILABLE",e[e.SERVICE_UN_AVAILABLE=5]="SERVICE_UN_AVAILABLE",e[e.OFFLINE=6]="OFFLINE"}(Ia||(Ia={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAIL=-1]="FAIL"}(Pa||(Pa={}));class ba{constructor(e){p()(this,"startTime",0),p()(this,"duration",0),p()(this,"TAG","NetMonitor"),p()(this,"appInfo",void 0),p()(this,"requestStart",()=>(this.startTime=Date.now(),this)),p()(this,"requestFinish",async(e,t,n,r,o)=>{this.startTime>0&&(this.duration=Date.now()-this.startTime),this.sendEvent({url:e,duration:this.duration,result:r,baseInfo:t,Log:o})}),this.appInfo=e}async sendEvent(e){const{duration:t}=e,n=e.url||"",{result:r}=e,{appId:o,appVersion:a,jsVersion:i,mode:s,scene:c}=e.baseInfo,{resultType:u,errCode:p,errMessage:l}=function(e){if(!e)return{resultType:Ta.FAIL};const{error:t,message:n}=e;let r=Ta.FAIL;return r=0===t||0===e.code?Ta.SUCCESS:Ta.FAIL,{resultType:r,errCode:t,errMessage:n}}(r),{host:d,path:h}=function(e){const t=new URL(e);return{host:t.hostname,path:t.pathname}}(n),{netStatus:_}=await wa(this.appInfo),f={result_type:u,request_type:"http",error_msg:l,error_code:p,channel:"native",duration:t,host:d,path:h,app_id:o,app_version:a,mode:s,scene:c,js_version:i,net_status:_,evn_type:void 0};Ho({key:ya.MP_NETWORK_REQUEST_RESULT,value:f});const{Log:g}=e;g&&g.info(this.TAG,`request ${ya.MP_NETWORK_REQUEST_RESULT}:${JSON.stringify(f)}`)}}async function Na(e,t,n={},r={},o){const a=new ba(t).requestStart(),i={"Content-Type":"application/json",...r},s={method:ct.POST,url:e,body:n,headers:i,responseType:ut.JSON};return"browser"===m.BROWSER&&(s.withCredentials=!0),async function(e){if("browser"===m.BROWSER){return(await ma.request(e)).data}return(await zr("request",e)).data}(s).then(r=>(a.requestFinish(e,t,n,r,o),r))}async function Ma(){const e=Ao.getEnv();return{sessionId:await Ao.getSessionIdAsync(),larkVersion:e.platformVersion}}const La=_o("login"),ka=async function(e,t){const{appKey:n,engineType:r}=t,o=xo(n),a=Do(r,n);try{o.info("login","get start params start");const e=await Wo(t);o.info("login","get meta start");const{appUrl:n}=Ao.getMiniProgramUrl();o.info("login","get sessionId start");const{larkVersion:r,sessionId:i}=await async function(){return{sessionId:await Ao.getSessionIdAsync(),larkVersion:Ao.getEnv().platformVersion}}(),s=n+"/v2/login",c={app_version:r,appid:e.appId,platform:"pc"};i&&(c.sessionid=i);const[u,p]=await Qr(Na(s,e,c,{"Content-Type":"text/plain;charset=utf-8"}));if(u||!p)return o.error("login","login error "+u),{errMsg:`${La.FAIL} ${u}`};const{session:l,data:d}=p;if(d){o.info("login","storage session start: "+Date.now());const e=await a.setEngineDataItem("TMA_Local_Session",l);o.info("login",`session store result: ${e}, time: ${Date.now()},${La.OK}`);const{code:t}=d;return{errMsg:La.OK,code:t}}return o.info("login","data is null "+La.FAIL),{errMsg:La.FAIL}}catch(e){return o.error("login","login error "+(e&&e.message)),{errMsg:`${La.FAIL} ${e}`}}},Da={[f.BLOCK]:ka,[f.GADGET]:ka,[f.H5]:ka},Ua=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return Da[n]?Da[n](e,t):(o.info("login","login does not exist"),{errMsg:lo("login")})};async function Ka(e,t,n){const r=xo(t),o=Do(n,t);r.info(e,"get session");const[a,i]=await Qr(o.getEngineDataItem("TMA_Local_Session"));return a?(r.info(e,"get session error "+a),""):(r.info(e,"get session end and session length is: "+(i&&i.length)),i)}const{isFeatureEnabled:xa}=Ao;const Fa=[f.GADGET,f.H5];function Ha(e){if(-1===Fa.indexOf(e))return!1;return P(bt.OPENPLATFORM_SCOPE_USER_INFO,!0)}const ja=new Map;function Ba(e,t){xo(t).info("getUserInfo",e)}const Ga=async function(e,t){const{appKey:n,engineType:r}=t,o=_o("getUserInfo");if(Ha(r)){Ba("start to authorize userInfo",n);const e=await async function(e,t){const{scope:n}=e;if("string"!=typeof e.scope)return{errMsg:"authorize:fail params.scope can not be empty",authorized:!1};const r=n.replace("scope.","");if(!xa(bt.OPEN_APP_BADGE)&&r===Co.APP_BADGE)return{errMsg:"authorize:fail invalid scope",authorized:!1};const o="authorize",a=_o(o),i=await Wo(t),{uniqueId:s,appName:c,appId:u,appKey:p,engineType:l}=i,d=xo(p),h=Uo(u,l);return Ho({key:"api_invoke_authorize",type:"tea",value:{app_id:s,appname:c,application_type:"MP",authorize_scope:r}}),new Promise(async e=>{if(!await h.isValidUserScope(r))return d.info(o,"permission authorize invalid scope"),e({errMsg:a.FAIL+" invalid scope",authorized:!1}),void Ho({key:"api_authorize_callback",type:"tea",value:{app_id:s,appname:c,application_type:"MP",authorize_scope:r,authorize_status:"null"}});const n=await h.getUserPermissionByKey(r)||{auth:void 0};if(n.auth)return d.info(o,`${a.OK} authorized: ${n.auth}`),e({errMsg:a.OK,authorized:!0}),void Ho({key:"api_authorize_callback",type:"tea",value:{app_id:s,appname:c,application_type:"MP",authorize_scope:r,authorize_status:"approved"}});let i=!1;if(void 0===n.auth){d.info(o,"callHostApi showPermissionRequestDialog start"),Ho({key:"api_authorize_callback",type:"tea",value:{app_id:s,appname:c,application_type:"MP",authorize_scope:r}});const[n,u]=await Qr(Xo(t,"showPermissionRequestDialog",{scope:r,appName:c}));if(n||!u)return d.info(o,"invoking shell layer showPermissionRequestDialog fail",n),void e({errMsg:a.FAIL+" auth deny",authorized:!1});d.info(o,"callHostApi showPermissionRequestDialog end"),i=u.code===Kr.SUCCESS,d.info(o,"permission authorize dialog, auth result:"+i),await h.updateUserPermissionAndSync(r,i)}else Object.is(n.auth,!1)&&l!==f.BLOCK&&("appBadge"!==r&&Xo(t,"showSettingGuideDialog",{scope:r,appName:c}),d.info(o,"permission authorize guide openSetting"));d.info(o,"permission authorize "+i),Ho({key:"api_authorize_callback",type:"tea",value:{app_id:s,appname:c,application_type:"MP",authorize_scope:r,authorize_status:i?"approved":"rejected"}}),e({errMsg:(i?a.OK:a.FAIL)+" auth deny",authorized:i})})}({scope:Co.USER_INFO},t);if(Ba("get authorize result: "+JSON.stringify(e),n),!e||!e.authorized)return Ba("have no userInfo auth",n),{errMsg:o.FAIL+",have no auth"}}try{const{larkVersion:a}=await Ma();Ba("getStartParams",n);const i=await Wo(t);Ba("get session",n);const s=await Ka("getUserInfo",n,r),{appUrl:c}=Ao.getMiniProgramUrl(),u=c+(r===f.H5?"/jssdk/getUserInfo":"/getUserInfo"),p={appid:i.appId,withCredentials:!0,app_version:a,platform:"pc",session:s};ja.has(s)||ja.set(s,Na(u,i,p,{"Content-Type":"text/plain;charset=utf-8"}));const[l,d]=await Qr(ja.get(s));if(l||!d)return Ba(`userInfo: ${o.FAIL} ${l}`,n),ja.delete(s),{errMsg:`${o.FAIL} ${l}`};const{error:h}=d;if(0===h){Ba("userInfo: "+o.OK,n);const t=function(e,t){const n={};return t.forEach(t=>{n[t]=e[t]}),n}(d,e.withCredentials?["userInfo","rawData","signature","iv","encryptedData"]:["userInfo","rawData"]);return Object.assign({errMsg:o.OK},t)}return Ba("get fail, error is: "+h,n),ja.delete(s),{errMsg:`${o.FAIL} ${h}`}}catch(e){return Ba("getUserInfo error "+(e&&e.message),n),{errMsg:`${o.FAIL} ${e&&e.message}`}}},Va=async function(e,t){const n="getUserInfoEx",r=xo(t.appKey);try{if(!Ao.getUserInfoEx)return r.error(n,"host not register getUserInfoEx"),{errMsg:lo(n)};r.info(n,"getUserInfoEx on host start");const e=await Ao.getUserInfoEx(t);return void 0===e?(r.info(n,"getUserInfoEx on host fail"),{errMsg:lo(n)}):{errMsg:po(n),...e}}catch(e){return r.info(n,"catch error: "+(e&&e.message)),{errMsg:lo(n)}}},Wa={[f.BLOCK]:Ga,[f.GADGET]:Ga,[f.H5]:Ga},qa=(f.BLOCK,f.GADGET,f.H5,async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return Wa[n]?Wa[n](e,t):(o.info("getUserInfo","getUserInfo does not exist"),{errMsg:lo("getUserInfo")})});function $a(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let n=0;n<16;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}const{getSessionIdAsync:Qa,getDomain:za}=Ao;async function Ya(e,t,n,r){const{larkVersion:o}=await Ma(),{appUrl:a}=Ao.getMiniProgramUrl(),i=a+e,s={key:$a(),initVector:$a()},c={app_version:o,platform:"pc",ttcode:await async function(e,t){return zr("getTTCode",{key:e,iv:t})}(s.key,s.initVector),appid:t};return r===f.H5?c.h5Session=n:c.session=n,{params:c,url:i,decryptParams:s}}function Ja(e,t){const n={};return e===f.H5?n["Session-Type"]="h5_session":n["Session-Type"]="mina_session",n["Session-Value"]=t,n}const Xa=_o("enterProfile");function Za(e,t){xo(t).info("enterProfile",e)}const ei=async(e,t)=>{const{appKey:n,engineType:r}=t;Za("getAppBaseInfo",n);const o=await Wo(t),a=await Ka("enterProfile",n,r),i=Date.now(),[s,c={}]=await Qr(async function(e,t,n){const{appId:r,engineType:o}=t,{params:a,url:i,decryptParams:s}=await Ya(I.GET_USERID_BY_OPENID,r,n,o),c=Ja(o,n),[u,p]=await Qr(Na(i,t,{...a,openid:e},c));if(u)return{code:Kr.FAIL,errMsg:""+u};const l=await Fo(p.encryptedData,s.key,s.initVector);if(l.code===Kr.FAIL)return{errMsg:l.msg,code:Kr.FAIL};try{const e=JSON.parse(l.result),{userid:t}=e;return{userId:t,code:Kr.SUCCESS}}catch(u){return{errMsg:"getUserIdByOpenId decrypted json parse fail "+u,code:Kr.FAIL}}}(e.openid,o,a));if(Za("getUserIdByOpenId end",n),s||c.code!==Kr.SUCCESS)return Za("enterProfile fail: invoke getUserIdByOpenId fail "+(s||c.errMsg||""),n),{errMsg:Xa.FAIL+" get userid fail"};const{userId:u}=c,{left:p,top:l,pageLeft:d,pageTop:h,unCoverArea:_,sideOfUnCoverArea:f}=e,g={userId:u,left:p||0,top:l||0,pageLeft:d||0,pageTop:h||0,sideOfUnCoverArea:f||"right"};_&&(g.unCoverArea=_);try{Za("ready for invoking container enterProfile",n);const e=await Xo(t,"showProfile",g);Za("callContainer enterProfile end res："+e,n);if(fo("showProfile",e&&e.errMsg)!==Aa.OK){return Za(`callContainer enterProfile fail ${e&&e.errMsg||""}}`,n),{errMsg:Xa.FAIL+" enterProfile request error "}}const r=Date.now()-i;return Za("time: "+String(r),n),{errMsg:Xa.OK}}catch(e){return Za("catch error: "+e,n),{errMsg:Xa.FAIL}}},ti={[f.GADGET]:ei,[f.BLOCK]:ei,[f.H5]:ei},ni=async(e,t)=>{const n=xo(t.appKey),{engineType:r}=t;return ti[r]?ti[r](e,t):(n.info("enterProfile","enterProfile does not exist"),{errMsg:lo("enterProfile")})};async function ri(e,t){try{const{appId:n,engineType:r}=await Wo(e),o=Uo(n,r),a=await o.getOrgPermissionInfo()||{};return 0===Object.keys(a).length||!!Object.prototype.hasOwnProperty.call(a,t)&&Boolean(a[t].auth)}catch(e){return!0}}var oi;!function(e){e[e.chatter=0]="chatter",e[e.department=3]="department"}(oi||(oi={}));const ai=_o("chooseContact"),ii=async(e,t)=>{const{multi:n=!0,ignore:r=!1,externalContact:o=!0,chosenIds:a,enableChooseDepartment:i=!1,maxNum:s,limitTips:c,choosenIds:u,disableChoosenIds:p,disableChosenIds:l}=e,d=await Wo(t),{appKey:h,engineType:_}=t,{uniqueId:f}=d,g=xo(h);g.info("chooseContact","get session start");const E=await Ka("chooseContact",h,_);g.info("chooseContact","get session end");const m=a||u||[],y=l||p||[],A=[...m,...y];let T=[],S=[];if(A.length){g.info("chooseContact","getUserIdsByOpenIds start");const[e,t={}]=await Qr(async function(e,t,n){const{appId:r,engineType:o}=t,{params:a,url:i,decryptParams:s}=await Ya(I.GET_USERIDS_BY_OPENIDS,r,n,o),c=Ja(o,n),[u,p]=await Qr(Na(i,t,{...a,openids:e},c));if(u)return{code:Kr.FAIL,errMsg:""+u};const l=await Fo(p.encryptedData,s.key,s.initVector,e);if(l.code===Kr.FAIL)return{errMsg:l.msg,code:Kr.FAIL};try{return{userIds:JSON.parse(l.result).userids,code:Kr.SUCCESS}}catch(e){return{errMsg:"decrypted json parse fail "+e,code:Kr.FAIL}}}(A,d,E));g.info("chooseContact","getUserIdsByOpenIds end");let n={};t.code!==Kr.SUCCESS?g.info("chooseChat","Transform chosenIds and disableChosenIds into userIds fail, error:"+(e||t.errMsg||"")):n=t.userIds||{},T=m.map(e=>n[e]).filter(e=>e),S=y.map(e=>n[e]).filter(e=>e)}const v={multiSelect:n,maxSelectedNum:s,limitTips:c,ignoreSelf:r,defaultList:T,disableList:S,organizationEnable:!0,withExternal:o,enableChooseDepartment:i};g.info("chooseContact",`ready for invoking showMemberSelect,options:${v},params:${e}`);const[R,O={}]=await Qr(Xo(t,"showChooseContact",v));g.info("chooseContact","appInfo callContainer showMemberSelect end");const C=await ri(t,Oo.CONTACT_INFO);if(Ho({type:"slardar",key:"mp_organization_api_invoke",value:{app_id:f,api_name:"chooseContact",auth_name:Oo.CONTACT_INFO,has_auth:C}}),void 0===O.errMsg||Eo(O.errMsg,Ir))return g.info("chooseContact","chooseContact:fail, member Select failed! error:"+(R||"")),{errMsg:ai.FAIL};if(go(O.errMsg,Ir)){const e=O.data,t=[],n=e.map(e=>{if(e.entityType!==oi.department)return e.id;t.push(e.id)}).filter(e=>e),r={};if(i){let e;if(t.length){const n=await async function(e,t,n){const{appId:r,engineType:o}=t,{params:a,url:i,decryptParams:s}=await Ya(I.GET_OPEN_DEPARTMENT_IDS_BY_DepIDS,r,n,o),c=Ja(o,n),[u,p]=await Qr(Na(i,t,{...a,depids:e},c));if(u)return{code:Kr.FAIL,errMsg:""+u};try{const t=await Fo(p.encryptedData,s.key,s.initVector,e);if(t.code===Kr.FAIL)return{errMsg:t.msg,code:Kr.FAIL};const n=JSON.parse(t.result),{openDepIDs:r}=n;return{code:Kr.SUCCESS,openDepartmentIds:r}}catch(e){return{errMsg:"getOpenDepIDsByDepIDs decrypted json parse fail "+e,code:Kr.FAIL}}}(t,d,E);if(n.code===Kr.SUCCESS){const t=n.openDepartmentIds||{};e=Object.keys(t).map(e=>({departmentId:e,openDepartmentId:t[e]}))}else g.info("chooseContact","chooseContact fail: invoke openDepartmentIds fail "+(n.errMsg||""));e&&e.length>0?r.department_data=e:r.department_data=[]}else r.department_data=[]}if(!n.length&&r.department_data&&r.department_data.length>0)return{...r,errMsg:ai.OK,data:[]};if(!(n.length||r.department_data&&r.department_data.length))return g.info("chooseContact","chooseContact fail,user has not selected any one."),{...r,errMsg:ai.FAIL+",user has not selected any one."};g.info("chooseContact","getOpenUserSummary start");const[o,a={}]=await Qr(async function(e,t,n){const{appId:r,engineType:o}=t,{params:a,url:i,decryptParams:s}=await Ya(I.GET_OPEN_USER_SUMMARY,r,n,o),c=Ja(o,n),[u,p]=await Qr(Na(i,t,{...a,userids:e},c));if(u)return{code:Kr.FAIL,errMsg:""+u};const l=await Fo(p.encryptedData,s.key,s.initVector,e);if(l.code===Kr.FAIL)return{errMsg:l.msg,code:Kr.FAIL};try{const e=JSON.parse(l.result);return{openUserSummary:e.open_user_summary,code:Kr.SUCCESS}}catch(e){return{errMsg:"getOpenUserSummary decrypted json parse fail "+e,code:Kr.FAIL}}}(n,d,E));if(g.info("chooseContact","getOpenUserSummary end"),a.code!==Kr.SUCCESS)return g.info("chooseContact","chooseContact fail: invoke getOpenUserSummary fail "+(o||a.errMsg||"")),{...r,errMsg:ai.FAIL+" get openId fail"};const{openUserSummary:s}=a;if("object"==typeof s){const e=[];return n.forEach(t=>{const n=s[t];if(n){const t=function(e,t,n){let r={openId:e.openid,unionId:e.union_id};return t?r=Object.assign(r,{avatarUrls:e.avatar_urls,i18nNames:e.i18n_name,name:e.name}):n.info("getContactInfoByAuth","getContactInfoByAuth no permission!!!"),r}(n,C,g);e.push(t)}else g.info("chooseContact",`chooseContact fail: userId: ${t} not in openUserSummary`)}),g.info("chooseContact","chooseContact:ok"),{...r,errMsg:ai.OK,data:e}}return g.info("chooseContact","chooseContact fail: get openId fail"),{...r,errMsg:ai.FAIL+" get openId fail"}}return g.info("chooseContact","chooseContact cancel"),{errMsg:"chooseContact:cancel"}},si={[f.GADGET]:ii,[f.BLOCK]:ii,[f.H5]:ii},ci=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return si[n]?si[n](e,t):(o.info("chooseContact","chooseContact does not exist"),{errMsg:lo("chooseContact")})},ui=_o("chooseChat"),pi=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r),{ignoreSelf:a=!1,multiSelect:i=!1,selectType:s=jr.ALL_CHATS,externalChat:c=!0,allowCreateGroup:u=!1,choosenIds:p,disableChoosenIds:l,chosenIds:d,disableChosenIds:h,showMessageInput:_=!1}=e;let{confirmTitle:f,confirmDesc:g}=e;"string"!=typeof f&&(o.info("chooseChat","type of params.confirmTitle is not string"),f=""),"string"!=typeof g&&(o.info("chooseChat","type of params.confirmDesc is not string"),g="");const E=await Wo(t),m=await Ka("chooseChat",r,n);let y=[],A=[];const T=d||p||[],S=h||l||[],v=[...T,...S];if(v.length){let e={};const t=await async function(e,t,n){const{appId:r,engineType:o}=t,{params:a,url:i,decryptParams:s}=await Ya(I.GET_CHATIDS_BY_OPENCHATIDS,r,n,o),c=await Qa(),u={cookie:"session="+c,"X-Session-id":c,...Ja(o,n)},[p,l]=await Qr(Na(i,t,{open_chatids:e,...a},u));if(p)return{code:Kr.FAIL,errMsg:""+p};const d=await Fo(l.encryptedData,s.key,s.initVector,e);if(d.code===Kr.FAIL)return{errMsg:d.msg,code:Kr.FAIL};try{const e=JSON.parse(d.result),{chatids:t}=e;return{code:Kr.SUCCESS,chatIds:t}}catch(e){return{errMsg:"getChatIdsByOpenChatIds decrypted json parse fail "+e,code:Kr.FAIL}}}(v,E,m);t.code!==Kr.SUCCESS?o.info("chooseChat","invoke getUserIdsByOpenIds api fail",t.errMsg||""):e=t.chatIds||{},y=T.map(t=>e[t]).filter(e=>e),A=S.map(t=>e[t]).filter(e=>e)}const R=await ri(t,Oo.CHAT_INFO),{appId:O}=E;let C;switch(Ho({type:"slardar",key:"mp_organization_api_invoke",value:{app_id:O,api_name:"chooseChat",auth_name:Oo.CHAT_INFO,has_auth:R}}),Number(s)){case jr.GROUP_CHATS:C=co.GROUP_CHATS;break;case jr.P2P_CHATS:C=co.P2P_CHATS;break;case jr.ALL_CHATS:default:C=c?co.ALL_CHATS:co.WITHOUT_CROSS_TENANT_CHATS}o.info("chooseChat","chooseChat: info modalType "+C);const P={multiSelect:i,maxSelectedNum:10,selectType:C,ignoreSelf:a,title:f,description:g,withExternal:c,defaultList:y,disableList:A,allowCreateGroup:u,showAddMessage:_},w={};o.info("chooseChat",`ready for invoking showChooseChat,options:${P},params:${e}`);const[b,N={}]=await Qr(Xo(t,"showChooseChat",P));if(N.addMessage&&(w.message=N.addMessage),void 0===N.errMsg||Eo(N.errMsg,Cr))return o.info("chooseChat","chooseChat:fail, member Select failed! error:"+(b||"")),{...w,errMsg:ui.FAIL};if(go(N.errMsg,Cr)){const e=N.data,t=e.map(e=>({chatid:e.id,type:e.type}));if(!t.length)return o.info("chooseChat","chooseChat fail,user has not selected any one"),{...w,errMsg:ui.FAIL+",user has not selected any one"};o.info("chooseChat","getOpenChatIdsByChatIds start");const[n,r]=await Qr(async function(e,t,n){const{appId:r,engineType:o}=t,{params:a,url:i,decryptParams:s}=await Ya(I.GET_OPENCHATIDS_BY_CHATIDS,r,n,o),c=Ja(o,n),[u,p]=await Qr(Na(i,t,{...a,chats:e},c));if(u)return{code:Kr.FAIL,errMsg:""+u};const l=e.map(e=>e.chatid),d=await Fo(p.encryptedData,s.key,s.initVector,l);if(d.code===Kr.FAIL)return{errMsg:d.msg,code:Kr.FAIL};try{const e=JSON.parse(d.result),{openchatids:t}=e;return{code:Kr.SUCCESS,openChatIds:t}}catch(e){return{errMsg:"getChatIdByOpenId decrypted json parse fail "+e,code:Kr.FAIL}}}(t,E,m));if(o.info("chooseChat","getOpenChatIdsByChatIds end"),n||!r||r.code===Kr.FAIL)return o.info("chooseChat","chooseChat fail: invoke getOpenChatIdsByChatIds fail"),{...w,errMsg:ui.FAIL+"get openChatIds fail"};const{openChatIds:a}=r;if("object"==typeof a){const t=e.map((function(e){const t=a[e.id];if(!t)return;const n={id:t.open_chat_id,chatType:e.type};if(!R)return n;const r={avatarUrls:t.chat_avatar_urls,name:t.chat_name,i18nNames:t.chat_i18n_names};return Object.assign(n,r)})).filter(e=>e);return o.info("chooseChat","chooseChat:ok"),{...w,errMsg:ui.OK,data:t}}return o.info("chooseChat","chooseChat fail: get openChatId fail"),{...w,errMsg:ui.FAIL+"get openChatId fail"}}return o.info("chooseChat","chooseChat cancel"),{...w,errMsg:"chooseChat:cancel"}},li={[f.BLOCK]:pi,[f.GADGET]:pi,[f.H5]:pi},di=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return li[n]?li[n](e,t):(o.info("chooseChat","chooseChat does not exist"),{errMsg:lo("chooseChat")})},hi=async(e,t)=>{const{appKey:n,engineType:r}=t,o=await Wo(t),a=xo(n),{locale:i,host:s,platform:c,osVersion:u,platformVersion:p,appName:l,osArchitecture:d,blockitVersion:h}=no("getHostConfig"),_=no("getCurrentTheme",{appKey:n});a.info("getSystemInfo","start to callHostApi getSystemInfo");const[g,E]=await Qr(Xo(t,"getSystemInfo"));if(g||!E||mo(E.errMsg,"getSystemInfo"))return a.info("getSystemInfo",`callHostApi getSystemInfo fail, ${E&&E.errMsg},error: ${g}`),{errMsg:lo("getSystemInfo")};let m;if(a.info("getSystemInfo","call host result: "+JSON.stringify(E)),r===f.BLOCK){let e=12;try{const t=window.getComputedStyle(document.body,null).getPropertyValue("font-size");e=Number(t.substr(0,t.length-2))}catch(t){e=12,a.error("getSystemInfo","get font size fail error "+t)}m={errMsg:"getSystemInfo:ok",platform:v.includes(c)?c:v[0],host:s,language:i,blockitVersion:h,packageVersion:o.appVersion,screenWidth:E.screenWidth,screenHeight:E.screenHeight,windowWidth:E.windowWidth,windowHeight:E.windowHeight,brand:"PC",model:"PC",theme:_,pixelRatio:E.devicePixelRatio||1,fontSizeSetting:e}}else m={errMsg:"getSystemInfo:ok",system:u,platform:c,appName:l,host:s,version:p,language:i,SDKVersion:o.sdkVersion,gadgetVersion:o.appVersion,blockitVersion:h,screenWidth:E.screenWidth,screenHeight:E.screenHeight,windowWidth:E.windowWidth,windowHeight:E.windowHeight,pixelRatio:E.devicePixelRatio||1,statusBarHeight:E.statusBarHeight,safeArea:E.safeArea,navigationBarSafeArea:E.navSafeArea,brand:"PC",model:"PC",fontSizeSetting:12,theme:_,osArchitecture:d};return m},_i={[f.GADGET]:hi,[f.H5]:hi,[f.BLOCK]:hi},fi=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return _i[n]?await _i[n](e,t):(o.info("getSystemInfo","getSystemInfo does not exist"),ho("getSystemInfo"))},gi=async(e,t)=>{const n=t.node;let r=0,o=0;if(n){const e=n.getRoot();o=e&&e.clientHeight||0,r=e&&e.clientWidth||0}return{errMsg:"getHostInfo:ok",viewWidth:r,viewHeight:o}},Ei=async(e,t)=>{const n=xo(t.appKey),r=e.name,o=await Xo(t,r);return o&&o.code===Kr.FAIL?(n.info("triggerHostOnEvent",r+" not register"),{errMsg:"triggerHostOnEvent:fail host not register"}):{errMsg:"triggerHostOnEvent:ok"}},mi=async(e,t)=>(Yo.offHostEventsByName(t.appKey,e.name),{errMsg:"offHostOnEvent:ok"});var yi;!function(e){e.ON_APP_ROUTE="onAppRoute",e.GENERATE_FUNC_READY="generateFuncReady",e.ON_RESOURCE_CHANGE="onResourceChange",e.ON_APP_DESTROY="onAppDestroy",e.ON_VIEW_RESIZE="onViewResize",e.ON_HOST_API_REGISTER="onHostApiRegister",e.ON_APP_INACTIVATE="onAppInactivate",e.ON_APP_ENTER_FOREGROUND="onAppEnterForeground",e.ON_APP_ENTER_BACKGROUND="onAppEnterBackground",e.ON_TYPED_MESSAGE="onTypedMessage"}(yi||(yi={}));var Ai=n(207);const Ti=new Map,Si=new Map;function vi(e,t,n){const r=Si.get(e);if(!r)return!0;const{height:o,width:a}=r;return o!==t||a!==n}const Ri=(e,t)=>{const{appKey:n,push:r}=t,o=xo(n);if(Ti.has(n))return{errMsg:"onViewResize:ok"};const a=t.node,i=a&&a.getRoot();if(i){const e=new Ai.a(L()(e=>{for(const t of e){const{width:e,height:o}=t.contentRect||t.target.getBoundingClientRect();vi(n,o,e)&&(Si.set(n,{height:o,width:e}),r(yi.ON_VIEW_RESIZE,{width:e,height:o}))}},40));return Ti.set(n,e),e.observe(i),{errMsg:"onViewResize:ok"}}return o.error("onViewResize","onViewResize: getComponentByAppKey empty"),{errMsg:"onViewResize:fail"}},Oi=(e,t)=>{const{appKey:n}=t,r=Ti.get(n);Ti.delete(n),Si.delete(n);const o=t.node,a=o&&o.getRoot();return a&&r&&r.unobserve(a),{errMsg:"offViewResize:ok"}};var Ci,Ii;!function(e){e.MODE_SIDEBAR="sidebar-semi",e.MODE_WINDOW="window",e.MODE_APP_CENTER="appCenter",e.MODE_FEED="feed",e.MODE_NAV="navApplication",e.MODE_WINDOW_SEMI="window-semi"}(Ci||(Ci={})),function(e){e.MODE_WORK_PLACE="workplace",e.MODE_WINDOW="window",e.MODE_NAV="nav",e.MODE_FAST_NAV="fastNav",e.MODE_SIDE_BAR="sidebar"}(Ii||(Ii={}));const Pi=[Ci.MODE_SIDEBAR,Ci.MODE_WINDOW_SEMI],wi=[Ci.MODE_APP_CENTER,Ci.MODE_FEED,Ci.MODE_NAV,Ci.MODE_WINDOW];var bi;!function(e){e.CLONE="clone",e.ACTIVATE="activate"}(bi||(bi={}));const Ni=Ci.MODE_APP_CENTER,{getDocDomains:Mi,isAppLinkUrl:Li}=Ao;async function ki(e){return await Li(e)&&e.includes("/mini_program/open")}const{isFeatureEnabled:Di,isAppLinkUrl:Ui,getAppLinkDomain:Ki}=Ao,xi=_o("openSchema"),Fi=[Ci.MODE_SIDEBAR,Ci.MODE_WINDOW,Ci.MODE_APP_CENTER,Ci.MODE_WINDOW_SEMI];function Hi(e){const t=/(([^:]+:)\/\/(([^:\/\?#]+)(:\d+)?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/.exec(e)||[],n={};return["href","origin","protocol","host","hostname","port","pathname","search","hash"].forEach((function(e,r){n[e]=t[r]?t[r]:""})),n}const ji=async(e,t)=>{const n=Hi(t);let r=t;if(/^\/[0-9A-Za-z]+\/?$/.test("object"==typeof n&&n.pathname||"")){const n=await Wo(e),o=await async function(e,t){if(!e||"string"!=typeof e)return{code:Kr.FAIL};const n=za(R.OPEN),[r,o={}]=await Qr(Na(`https://${n}/open-apis/applink/longlink/v1/get`,t,{shortLink:e,businessTag:"pc_gadget"}));return r||0!==o.code||"object"!=typeof o.data?{code:Kr.FAIL}:{link:o.data.link,code:Kr.SUCCESS}}(t,n);o.code===Kr.SUCCESS&&o.link&&(r=o.link)}return Ui(r)},Bi=async(e,t)=>{const{appId:n,startPage:r,from:o,mode:a,appInfo:i,parentMode:s}=e;try{t.info("openSchema","start to invoke host regist method openSidebarApp.");return go((await Xo(i,"openSidebarApp",{appId:n,startPage:r,from:o,mode:a,parentMode:s})).errMsg,Lr)?(t.info("openSchema",xi.OK),{errMsg:xi.OK}):(t.info("openSchema",xi.FAIL+",invoked host regist method openSidebarApp fail"),{errMsg:xi.FAIL})}catch(e){return t.info("openSchema",`${xi.FAIL} ${e}`),{errMsg:`${xi.FAIL} ${e}`}}};async function Gi(e,t,n,r=!0){let o=e.url;if(!r&&/^https?/.test(o)){const t=await Ki(),n=new URL(`https://${t}/client/web_url/open`),r={...e};Object.keys(r).forEach(e=>{r[e]&&n.searchParams.append(e,r[e])}),o=n.href}let a="";try{a=new URL(o.trim()).protocol.toLowerCase()}catch(e){}if(["","native-resource:","file:","ssh:","javascript:"].includes(a))return t.error("openSchema","invalid protocol"),{errMsg:xi.FAIL+",invalid protocol"};t.info("openSchema","start to invoke host registed method windowOpen: "+o);const[i,s]=await Qr(Xo(n,"windowOpen",{url:o}));return i||!s?(t.error("openSchema","invoking host registed method windowOpen method fail "+i),{errMsg:xi.FAIL}):go(s.errMsg,Pr)?{errMsg:xi.OK}:(t.error("openSchema","invoking host registed method windowOpen method fail: "+s.errMsg),{errMsg:`${xi.FAIL},${s.errMsg}`})}async function Vi(e,t,n){const{from:r,appInfo:o,defaultMode:a,parentMode:i}=e;let s=e.url;if(n){const e=await async function(e){if(e&&e.indexOf("?")>=0){const t=e.split("?")[0];if(await ki(e))return e.replace(t,"lark://mini-program/open")}return e}(s);e&&(s=function(e){return e.indexOf("pc_path=")>=0?e.replace("pc_path=","startPage="):e.indexOf("path=")>=0?e.replace("path=","startPage="):e}(e))}let c=So("mode",s);if(c||(c=a||"",s+="&mode="+c),-1===Fi.indexOf(c))return t.info("openSchema",`${xi.FAIL} ${c} is not supported`),{errMsg:`${xi.FAIL} ${c} is not supported`};if(s=function(e,t){try{const n=Hi(e);let r=n.search;return t=encodeURIComponent(t),r+=""===r?"?from="+t:"&from="+t,n.origin+n.pathname+r+n.hash}catch(e){return""}}(s,r),c===Ci.MODE_SIDEBAR){const e=So("appId",s);let n=So("startPage",s);return Di(bt.API_GET_URL_QUERY)||(n=decodeURI(unescape(n))),Bi({appId:e,startPage:n,from:r,mode:c,appInfo:o,parentMode:i},t)}return await Gi({url:s},t,o)}async function Wi(e,t,n){const r=await Wo(t),{uniqueId:o,engineType:a,appKey:i}=r,s=Di(bt.OPENSCHEMA_WHITELIST_FOR_PC);if(n.info("openSchema","openschema:isQua:fg: "+s),!s)return!0;const c=function(e){return{requestAppMetaAndSaveIfNeed:async e=>zr("updateMeta",{appKey:e}),clearLocalMeta:async t=>zr("clearLocalMeta",{uniqueId:t,engineType:e}),getCurrentMeta:async e=>await zr("getCurrentMeta",{appKey:e})}}(a),[u,p]=await Qr(c.getCurrentMeta(i));if(u||!p)return n.warn("openSchema","openschema:isQualified get meta error "+u),!0;const l=p&&p.businessData,d=l&&l.openSchemaWhiteList||[];if(n.info("openSchema","openschema:isQua:fg:true "+d.length),!l.useOpenSchemaWhiteList||0===d.length)return!0;let h=!1;try{const t=new URL(e);let{protocol:n=""}=t;const{host:r=""}=t;n=n.replace(/:$/,"");for(let e=0;e<d.length;e++){const t=d[e]||{};let{appid:a,host:i,schema:s}=t;a="string"==typeof a&&a.trim()||void 0,i="string"==typeof i&&i.trim()||void 0,s="string"==typeof s&&s.trim()||void 0;const c=!i||i===r,u=!s||s&&s===n;if((!a||a===o)&&c&&u){h=!0;break}}return h}catch(e){return n.info("openSchema","openschema:isQualified  URI.parse error "+e),!1}}const qi=async(e,t)=>{const n=await Wo(t),{appKey:r,appName:o,runMode:a}=n,i=xo(r);if(!e||!e.schema)return i.info("openSchema",xi.FAIL+" params.schema cant not be empty"),{errMsg:xi.FAIL+" params.schema cant not be empty"};const{options:s={},schema:c}=e,u=t.engineType===f.BLOCK,p=!!u,{external:l=p}=e,{width:d,height:h}=s;let _=Ci.MODE_SIDEBAR;a===Ci.MODE_WINDOW_SEMI&&(_=Ci.MODE_WINDOW_SEMI);const g="other_mini_"+a;i.info("openSchema",`openSchema:info current url is [${c}], external: ${l}`);const E=await async function(e){return 0===e.indexOf("lark://mini-program/open")||ki(e)}(c),m=await ji(t,c);i.info("openSchema","openSchema: isApplink: "+Boolean(m));const y=await async function(e,t){const n=await Mi(e);if(Array.isArray(n)&&n.length){return new RegExp(`^(https?:\\/\\/)?([^/]+\\.)?(${n.map(e=>("("+e+")").replace(/\./g,"\\.")).join("|")})($|\\/)`).test(t)}return!1}(t,c);if(y&&i.info("openSchema","openSchema:info url is doc url"),0===c.indexOf("sslocal://microapp"))return async function({url:e,appInfo:t,from:n,defaultMode:r,parentMode:o},a){a.info("openSchema","openSchema:info url is microapp url");const i=So("app_id",e);let s=So("start_page",e);Di(bt.API_GET_URL_QUERY)||(s=decodeURI(unescape(s)));const c=So("mode",e)||r;if(-1===Fi.indexOf(c))return a.info("openSchema",`${xi.FAIL} ${c} is not supported`),{errMsg:`${xi.FAIL} ${c} is not supported`};if(!i)return a.info("openSchema",xi.FAIL+" app_id can not be empty"),{errMsg:xi.FAIL+" app_id can not be empty"};if(c===Ci.MODE_SIDEBAR)return await Bi({appId:i,startPage:s,from:n,mode:c,appInfo:t,defaultMode:r,parentMode:o},a);{const e=`lark://mini-program/open?mode=${c}&appId=${i}&startPage=${s}&from=${n}`;return await Gi({url:e},a,t)}}({from:g,url:c,appInfo:t,defaultMode:_,parentMode:a},i);if(E&&!u)return Vi({from:g,url:c,appInfo:t,defaultMode:_,parentMode:a},i,m);let A=!0;if(!(l||m||E||y))try{A=await Wi(c,t,i)}catch(e){i.error("openSchema","openSchema: isQualified error: "+e)}return i.info("openSchema","openschema:isOpenFlag "+A),A?Gi({url:c,width:d,height:h,title:o},i,t,!!m||l):(i.info("openSchema",xi.FAIL+" not in the white list"),{errMsg:xi.FAIL+" not in the white list"})},$i={[f.BLOCK]:qi,[f.H5]:qi,[f.GADGET]:qi},Qi=async(e,t)=>{const n=xo(t.appKey),{engineType:r}=t;return $i[r]?$i[r](e,t):(n.info("openSchema","openSchema does not exist"),{errMsg:lo("openSchema")})},zi="onRequestTaskStateChange",Yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ji="undefined"!=typeof globalThis?globalThis:window,Xi=Ji.btoa||function(e){let t="";for(let n,r,o=String(e),a=0,i=Yi;o.charAt(0|a)||(i="=",a%1);t+=i.charAt(63&n>>8-a%1*8)){if((r=o.charCodeAt(a+=.75))>255)throw new Error('"btoa" failed');n=n<<8|r}return t},Zi=Ji.atob||function(e){const t=String(e).replace(/=+$/,"");let n="";if(t.length%4==1)throw new Error('"atob" failed');for(let e,r,o=0,a=0;r=t.charAt(a++),r;~r&&(e=o%4?64*e+r:r,o++%4)?n+=String.fromCharCode(255&e>>(-2*o&6)):0)r=Yi.indexOf(r);return n};function es(e){let t="";const n=new Uint8Array(e),r=n.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(n[e]);return Xi(t)}function ts(e){return{base64:es(e)}}function ns(e){if(null!=e)return e.base64?function(e){const t=Zi(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r.buffer}(e.base64):void 0}function rs(e){return function(t){return Object.prototype.toString.call(t).toLowerCase()===("[object "+e+"]").toLowerCase()}}function os(e){return new Promise(t=>{const n=new FileReader;n.addEventListener("loadend",(function(){t(n.result)})),n.readAsArrayBuffer(e)})}var as,is={new:ts,get:ns,pack:function(e){if(!1===rs("Object")(e))return e;const t=[];for(const n in e){const r=e[n];if(void 0!==r&&r instanceof ArrayBuffer&&void 0!==r.byteLength){const e=ts(r);e.key=n,t.push(e)}}if(t.length>0){for(let n=0;n<t.length;n++){delete e[t[n].key]}e.__nativeBuffers__=t}return e},unpack:function(e){if(!1===rs("Object")(e)||null==e.__nativeBuffers__)return e;const t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(let n=0;n<t.length;n++){const r=t[n];if(null!=r){const t=ns(r);void 0!==t&&t instanceof ArrayBuffer&&(e[r.key]=t)}}return e},syncPack:function(e){return new Promise((function(t,n){if(!1===rs("Object")(e))return e;const r=[];for(const n in e){const o=e[n];if(void 0!==o&&o instanceof ArrayBuffer&&void 0!==o.byteLength){const e=ts(o);e.key=n,r.push(e)}else void 0!==o&&o instanceof Blob&&os(o).then((function(o){const a=ts(o);if(a.key=n,r.push(a),r.length>0){for(let t=0;t<r.length;t++){const n=r[t];delete e[n.key]}e.__nativeBuffers__=r}t(e)}))}}))}};!function(e){e.TEXT="text",e.ARRAY_BUFFER="arraybuffer",e.JSON="json"}(as||(as={}));const ss={OPTIONS:"OPTIONS",GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",DELETE:"DELETE",TRACE:"TRACE",CONNECT:"CONNECT"};var cs,us;function ps(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}!function(e){e.SUCCESS="success",e.FAIL="fail"}(cs||(cs={})),function(e){e[e.OK=1e4]="OK",e[e.UNKNOWN_ERROR=10013]="UNKNOWN_ERROR",e[e.EXCEED_LIMIT_TASK_NUMBER=20104]="EXCEED_LIMIT_TASK_NUMBER",e[e.INVALID_PARAM=20101]="INVALID_PARAM",e[e.TIME_OUT=20105]="TIME_OUT",e[e.ABORT=20106]="ABORT",e[e.TASK_NOT_EXIST=20109]="TASK_NOT_EXIST"}(us||(us={}));const ls=e=>{const t=new AbortController,n=function(e,t){const n=new URL(e),r=n.searchParams;return t&&Object.keys(t).forEach(e=>{r.append(e,encodeURIComponent(t[e]))}),n.toString()}(e.url,e.params),{timeout:r,responseType:o}=e,a={method:e.method,headers:Object.assign({"Content-Type":"text/plain;charset=utf-8"},e.headers),body:U(e.body)?JSON.stringify(e.body):e.body,signal:t.signal,credentials:e.withCredentials?"include":"omit"},i=fetch(n,a).then(async e=>{let t;return t=o===ut.ARRAY_BUFFER?await e.arrayBuffer():o===ut.BLOB?await e.blob():o===ut.JSON?await e.json():await e.text(),{data:t,status:e.status,statusText:e.statusText,headers:ps(e.headers)}}).catch(e=>{throw e});return i.abort=()=>t.abort(),i};let ds=0;const hs=Date.now();let _s="";async function fs(e,t){return function(e,t){const n=Date.now(),r=(ds++).toString(36).padStart(6,"0");return`02${n}${st(`${t||""}.${$a()}.${hs}.${e||""}`)}${r}`}(t,await async function(e){return _s||(_s=await Ao.getDeviceId(e)||$a()),_s}(e))}function gs(e={},t={}){return e[Ca.x_tt_logid]||t[Ca.x_tt_logid]||null}function Es(e,t){return`${e}-${t}`}const ms=new class{constructor(){p()(this,"requestTaskMap",void 0),p()(this,"taskLimitNumber",void 0),p()(this,"requestTaskNumber",void 0),this.taskLimitNumber=100,this.requestTaskNumber=0,this.requestTaskMap=Object.create(null)}async createRequestTask(e,t,n){const{engineType:r,appKey:o}=n,a="createRequestTask",i=xo(o),s=is.unpack(e||{}),{url:c,method:u=ct.GET,responseType:p,usePrefetchCache:l,header:d={},data:h,taskId:_}=s,g="number"==typeof _?_:-1;if(!c){const e=lo(a,"params.url cant not be empty");return i.info(a,e),{errMsg:e,requestTaskId:g,errCode:us.INVALID_PARAM}}if(r===f.GADGET&&Object.keys(this.requestTaskMap).length>=this.taskLimitNumber){const e=lo(a,"exceeds the maximum limit");return i.info(a,e),{errMsg:e,requestTaskId:g,errCode:us.EXCEED_LIMIT_TASK_NUMBER}}if(!Object.keys(ss).includes(u)){return{errMsg:lo(a,"method is invalid"),requestTaskId:g,errCode:us.INVALID_PARAM}}if(!function(e,t="http"){return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}(c)){return{errMsg:lo(a,"url is invalid"),requestTaskId:g,errCode:us.INVALID_PARAM}}const E=no("getAppConfig",{appKey:o}),m=await Wo(n),y=await async function(e,t,n){const{engineType:r}=t;if(r===f.BLOCK)return fs(t,n);const o=await fs(t,n);return Object.keys(e).forEach(t=>{const n=t.toLowerCase();n!==Ca.x_request_id&&n!==Ca.x_tt_logid||delete e[t]}),e[Ca.x_tt_logid]=o,e[Ca.x_request_id]=o,o}(d,n,m.appId),A={};Object.keys(d).forEach(e=>{"cookie"===e?A["x-devtools-request-cookie"]=d[e]:A[e]=d[e]});const T={url:c,method:u,headers:A,withCredentials:r!==f.BLOCK,responseType:p,timeout:E&&E.networkTimeout&&E.networkTimeout.request||6e4},S=+Date.now(),v=function(e,t){if(t)try{const n=no("getAppTracing",{appKey:e}).generateSpan();return Lt({name:St.MP_REQUEST_START}).setAppKey(e).addMap({[Rt.REQUEST_CHANNEL]:"native",[Rt.REQUEST_ID]:t,[Rt.REQUEST_VERSION]:"v1"}).tracing(n.traceId).flushWithThrottle(),n}catch(e){return}}(o,y);this.requestTaskNumber+=1;const R="number"==typeof _?_:this.requestTaskNumber,O=Es(o,R),C=e=>{delete this.requestTaskMap[O],e.isPrefetch?setTimeout(()=>{t(e)},0):t(e),function(e,t,n,r,o,a){if(!n||!r)return;const{url:i,method:s}=e,{code:c,errMsg:u,statusCode:p,isTimeout:l,isPrefetch:d,header:h}=t;try{Lt({name:St.MP_REQUEST_RESULT}).setAppKey(a).addMap({[Rt.REQUEST_CHANNEL]:"native",[Rt.METHOD]:s,[Rt.REQUEST_ID]:n,[Rt.LOGID_ID]:gs(h,e.headers),[Rt.PATH]:vo(i),[Rt.DOMAIN]:Ro(i),[Rt.HTTP_CODE]:p,[Rt.ERROR_MSG]:u,[Rt.IS_PREFETCH]:d?Ot.TRUE:Ot.FALSE,[Rt.FROM_REQUEST_START_DURATION]:+Date.now()-o,[Rt.REQUEST_VERSION]:"v1"}).setResultType(l?Ct.TIMEOUT:c===Pa.SUCCESS?Ct.SUCCESS:Ct.FAIL).tracing(r.traceId).flushWithThrottle()}catch{}}(T,e,y,v,S,o)};i.info(a,`fetch start: ${c}, stack length: ${Object.keys(this.requestTaskMap).length}`),u!==ct.GET&&(T.body=h);const I=function(e,t,n=!1){const{appKey:r,engineType:o}=t;if(e.headers=e.headers&&B(e.headers),o===f.BLOCK)return ls(e);if(n){if(no("isFirstPage",{appKey:r})){const t=no("getPrefetch",{appKey:r,requestParams:e});if(t)return t}}return ma.request(e)}(T,n,l);return this.requestTaskMap[O]=I,I.then(e=>{i.info(a,"fetch success: "+c),C({data:e.data,header:e.headers,isPrefetch:l?!!e.isPrefetch:void 0,requestTaskId:R,trace:y,statusCode:e.status,code:Pa.SUCCESS,state:cs.SUCCESS,ok:!0,cookies:e.cookies||[]})}).catch(e=>{i.info(a,`fetch error: ${e&&JSON.stringify(e)}, url: ${c}`);const t=e&&e.status;if(t>=200)i.info(a,`fetch error, status code: ${t}, url: ${c}`),C({data:e.data,header:e.headers,requestTaskId:R,trace:y,statusCode:e.status,code:Pa.SUCCESS,state:cs.SUCCESS,ok:!0,cookies:e.cookies||[]});else{const n=e&&e.response&&408===e.response.status||e&&"ECONNABORTED"===e.code,r=e&&e.message||"network error";i.info(a,`fetch failed, errMsg: ${r}, isTimeout: ${n}, url: ${c}`),C({requestTaskId:R,ok:!1,state:cs.FAIL,code:Pa.FAIL,trace:y,errMsg:r,statusCode:t||us.UNKNOWN_ERROR,isTimeout:n})}}),{errCode:us.OK,errMsg:"createRequestTask:ok",requestTaskId:R}}abortRequestTask(e,t){const n=Es(t,e),r=this.requestTaskMap[n],o=r&&r.abort;return"function"!=typeof o?{errCode:us.TASK_NOT_EXIST,errMsg:"abortRequestTask:fail, request task dose not exist"}:(o.call(r),delete this.requestTaskMap[n],{errCode:us.OK,errMsg:"abortRequestTask:ok"})}},ys=async(e,t)=>{const{push:n}=t;return await ms.createRequestTask(e,(function(e){n(zi,is.pack(e))}),t)},As=async(e,t)=>{const{operationType:n,requestTaskId:r}=e;return"abort"===n?ms.abortRequestTask(r,t.appKey):{errMsg:"operateRequestTask:fail illegal operationType",errCode:us.UNKNOWN_ERROR}};async function Ts(e,t){const{engineType:n,appKey:r}=t,o=xo(r),a=Do(n,r);o.info("clearStorage","invoke appStorage.clearStorage()");const[i,s]=await Qr(a.clearStorage());return o.info("clearStorage","invoke appStorage.clearStorage() result: "+s),i||void 0===s?(o.error("clearStorage",lo("clearStorage",""+i)),{errMsg:lo("clearStorage")}):{errMsg:po("clearStorage")}}const Ss={[f.GADGET]:Ts,[f.H5]:Ts,[f.BLOCK]:Ts};async function vs(e,t){const n=t.engineType;return Ss[n]?await Ss[n](e,t):ho("clearStorage")}async function Rs(e,t){const{engineType:n,appKey:r}=t,o=xo(r),a=Do(n,r);if("object"!=typeof e||"string"!=typeof e.key||""===e.key)return qo(jo.INVALID_PARAMETER,"setStorage");e.data||(e.data=void 0,e.dataType="undefined");const i=JSON.stringify({data:e.data,dataType:e.dataType});o.info("setStorage",`storage dataType: (${e.dataType})`);const s=await async function(e,t){const[n,r]=await Qr(t.getStorageLength());return n?(e.error("getStorageLength",lo("getStorageLength",""+n)),0):Math.ceil(r/1024)}(o,a);if(0===s)return qo(jo.UNKNOWN_ERROR,"setStorage");const c=i.length/1024;if(c>1024){const e=qo(Go,"setStorage");return o.error("setStorage",e.errMsg),e}if(s+c>10240){const e=qo(Vo,"setStorage");return o.error("setStorage",e.errMsg),e}o.info("setStorage",`invoke appStorage.setItem(${e.key})`);const[u,p]=await Qr(a.setItem(e.key,i));return o.info("setStorage","invoke appStorage.setItem result: "+p),u||!p?(o.error("setStorage",lo("setStorage",""+u)),qo(jo.UNKNOWN_ERROR,"setStorage")):{errMsg:po("setStorage")}}const Os={[f.GADGET]:Rs,[f.H5]:Rs,[f.BLOCK]:Rs};async function Cs(e,t){const n=t.engineType;return Os[n]?await Os[n](e,t):ho("setStorage")}async function Is(e,t){const{engineType:n,appKey:r}=t,o=xo(r),a=Do(n,r);if("object"!=typeof e||!e.key)return qo(jo.INVALID_PARAMETER,"getStorage");if(!await async function(e,t,n){const[r,o=[]]=await Qr(t.getStorageKeys());return r?(n.error("getStorageKeys",lo("getStorageKeys",""+r)),!1):-1!==o.indexOf(e)}(e.key,a,o))return qo(Bo,"getStorage");o.info("getStorage",`invoke appStorage.getItem(${e.key})`);const[i,s]=await Qr(a.getItem(e.key));if(i||!s)return o.error("getStorage",lo("getStorage",""+i)),qo(jo.UNKNOWN_ERROR,"getStorage");try{const{dataType:e,data:t}=JSON.parse(s);return{data:t,dataType:e,errMsg:po("getStorage")}}catch(e){return o.error("getStorage","parse result fail"),qo(jo.UNKNOWN_ERROR,"getStorage")}}const Ps={[f.GADGET]:Is,[f.H5]:Is,[f.BLOCK]:Is};async function ws(e,t){const n=t.engineType;return Ps[n]?await Ps[n](e,t):ho("getStorage")}async function bs(e,t){const{engineType:n,appKey:r}=t,o=xo(r),a=Do(n,r);if("object"!=typeof e||!e.key)return qo(jo.INVALID_PARAMETER,"removeStorage");if(!await async function(e,t,n){const[r,o=[]]=await Qr(t.getStorageKeys());return r?(n.error("getStorageKeys",""+r),!1):-1!==o.indexOf(e)}(e.key,a,o)){return await Mo(uo.removeStorage_key_not_found)?{errMsg:po("removeStorage")}:{errMsg:lo("removeStorage","key not found")}}o.info("removeStorage",`invoke appStorage.removeItem(${e.key})`);const[i,s]=await Qr(a.removeItem(e.key));return o.info("removeStorage","invoke appStorage result: "+s),i||!s?(o.error("removeStorage",lo("removeStorage",""+i)),qo(jo.UNKNOWN_ERROR,"removeStorage")):{errMsg:po("removeStorage")}}const Ns={[f.GADGET]:bs,[f.H5]:bs,[f.BLOCK]:bs};async function Ms(e,t){const n=t.engineType;return Ns[n]?await Ns[n](e,t):ho("removeStorage")}async function Ls(e,t){const{engineType:n,appKey:r}=t,o=xo(r),a=Do(n,r),[i,s=[]]=await Qr(a.getStorageKeys());if(i)return o.error("getStorageInfo",lo("getStorageInfo",""+i)),qo(jo.UNKNOWN_EXCEPTION,"getStorageInfo");o.info("getStorageInfo","invoke appStorage.getStorageLength");const c=await Qr(a.getStorageLength()),u=c[0];let p=c[1];return o.info("getStorageInfo","invoke appStorage.getStorageLength size: "+p),u||void 0===p?(o.error("getStorageInfo",lo("getStorageInfo",""+i)),qo(jo.UNKNOWN_EXCEPTION,"getStorageInfo")):(p=Math.ceil(p/1024),{keys:s,currentSize:p,limitSize:10240,errMsg:po("getStorageInfo")})}const ks={[f.GADGET]:Ls,[f.H5]:Ls,[f.BLOCK]:Ls};async function Ds(e,t){const n=t.engineType;return ks[n]?await ks[n](e,t):ho("getStorageInfo")}async function Us(e,t){const n="getStorageData",{engineType:r,appKey:o}=t,a=xo(o),i=Do(r,o);a.info(n,"invoke appStorage.getStorageData()");const[s,c]=await Qr(i.getStorageData());if(a.info(n,"invoke appStorage.getStorageData() result: "+c),s||void 0===c)return a.error(n,lo(n,""+s)),{errMsg:lo(n)};return{data:c,errMsg:po(n)}}const Ks={[f.GADGET]:Us,[f.H5]:Us,[f.BLOCK]:Us};async function xs(e,t){const n=t.engineType;return Ks[n]?await Ks[n](e,t):ho("getStorageData")}const Fs=async function(e,t){if(e&&void 0!==e.state){const{appKey:n}=t,r=no("getActivateOperate",{appKey:n});return r?(r.setState(e.state),{errMsg:"saveState:ok"}):{errMsg:"saveState:fail not support"}}return{errMsg:"saveState:fail state is required"}},Hs=async function(e,t){if(!e||!e.sourceMeta&&!e.blockID)return{errMsg:"setBlockInfo:fail sourceMeta or blockID is required"};Dt.callParallel(Ut.ON_SUBMIT,{blockInfo:e},t.appKey);return{errMsg:"setBlockInfo:ok"}},js=async function(e,t){return Dt.callParallel(Ut.ON_CANCEL_CREATOR,{},t.appKey),{errMsg:"cancel:ok"}};const Bs=async function(e,t){const{appKey:n}=t,r=xo(n),{monitorEvents:o=[],withLog:a=!0}=e;return o.forEach(e=>{const{name:t,metrics:o={},categories:i={},platform:s}=e,c={...o,...i};(function(e,t){const n=no("getAppTracing",{appKey:t});return Lt(e).setAppKey(t).setTracing(n)})({name:t},n).addMap(c).setPlatform(s).flush();let u;switch(c[xe.d.monitorLevel]){case xe.e.warn:u="warn";break;case xe.e.error:u="error";break;default:u="info"}const p="monitor_event : "+t;a&&r[u]("monitorReport",p)}),{errMsg:"monitorReport:ok"}},Gs=new Map;function Vs({key:e}){return Gs.get(e)}let Ws=0;const qs=["play","ended","stop","pause","error","waiting"],$s={play:"play",ended:"ended",stop:"stop",pause:"pause",error:"error",waiting:"waiting"};class Qs{constructor(){p()(this,"_instance",void 0),p()(this,"_stateCallbacks",void 0),p()(this,"_audioId",void 0),p()(this,"_push",void 0),this._instance=new Audio,this._audioId=String(++Ws),this._stateCallbacks=[],this.initListener()}async play(){if(!this._instance.src)return"empty src attribute";try{return await this._instance.play(),""}catch(e){return this.emit({state:"error",data:e,errMsg:""+e}),""+e}}pause(){if(this._instance.paused)return"";try{return this._instance.pause(),""}catch(e){return this.emit({state:"error",data:e,errMsg:""+e}),""+e}}stop(){return this._instance.currentTime=0,this.pause(),this.emit({state:"stop"}),""}seek(e){if("number"!=typeof e)return"position should be number,not "+typeof e;try{return this._instance.currentTime=e/1e3,""}catch(e){return this.emit({state:"error",data:e,errMsg:""+e}),""+e}}initListener(){qs.forEach(e=>{"stop"!==e&&this._instance.addEventListener(e,t=>{const n="error"===e?""+(t.target&&t.target.error&&t.target.error.message||"unknown error"):"";this.emit({state:$s[e],data:t,errMsg:n})})}),this._instance.addEventListener("timeupdate",e=>{this._instance&&this.pushEvent("onAudioPropertyChange",{audioId:this._audioId,currentTime:1e3*this._instance.currentTime})}),this.onAudioChange(({audioId:e,state:t,errMsg:n})=>{this.pushEvent("onAudioStateChange",{state:t,audioId:e,errMsg:n})})}_set(e,t){void 0!==t&&t!==this._instance[e]&&(this._instance[e]=t)}emit(e){if(!this._stateCallbacks||!this._stateCallbacks.length)return;const{state:t,data:n,errMsg:r}=e;this._stateCallbacks.forEach(e=>e&&e({audioId:this._audioId,state:t,data:n,errMsg:r}))}pushEvent(e,t){this._push&&this._push(e,t)}setPushFn(e){this._push=e}getAudioId(){return this._audioId}destroy(){this._instance&&(this.stop(),this._instance.removeAttribute("src"),this._stateCallbacks=[],this._instance=null)}async operate(e,t){if(!this._instance)return"audio instance has been destroyed";switch(e){case"play":return await this.play();case"pause":return this.pause();case"stop":return this.stop();case"seek":return this.seek(t.position);default:return"invalid operationType: "+e}}getAudioState(){const e=this._instance.buffered.length,t=this._instance.duration;let n=e>0?this._instance.buffered.end(e-1)/t:0;return n*=100,{src:this._instance.src,paused:this._instance.paused,volume:this._instance.volume,loop:this._instance.loop,autoplay:this._instance.autoplay,buffered:n,currentTime:1e3*this._instance.currentTime,duration:1e3*t}}onAudioChange(e){-1===this._stateCallbacks.indexOf(e)&&this._stateCallbacks.push(e)}setAudioState(e){if(!this._instance)return"audio instance has been destroyed";const{src:t,volume:n,autoplay:r,loop:o}=e;return this._set("src",t),this._set("volume",Number(n)),this._set("autoplay",r),this._set("loop",o),""}}const zs=async function(e,t){const{appKey:n}=t,r="createAudioInstance",o=xo(n),a=new Qs,i=a.getAudioId();return a.setPushFn(t.push),a.onAudioChange(({audioId:e,state:t,data:n,errMsg:a})=>{"error"===t?o.error(r,`[audioId: ${e}] audio instance error: ${a}`):o.info(r,`[audioId: ${e}] audio instance state change: ${t}`)}),a.onAudioChange(({audioId:e,state:t,data:n})=>{"play"===t&&function({current:e}){Gs.forEach((t,n)=>{n!==e&&t.operate("pause",{})})}({current:e})}),function({key:e,instance:t,appKey:n}){Gs.set(e,t)}({key:i,instance:a,appKey:n}),{audioId:i,errMsg:po(r)}},Ys=async function(e,t){const n="destroyAudioInstance",{audioId:r}=e,{appKey:o}=t,a=xo(o);let i=Vs({key:r,appKey:o});return i?(i.destroy(),i=null,function({key:e}){Gs.delete(e)}({key:r}),a.info(n,`[audioId: ${r}] destroy audio instance done`),{errMsg:po(n)}):{errMsg:lo(n,"audio instance not found!")}},Js=async function(e,t){const{audioId:n}=e,{appKey:r}=t,o=Vs({key:n,appKey:r});if(!o)return{errMsg:lo("getAudioState","audio instance not found!")};const a=o.getAudioState();return{errMsg:po("getAudioState"),...a}},Xs=async function(e,t){const{audioId:n,operationType:r,currentTime:o}=e,{appKey:a}=t,i=xo(a),s=Vs({key:n,appKey:a});if(!s)return{errMsg:lo("operateAudio","audio instance not found!")};const c=await s.operate(r,{position:o});return c?(i.error("operateAudio",`[audioId: ${n}]operationType: [${r}],operate fail, ${c}`),{errMsg:lo("operateAudio",c)}):{errMsg:po("operateAudio")}},Zs=async function(e,t){const n="setAudioState",{audioId:r}=e,{appKey:o}=t,a=xo(o),i=Vs({key:r,appKey:o});if(!i)return{errMsg:lo(n,"audio instance not found!")};const s=i.setAudioState(e);return s?(a.error(n,`[audioId: ${r}] setAudioState fail, ${s}`),{errMsg:lo(n,s)}):(a.info(n,`[audioId: ${r}] setAudioState done,params: ${JSON.stringify(e)}`),{errMsg:po(n)})},ec=async(e,t)=>{const n={[f.BLOCK]:zs},{engineType:r,appKey:o}=t,a=xo(o);return n[r]?n[r](e,t):(a.info("createAudioInstance","does not exist"),ho("createAudioInstance"))},tc=async(e,t)=>{const n={[f.BLOCK]:Ys},{engineType:r,appKey:o}=t,a=xo(o);return n[r]?n[r](e,t):(a.info("destroyAudioInstance","does not exist"),ho("destroyAudioInstance"))},nc=async(e,t)=>{const n={[f.BLOCK]:Js},{engineType:r,appKey:o}=t,a=xo(o);return n[r]?n[r](e,t):(a.info("getAudioState","does not exist"),ho("getAudioState"))},rc=async(e,t)=>{const n={[f.BLOCK]:Zs},{engineType:r,appKey:o}=t,a=xo(o);return n[r]?n[r](e,t):(a.info("setAudioState","does not exist"),ho("setAudioState"))},oc=async(e,t)=>{const n={[f.BLOCK]:Xs},{engineType:r,appKey:o}=t,a=xo(o);return n[r]?n[r](e,t):(a.info("operateAudio","does not exist"),ho("operateAudio"))},ac=lo("showModal"),ic=po("showModal"),sc=async(e,t)=>{const{appKey:n}=t,r=xo(n);if(!e||!e.title&&!e.content)return r.error("showModal","Both params.title and params.content are empty!"),{errMsg:"showModal:fail params.title or params.content can not be empty!"};r.info("showModal","showModal ready for invoking host showModal!params:"+JSON.stringify(e));const[o,a]=await Qr(Xo(t,"showModal",e));return o||void 0===a.status?(r.error("showModal","showModal fail, exception caught! "+(o||"")),{errMsg:ac}):a.status===qr.CONFIRM?(r.info("showModal","showModal ok, user clicks confirm!"),{errMsg:ic,confirm:!0,cancel:!1}):(r.info("showModal","showModal ok, user clicks cancel!"),{errMsg:ic,confirm:!1,cancel:!0})},cc={[f.GADGET]:sc,[f.H5]:sc,[f.BLOCK]:sc},uc=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return cc[n]?cc[n](e,t):(o.info("showModal","showModal does not exist"),ho("showModal"))};var pc;!function(e){e.DESTROYED="app_instance_destroyed"}(pc||(pc={}));_o("showToast");function lc(e){const t=$o(e);return"Number"===t?e>0:"Null"===t&&"Undefined"===t}const dc=async(e,t)=>{const n=await Wo(t),{appKey:r}=t,{runMode:o}=n,a=xo(r);if(!e||!e.title)return a.error("showToast","showToast fail,params.title is empty!"),qo(jo.INVALID_PARAMETER,"showToast","params.title can not be empty!");const i=function(e,t){const n=[];let r=!1;return async(o,a=!1)=>{let i=o.oldResult;return await Mo(o.featureKey)&&(i=o.newResult),r||!t||(n.push({param_key:o.paramKey,valid_checker_result:o.oldResult,gray_valid_checker_result:o.newResult,gray_feature_key:o.featureKey}),i&&!a||(Lt({code:Fe.API_COMMON.NATIVE_PARAM_CHECKER,name:St.OP_API_INVOKE}).addMap({api_name:e,check_results:n}).flush(t),r=!0)),i}}("showToast",t.apiTracing);if(!await i({oldResult:!0,newResult:lc(e.duration),paramKey:"duration",featureKey:uo.ShowToast_Duration_Checker},!0))return qo(jo.INVALID_PARAMETER,"showToast");let s=e.icon||"success";"none"===e.icon&&(s="normal");const c={appKey:r,runMode:o,type:s,content:e.title,duration:e.duration||1500};a.info("showToast","showToast: ready for invoking container showToast!params:"+JSON.stringify(c));const[u,p]=await Qr(Xo(t,"showToast",c));return u||!p||mo(p.errMsg,"showToast")?(a.error("showToast",`showToast fail,${p&&p.errMsg||""},error: ${u}`),qo(jo.INTERNAL_ERROR,"showToast")):qo(jo.SUCCESS,"showToast")},hc=async(e,t)=>{const{appKey:n}=t,r=xo(n);r.info("hideToast","hideToast: ready for invoking container hideToast!");const[o,a]=await Qr(Xo(t,"hideToast",{appKey:n}));return o||!a||a.code!==Kr.SUCCESS?(r.info("hideToast",`hideToast fail,${a&&a.errMsg||""},error: ${o}`),qo(jo.INTERNAL_ERROR,"hideToast")):(r.info("hideToast","hideToast success!"),qo(jo.SUCCESS,"hideToast"))};var _c;!function(e){e[e.HIGH=3]="HIGH",e[e.NORMAL=2]="NORMAL",e[e.LOW=1]="LOW"}(_c||(_c={}));class fc{constructor(){p()(this,"_queue",[]),p()(this,"_keySet",new Set)}enqueue(e,t){const n={priority:(t=Object.assign({priority:_c.NORMAL},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const r=this._queue.findIndex((e,t,r)=>e.priority>=n.priority&&r[t+1].priority<n.priority);this._queue.splice(r+1,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}class gc extends l{constructor(e){super(),p()(this,"_pendingCount",0),p()(this,"_concurrency",void 0),p()(this,"_timeout",void 0),p()(this,"_delayBeforeNext",void 0),p()(this,"_throwOnTimeout",void 0),p()(this,"_queue",void 0),p()(this,"_isPaused",void 0),p()(this,"_queueClass",void 0),p()(this,"_taskPromiseMap",new Map),e=Object.assign({concurrency:1/0,autoStart:!0,intervalCap:1/0,queueClass:fc,throwOnTimeout:!1,delayBeforeNext:0},e),this._queue=new e.queueClass,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout,this._delayBeforeNext=e.delayBeforeNext,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._isPaused=!1===e.autoStart}get concurrency(){return this._concurrency}set concurrency(e){if(e<1)throw TypeError("newConcurrency should greater than 1, but receive "+e);this._concurrency=e,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}_tryToStartAnother(){if(0===this._queue.size)return!1;if(!this._isPaused&&this._doesConcurrentAllowAnother){const e=this._queue.dequeue();return!!e&&(e(),!0)}return!1}_next(){this._pendingCount--,this._tryToStartAnother()}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}add(e,t){const{key:n}=t||{};if(n&&this._taskPromiseMap.has(n))return this._taskPromiseMap.get(n);{const r=new Promise((r,o)=>{const a=e=>(n&&this._taskPromiseMap.delete(n),r(e)),i=e=>(n&&this._taskPromiseMap.delete(n),o(e));this._queue.enqueue(async()=>{this._pendingCount++,this._delayBeforeNext&&this._queue.size>0&&await async function(e){return new Promise(t=>{setTimeout(t,e)})}(this._delayBeforeNext);try{const t=void 0===this._timeout||this._timeout<=0?e():Promise.race([e(),new Promise((e,t)=>{setTimeout(()=>this._throwOnTimeout?t(new Error("PQueue time out")):e(void 0),this._timeout)})]);a(await t)}catch(e){i(e)}this._next()},t),this._tryToStartAnother()});return n&&this._taskPromiseMap.set(n,r),r}}clear(){this._queue=new this._queueClass,this._taskPromiseMap.clear()}pause(){this._isPaused=!0}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}}p()(gc,"TaskPriority",_c);const Ec=new Map,mc=e=>{if(Ec.has(e)){Ec.get(e).clear(),Ec.delete(e)}},yc=(e,t,n)=>{Ec.has(e.appKey)||(no("appSubscribe",{appKey:e.appKey,eventName:pc.DESTROYED,cb:mc.bind(null,e.appKey)}),Ec.set(e.appKey,new gc({throwOnTimeout:!1,concurrency:1,timeout:5e3})));return Ec.get(e.appKey).add(()=>n(t,e))},Ac={[f.BLOCK]:dc,[f.GADGET]:dc,[f.H5]:dc},Tc=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);if(!Ac[n])return o.info("showToast","showToast does not exist"),qo(jo.UNABLE_API,"showToast","this api is not implemented");const a=await yc(t,e,Ac[n]);return a||qo(jo.INTERNAL_ERROR,"showToast")},Sc={[f.BLOCK]:hc,[f.GADGET]:hc,[f.H5]:hc},vc=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);if(!Sc[n])return o.info("hideToast","hideToast does not exist"),qo(jo.UNABLE_API,"hideToast","this api is not implemented");const a=await yc(t,e,Sc[n]);return a||qo(jo.INTERNAL_ERROR,"hideToast")},Rc=_o("concatFiles"),Oc=async(e,t)=>{const{fileList:n,target:r}=e,o=xo(t.appKey),a=Date.now(),i=Ko(t.engineType);let s="";for(const e of n){const t=await i.nativePathToSandboxPath(e),[n,r]=await Qr(zr("readFile",{path:t,options:{encoding:"utf8"}},{timeout:12e4}));if(n||!r)return o.info("concatFiles",`readFile fail error: ${n};`),{errMsg:Rc.FAIL};s+=r+";"}o.info("concatFiles","start to transfer targetPath to sandboxPath use nativePathToSandboxPath");const c=await i.nativePathToSandboxPath(r);o.info("concatFiles","targetPath to sandboxPath ok. sandboxTarget: "+c);try{o.info("concatFiles","start to callServerApi writeFile");const[e,t]=await Qr(zr("writeFile",{path:c,options:{encoding:"utf8"},data:s},{timeout:12e4}));return o.info("concatFiles","callServerApi writeFile done"),e?(o.error("concatFiles","writeFile fail  error: "+e),{errMsg:Rc.FAIL}):(o.info("concatFiles",`concatFiles success & cost ${Date.now()-a}ms`),{errMsg:Rc.OK})}catch(e){return o.error("concatFiles","catch error: "+e),{errMsg:Rc.FAIL}}},Cc={[f.GADGET]:Oc,[f.BLOCK]:Oc,[f.H5]:Oc},Ic=async(e,t)=>{const{engineType:n}=t,r=xo(t.appKey);return Cc[n]?Cc[n](e,t):(r.info("concatFiles","concatFiles does not exist"),ho("concatFiles"))},Pc={[f.BLOCK]:async(e,t)=>{const n=xo(t.appKey),{level:r="log"}=e;return n.info("saveLog","level: "+r),Xo(t,"saveLog",e)}},wc=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return Pc[n]?await Pc[n](e,t):(o.info("saveLog","saveLog does not exist"),ho("saveLog"))};function bc(e,t){return`${e}:ok ${t||""}`}function Nc(e,t){return`${e}:fail ${t||""}`}const Mc=["close","error","message","open"],Lc={};let kc=0;const Dc=async(e,t)=>{const n="createSocketTask";if(!e||!e.url)return{errMsg:Nc(n,"params.url cant not be empty")};const{engineType:r}=t,o=xo(r),{url:a,header:i={},protocols:s=[]}=e,c=(kc++,kc);try{const e=new WebSocket(a,s,(u=i,Object.entries(u).reduce((e,[t,n])=>(e.push(`${t}: ${n}`),e),[])));return Mc.forEach(n=>{e["on"+n]=async e=>{const r={state:n,socketTaskId:c},o=e.data;if("message"===n)if("string"==typeof o)r.data=o;else if("[object ArrayBuffer]"===Object.prototype.toString.call(o))r.data=o;else if(ArrayBuffer.isView(o)){const e=o.buffer;r.data=e}else if(K.blob(o)){const e=await o.arrayBuffer(),{data:t,type:n}=function(e){return{data:Array.from(new Uint8Array(e)),type:"Buffer"}}(e);e.data=t,e.type=n,r.data=e}else r.errMsg="Data type is not supported";else"error"===n?(r.data=e,delete Lc[c]):"close"===n&&delete Lc[c];t.push("onSocketTaskStateChange",is.pack(r))}}),Lc[c]=e,{socketTaskId:c,errMsg:bc(n)}}catch(e){return o.error(n,Nc(n,""+e)),{errMsg:Nc(n)}}var u},Uc=async(e,t)=>{const n="operateSocketTask",{engineType:r}=t,o=xo(r);e=is.unpack(e);const{socketTaskId:a,operationType:i}=e,s=Lc[a];if(!s){const e={errMsg:Nc(n,"task not found")};return o.error(n,e.errMsg),e}if("send"===i)return s.send(e.data),{errMsg:bc(n)};if("close"===i){const{code:t,reason:r=""}=e;return s.close(t,r),{errMsg:bc(n)}}{const e={errMsg:Nc(n,"illegal operationType")};return o.error(n,e.errMsg),e}},Kc={[f.H5]:Dc,[f.GADGET]:Dc,[f.BLOCK]:Dc},xc=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return Kc[n]?Kc[n](e,t):(o.info("createSocketTask","createSocketTask does not exist"),{errMsg:lo("createSocketTask")})},Fc={[f.H5]:Uc,[f.GADGET]:Uc,[f.BLOCK]:Uc},Hc=async(e,t)=>{const{engineType:n,appKey:r}=t,o=xo(r);return Fc[n]?Fc[n](e,t):(o.info("operateSocketTask","operateSocketTask does not exist"),{errMsg:lo("operateSocketTask")})},jc=new Map,Bc=r;Object.entries(Bc).forEach(([e,t])=>{jc.set(e,t)});var Gc=function(e,t,n,r){const o=xo(n.appKey),a=jc.get(e);return o.info(e,"start call api "+e),a?a(t,n,r):ho(e)};const Vc=new Map;const Wc=e=>{if(Vc.has(e)){Vc.get(e).clear(),Vc.delete(e)}};function qc(e,t,n){const{sharedBuffer:r,ipcSyncTag:o}=n,a=JSON.stringify(e),i=(new TextEncoder).encode(a).byteLength;!function(e,t,n){Vc.has(e)||(Vc.set(e,new Map),no("appSubscribe",{appKey:e,eventName:pc.DESTROYED,cb:Wc.bind(null,e)})),Vc.get(e).set(t,n)}(t,o,a),function(e,t){Atomics.store(t,0,e);const n=t.length-1;Atomics.store(t,n,1),Atomics.notify(t,n,1)}(4*i,r)}function $c(e,t){const{sharedBuffer:n,ipcSyncTag:r}=t;!function(e,t){const n=(new TextEncoder).encode(e);for(let e=0,r=n.length;e<r;e++)Atomics.store(t,e,n[e]);const r=t.length-1;Atomics.store(t,r,1),Atomics.notify(t,r,1)}(Vc.get(e).get(r),n),function(e,t){if(Vc.has(e)){const n=Vc.get(e);n.has(t)&&n.delete(t)}}(e,r)}const Qc=async(e,t,n,r)=>{const{apiTracing:o,appKey:a}=n;n={...n,node:no("getComponent",{appKey:a})};const i=r=>Gc(e,r||t,n),s=Yo.getRegisterApisWithNoWrap().get(e);let c;return c=s?await s.handler(t,n,i):await Gc(e,t,n,r),r&&r.ipcSyncTag&&qc(c,a,r),o&&Lt({code:Fe.API_COMMON.NATIVE_INVOKE_RESULT,name:St.OP_API_INVOKE}).addMap({api_name:e,errMsg:c.errMsg,result_type:yo(e,c.errMsg)}).flush(o),c},zc=(e,t,n,r)=>{if(function(e,t){if(!t||!t.ipcSyncTag)return!1;const n=Vc.get(e);return!!n&&n.has(t.ipcSyncTag)}(n.appKey,r))return $c(n.appKey,r),{};const{apiTracing:o}=n;o&&Lt({code:Fe.API_COMMON.NATIVE_INVOKE_START,name:St.OP_API_INVOKE}).addMap({api_name:e}).flush(o);return Qc(e,t,n,r)},Yc=new Map;const Jc=new Map;function Xc(e,t,n){Jc.has(n)||(Jc.set(n,[]),Wt(n,()=>function(e){const t=Jc.get(e);t&&(t.forEach(e=>e()),Jc.delete(e))}(n)));const r=qe.subscribe(e,e=>{e.appKey===n&&t&&t(e)});return Jc.get(n).push(r),r}function Zc(e){const t=En(e);return!!t&&!!t.darkmode}async function eu(e){let t=En(e);return t||(t=await new Promise(t=>{Dt.tap(Ut.ON_APP_CONFIG,e=>{t(e)},e)})),!!t.darkmode}function tu(e){return Qt(e,zt.APP_BASE_ATTRS)}const nu="U2FsdGVkX1+gIR52d3GqTIHgpGeS63CpRcZj+QbBsZaCfCqZ/P6ncTectrPfMwST11111";const ru=new class{async canUseApplyUpdate(e,t,n){const{canUpdate:r,overInterval:o,uploadInfo:a}=await this.canUseApplyUpdateImp(e,t,n);return this.uploadAnalytics(a),r&&n&&await this.saveForceUpdateInfo(e,t,o),r}async canUseApplyUpdateImp(e,t,n){let r=!1;const{appMaxAge:o,userMaxAge:a,userMaxCount:i,firstUpdateControl:s,checkUserControl:c}=await this.getUpdateSettings(e,t);let u=o;sn.info(`[AppUpdateChecker] check param1 appKey: ${t} appMaxAge: ${o}, userMaxAge: ${a}, userMaxCount: ${i}`),sn.info(`[AppUpdateChecker] check param2 appKey: ${t} checkUserControl: ${c}, firstUpdateControl: ${s}`);const p={user_max_age:a,user_frequency:i,app_max_age:o,first_update_control:s,is_apply_update:n};if(P(bt.GADGET_FORCE_UPDATE_STRATEGY,!0))return sn.info("[AppUpdateChecker] always force update fg open"),p.trigger_on_update_ready_event=r,{canUpdate:!0,overInterval:!0,uploadInfo:p};let l=a,d=await this.getLastUserUpdateTime(e,t),h=await this.getLastUpdateTime(e,t);const _=i;d||(sn.info("[AppUpdateChecker] storage lastUserUpdateTime empty"),d=0),p.last_apply_update_success_for_user=d,h||(sn.info("[AppUpdateChecker] storage lastUpdateTime empty"),h=0),sn.info(`[AppUpdateChecker] userUpdateTime:${d}, appUpdateTime:${h}`),p.last_apply_update_success=h,("number"!=typeof u||u<0)&&(sn.info("[AppUpdateChecker] app interval use default"),u=0),("number"!=typeof l||l<0)&&(sn.info("[AppUpdateChecker] user interval use default"),l=0),sn.info(`[AppUpdateChecker] userInterval:${l}, appInterval:${u}`);const f=this.isSatisfyTimeInterval(h,u);sn.info("[AppUpdateChecker] app satisfy:"+f);const g=await this.getLastUserUpdateCount(e,t),[E,m]=this.isSatisfyTimeIntervalAndCount(d,l,g,_);sn.info(`[AppUpdateChecker] user satisfy:${E}, overInterval:${m}, currentUpdateCount:${g}`),r=f&&E;const y=await this.hasApplyUpdateTag(e,t);sn.info("[AppUpdateChecker] applyUpdateTag:"+y);const A=!y||"true"!==y;return sn.info("[AppUpdateChecker] isFirstTrigger:"+A),p.is_app_first_trigger=A,r&&s&&A?(sn.info("[AppUpdateChecker] first trigger and disable update"),await this.setApplyUpdateTag(e,t),p.trigger_on_update_ready_event=r,{canUpdate:!1,overInterval:m,uploadInfo:p}):(p.trigger_on_update_ready_event=r,sn.info(`[AppUpdateChecker] check end, canUpdate:${r}, overInterval:${m}`),{canUpdate:r,overInterval:m,uploadInfo:p})}async saveForceUpdateInfo(e,t,n){const r=this.getStorage(e,t),o=""+Date.now();if(sn.info("[AppUpdateChecker] saveForceUpdateInfo now: "+o),await r.setItem(nu,o),n)sn.info("[AppUpdateChecker] saveForceUpdateInfo overInterval"),await r.setEngineStorageData("TAG_USER_UPDATE_TIME",o),await r.setEngineStorageData("TAG_USER_UPDATE_COUNT","1");else{sn.info("[AppUpdateChecker] saveForceUpdateInfo not overInterval");const e=await r.getEngineStorageData("TAG_USER_UPDATE_COUNT");let t=parseInt(e||"");t?t+=1:t=1,sn.info("[AppUpdateChecker] saveForceUpdateInfo currentCount:"+t),await r.setEngineStorageData("TAG_USER_UPDATE_COUNT",""+t)}}async getUpdateSettings(e,t){const[n,r]=await Qr(b(bo.META_EXPIRATION_TIME));if(n||!r)return sn.error("[getUpdateSettings] get v3settings error"),{appMaxAge:0,userMaxAge:0,userMaxCount:1,firstUpdateControl:!1,checkUserControl:!1};let o="";const a=tu(t);o=a.appId||a.uniqueId,sn.info("[AppUpdateChecker][getUpdateSettings] appId: "+o);const i=r.on_update_ready_max_age;let s=0,c=0,u=1,p=!1;if(i){sn.info("[AppUpdateChecker][getUpdateSettings] updateMaxAge exist"),sn.info("[AppUpdateChecker][getUpdateSettings] updateMaxAge:"+JSON.stringify(i));const e=i.first_update_control;p="true"===e||"true"===e,sn.info("[AppUpdateChecker][getUpdateSettings] firstUpdateControl:"+p),o&&i[o]?(sn.info("[AppUpdateChecker][getUpdateSettings] uniq id age: "+i[o]),s=i[o]):(sn.info("[getUpdateSettings] default max age: "+i.default_max_age),s=i.default_max_age);const t=i.user_strategy;if(t){if(sn.info("[AppUpdateChecker][getUpdateSettings] userStrategy exist"),o&&t[o]){sn.info("[AppUpdateChecker][getUpdateSettings] appId in userStrategy");const e=t[o];c=e.max_age,u=e.max_update_count}else sn.info("[AppUpdateChecker][getUpdateSettings] appId not in userStrategy"),c=t.max_age,u=t.max_update_count;sn.info(`[AppUpdateChecker][getUpdateSettings] userStrategy userMaxAge:${c}, userMaxCount:${u}`)}}return 0===c&&0===s&&(p=!1,sn.info("[AppUpdateChecker][getUpdateSettings] user and app not need to control")),{appMaxAge:s,userMaxAge:c,userMaxCount:u,firstUpdateControl:p,checkUserControl:c>0}}async getLastUpdateTime(e,t){const n=this.getStorage(e,t),r=await n.getItem(nu),o=parseInt(r||"");return sn.info("[AppUpdateChecker][getLastUpdateTime] appLastUpdateTime:"+o),o}async getLastUserUpdateTime(e,t){const n=this.getStorage(e,t),r=await n.getEngineStorageData("TAG_USER_UPDATE_TIME"),o=parseInt(r||"");return sn.info("[AppUpdateChecker][getLastUserUpdateTime] userLastUpdateTime:"+o),o}async hasApplyUpdateTag(e,t){const n=this.getStorage(e,t),r=await n.getItem("TAG_USER_UPDATE");return sn.info("[AppUpdateChecker][hasApplyUpdateTag] updateTag:"+r),r}async setApplyUpdateTag(e,t){const n=this.getStorage(e,t);sn.info("[AppUpdateChecker][setApplyUpdateTag] setApplyUpdateTag:true"),await n.setItem("TAG_USER_UPDATE","true")}async getLastUserUpdateCount(e,t){const n=this.getStorage(e,t),r=await n.getEngineStorageData("TAG_USER_UPDATE_COUNT");let o=parseInt(r||"");return sn.info("[AppUpdateChecker][getLastUserUpdateCount] currentCount:"+o),o||(o=1),o}isSatisfyTimeInterval(e,t){const n=Date.now(),r=n-e>t;return sn.info(`[AppUpdateChecker] now time: ${n}, satisfy: ${r}, lastUpdateTime:${e}, interval:${t}`),r}isSatisfyTimeIntervalAndCount(e,t,n=1,r=1){const o=Date.now(),a=o-e>t;return a?(sn.info(`[AppUpdateChecker] now time: ${o}, satisfy: ${a}, lastUpdateTime:${e}, interval:${t}`),[a,!0]):(sn.info(`[AppUpdateChecker] user not satisfy, compaire time, current: ${n}, max: ${r}`),[n<r,!1])}uploadAnalytics(e){sn.info("[AppUpdateChecker] uploadAnalytics: "+JSON.stringify(e)),sn.info("[AppUpdateChecker] is_apply_update: "+e.is_apply_update),sn.info("[AppUpdateChecker] trigger_update_ready_or_apply: "+e.trigger_on_update_ready_event),Zr(St.OP_ANALYSIS_ONUPDATEREADY,e)}getStorage(e,t){const n=qe.invoke.bind(qe);return{setItem:async(r,o)=>await n("setStorageInnerItem",{key:r,value:o,appKey:t,engineType:e},{timeout:5e3}),getEngineStorageData:async r=>await n("getEngineStorageData",{appKey:t,engineType:e,key:r},{timeout:5e3}),setEngineStorageData:async(r,o)=>await n("setEngineStorageData",{appKey:t,engineType:e,key:r,value:o},{timeout:5e3}),getItem:async r=>await n("getStorageInnerItem",{appKey:t,engineType:e,key:r},{timeout:5e3})}}},ou={canUseApplyUpdate:(e,t,n)=>ru.canUseApplyUpdate(e,t,n)};Object.prototype.hasOwnProperty;function au(e,t,n){t=Array.isArray(t)?t:[t];for(let r=0;r<t.length;r++){const o=t[r];if(!e||void 0===e[o]){e=n;break}e=e[o]}return e}n(68);const iu=new Map,su={setTabbarIns(e,t){iu.set(e,t)},getTabbarIns:e=>iu.get(e),removeTabbarIns(e){const t=iu.get(e);t&&(t.destroy(),iu.delete(e))}},cu={getComponent:e=>sa.getComponentByAppKey(e.appKey),getLog:()=>sn,getActivateOperate:e=>Gt.getOperate(e.appKey),getHostConfig:()=>an(),getAppRouter:e=>ua.getRouter(e.appKey),getTabbarIns:e=>su.getTabbarIns(e.appKey),getAppConfig:e=>En(e.appKey),getAppTracing:e=>ga(e.appKey),sendMessageToCurrentRender:e=>{const{appKey:t,eventName:n,data:r}=e;return er.getCurrent(t).fireEvent(n,r)},getRestoreWebviewUrl:e=>function(e){const t=Yc.get(e);if(t){const n=t.webviewUrl;return Yc.delete(e),n}}(e.appKey),appSubscribe:e=>{const{appKey:t,eventName:n,cb:r}=e;return Xc(n,r,t)},getLaunchParams:e=>{const{appKey:t}=e;return Qt(t,zt.APP_LAUNCH_PARAMS)},getCurrentTheme:e=>{const{appKey:t}=e;if(Zc(t))return ea.getCurrentTheme(t)},getAppUpdateChecker:()=>ou,getAppBaseAttrs:e=>tu(e.appKey),hasPrefetch:e=>{const{appKey:t,requestParams:n}=e;return function(e,t){return!!qt.has(e)&&(!t||void 0!==qt.get(e)[t])}(t,zt.APP_PREFETCH)},getPrefetch:e=>{const{appKey:t,requestParams:n}=e,r=Qt(t,zt.APP_PREFETCH);return null==r?void 0:r.getFetch(n)},isFirstPage:e=>{const{appKey:t}=e;return er.getCurrent(t).isFirstPage}};let uu=!1;class pu{constructor(e){p()(this,"_render",void 0),p()(this,"_engineType",void 0),this._engineType=e}async create(e,t){const n=i(this._engineType===f.BLOCK?s.SHADOW_RENDER_CONTAINER:s.IFRAME_RENDER_CONTAINER);this._render=new n,await this._render.create(e,t)}async importScript(e,...t){await this._render.importScript(e,...t)}show(){this._render.show()}hide(){this._render.hide()}setStyles(e){this._render.setStyles(e)}postMessage(e){this._render.postMessage(e)}onMessage(e){this._render.onMessage(e)}offMessage(e){this._render.offMessage(e)}destroy(){this._render.destroy(),this._render=null}}var lu;function du(e,t){const n=e,r=e,o=t?`${n.subPackageRoot||""}/${lu.PAGE_FRAME}`:lu.PAGE_FRAME;return n.basePath?lr(n.basePath,o):r.code[o]}!function(e){e.PAGE_FRAME="page-frame.js",e.APP_SERVICE="app-service.js",e.APP_CONFIG="app-config.json"}(lu||(lu={}));class hu{static getInstance(e,t){return this.instanceMap.has(e)||this.instanceMap.set(e,new hu(e,t)),this.instanceMap.get(e)}constructor(e,t){p()(this,"renderPoolSize",0),p()(this,"docRoot",void 0),p()(this,"pool",[]),p()(this,"engineType",void 0),p()(this,"renderSuccInit",!1),this.engineType=e,this.docRoot=t}addRenderToPool(){const e=this.createRender();e[1].catch(()=>{const t=this.pool.findIndex(t=>t===e);t>-1&&this.pool.splice(t,1)}),this.pool.push(e)}createRender(){const e=new pu(this.engineType),t=new Promise(async(t,n)=>{const r=this.docRoot.querySelector("#__root__");try{const n=await ra(this.engineType),o=function(e,t){const n=t,r=t;return n.basePath?lr(n.basePath,e===f.BLOCK?Dr.RENDER:Dr.PAGE_FRAME):e===f.GADGET?r.pageFrameHtml:r.webview}(this.engineType,n);await e.create(r,o),this.renderSuccInit=!0,t(!0)}catch(e){n(new Error(e))}});return[e,t]}getRenderFromPool(){let e;return this.pool.length?(sn.info("get render from pool"),e=this.pool.shift()):(sn.info("get render from new Render"),e=this.createRender()),this.pool.length<this.renderPoolSize&&this.addRenderToPool(),e}setPoolSize(e){this.renderPoolSize=e;let t=this.renderPoolSize-this.pool.length;if(t>0)for(;t;)this.addRenderToPool(),t--}preload(){this.pool.length||this.addRenderToPool()}}let _u;function fu(e){return _u||(_u=new Promise(async(t,n)=>{const[,r]=await Qr(qe.invoke("getConfigByKeys",{keys:["optrace_batch_config"],engineType:e},{timeout:3e3})),o=r&&r.optrace_batch_config;o?t(o):n("get trace config failed")})),_u}async function gu(e,t){const n=t?ga(t):null,r={enableSdkMonitor:P(bt.OP_ENABLE_SDK_API_MONITOR)};if(!n)return r;try{r.trace={traceId:n.traceId,createTime:n.createTime,extensions:[]};const t=await fu(e);t&&(r.trace.config={optrace_batch_config:t})}catch(e){}return r}function Eu(e){if(e){const t=i(s.PLATFORM_COMMON),n=t&&t.getDomain,r=function(e){if(e){const t={};return Object.keys(e).forEach(n=>{t[C[n]]=e[n]}),t}}(e);a(s.PLATFORM_COMMON,Object.assign({},t,{getDomain:(e,t,o)=>r[e]||n&&n(e,t,o)||""}))}}async function mu(e){Yt(),Object(g.b)(),function(e){const{region:t,env:n}=e;if(!A.includes(n))throw new Error(`env should be one of [${A}]`);if(!S.includes(t))throw new Error(`region should be one of [${S}]`)}(e),e.domainConfig&&Eu(e.domainConfig),on=e,e.theme&&ea.init(e.theme),uu||(uu=!0,Object.keys(cu).forEach(e=>{to({name:e,handler:cu[e]})})),qe.registerServices($e),oa||(Lt.init({report(e){const t=Array.isArray(e)?e:[e];t.forEach(e=>{e.categories=Object.assign({},e.categories,{[Rt.HOST]:an().host})}),qe.invoke("report",t)},log(e={}){const{level:t,tag:n,file:r,functionName:o,line:a,content:i}=e;let s="";try{s=JSON.stringify({tag:n,file:r,functionName:o,line:a,content:i})}catch(e){}qe.invoke("log",{type:t,message:s,tags:{layer:"runtime",extra:"monitor"}})}}),oa=!0);try{wn()&&Lt({name:St.OP_PLATFORM_SUPPORT_WASM}).addMap({isSupport:kt?1:0}).flush(),await async function(){const e=i(s.START_SERVER);await(e&&e())}(),qe.setCommunication(i(s.RUNTIME_TO_SERVER_COMMUNICATION)),qe.invoke("init",{...e,resourceBasePath:ee(),workContainerWithQjs:On()}),ia.getInstance(f.BLOCK).setPoolSize(Cn()?1:e.workerPoolSize||1),hu.getInstance(f.BLOCK,document.body).setPoolSize(e.workerPoolSize||1),$(ra(f.BLOCK)),async function(){let e;try{e=f.BLOCK;const t=await fu(e);t&&da.setConfig(t)}catch(e){return}}(),sn.info("initEngine end, "+JSON.stringify(e))}catch(e){throw sn.error("initEngine fail, "+e),e}}var yu;p()(hu,"instanceMap",new Map),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.UNKNOWN_ERROR=1]="UNKNOWN_ERROR",e[e.NET_ERROR=2]="NET_ERROR"}(yu||(yu={}));const Au=new cn(0);function Tu(e){let t=pe.APP_CHECK_FAIL;return e&&e.code===yu.NET_ERROR&&(t=pe.SERVER_APP_CHECK_NETWORK_ERROR),e&&e.code===yu.UNKNOWN_ERROR&&(t=pe.SERVER_APP_CHECK_SERVER_FAIL),new Ge({code:t,message:e&&(e.errMsg||e.message)})}const Su=new l;function vu(e,t){return`${e}_first_render_${t}`}function Ru(e,t){const n=Qt(e,zt.RENDER_STATUS);"success"===n?t():"pending"===n&&Su.once(vu(e,"success"),t)}function Ou(e,t){if(Qt(e,zt.RENDER_STATUS)===t)return;$t(e,zt.RENDER_STATUS,t);const n=vu(e,"success"),r=vu(e,"finish");switch(t){case"success":Su.emit(n),Su.emit(r);break;case"fail":Su.off(n),Su.emit(r)}}function Cu(e,t,n=12e4){const r=vu(e,"finish"),o=setTimeout(t,n);Su.once(r,()=>clearTimeout(o))}async function Iu(e,t){sn.info(`[${e}] appResourceChange start`);const[n,r=[]]=await Qr(qe.invoke("getAppKeysById",{findType:"engineType-instanceId",findKey:{engineType:f.BLOCK,instanceId:e}}));return sn.info(`[${e}] appResourceChange to appKeys: ${r}`),r.forEach(async n=>{Ru(n,()=>{const r=Ft.get(n);null==r||r.fireEvent(yi.ON_RESOURCE_CHANGE,t),sn.info(`[${e}] appResourceChange end`,{appKey:n})})}),r}const Pu=[],wu="undefined"!=typeof MessageChannel&&new MessageChannel;let bu=!1;function Nu(){bu=!1;const e=Pu.slice();Pu.length=0,e.forEach(e=>{"function"==typeof e&&e()})}function Mu(e,t=!0){t&&Pu.includes(e)||(Pu.push(e),bu||(bu=!0,wu?wu.port2.postMessage(""):setTimeout(Nu,0)))}var Lu;wu&&(wu.port1.onmessage=Nu),function(e){e[e.LOW=1]="LOW",e[e.HIGH=2]="HIGH"}(Lu||(Lu={}));const ku=new class{_getAppPriority(e){return this.appPriorityMap.get(e)||Lu.HIGH}constructor(){p()(this,"highPriorityQueue",void 0),p()(this,"lowPriorityQueue",void 0),p()(this,"appPriorityMap",void 0),p()(this,"isRunning",void 0),p()(this,"_checkLowPriorityQueue",x(()=>{if(this.lowPriorityQueue.length){const e=this.lowPriorityQueue.shift();e.priority=Lu.HIGH,this._pushToQueue(e)}},30)),this.highPriorityQueue=[],this.lowPriorityQueue=[],this.appPriorityMap=new Map,this.isRunning=!1}_wrapperTask(e,t,n){return{appKey:e,handler:()=>new Promise(e=>{t().then(t=>Mu(()=>{n.resolve(t),e()})).catch(t=>{n.reject(t),e()})}),priority:this._getAppPriority(e),cancel:()=>n.reject(new Error("app task cancel"))}}async _tryRunTask(){if(!this.isRunning){for(;this.highPriorityQueue.length;){const e=this.highPriorityQueue.shift();await(null==e?void 0:e.handler())}this.isRunning=!1,this._checkLowPriorityQueue()}}_pushToQueue(e){if(e.priority!==Lu.LOW)return e.priority===Lu.HIGH?(this.highPriorityQueue.push(e),void this._tryRunTask()):void 0;this.lowPriorityQueue.push(e)}_moveTasks(e,t){const n=t===Lu.HIGH?"lowPriorityQueue":"highPriorityQueue",r=this[n],o=[];r.forEach(n=>{n.appKey===e?(n.priority=t,this._pushToQueue(n)):o.push(n)}),this[n]=o}setAppPriority(e,t){this._getAppPriority(e)!==t&&(this.appPriorityMap.set(e,t),this._moveTasks(e,t))}createTask(e,t){return t()}clearTasks(e){const t=this._getAppPriority(e)===Lu.HIGH?"lowPriorityQueue":"highPriorityQueue",n=this[t],r=[];n.forEach(t=>{t.appKey===e?t.cancel():r.push(t)}),this[t]=r,this.appPriorityMap.delete(e)}};let Du;function Uu(e,t,n){const r="visible"===t;ku.setAppPriority(e,r?Lu.HIGH:Lu.LOW),Ru(e,()=>{const t=Ft.get(e);t.getVisibleState()!==r&&(t.setVisibleState(r,n),Du&&(clearTimeout(Du),Du=void 0),r||(Du=setTimeout(()=>{var t;null===(t=Gt.getOperate(e))||void 0===t||t.inactivate(!0,{delay:0,force:!0})},30)))})}const Ku=new WeakMap,{ResizeObserver:xu}=window,Fu=xu&&new xu(e=>{e.forEach(e=>{const{target:t,contentRect:n}=e,r=Ku.get(t),o={};["top","bottom","left","right","width","height"].forEach(e=>{o[e]=n[e]}),r&&r(o)})});const Hu=()=>{},ju=new WeakMap,Bu=(e,t)=>{if(!e||!Fu)return;const n=ju.get(e);if(!n)return;const r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&(ju.delete(e),function(e){if(!e||!Fu)return!1;try{Ku.delete(e),Fu.unobserve(e)}catch(e){return!1}}(e)))},Gu=(e,t)=>{if(!e||!Fu)return Hu;const n=ju.get(e);return n?-1===n.indexOf(t)&&n.push(t):(ju.set(e,[t]),function(e,t){if(!e||!Fu)return!1;try{Ku.set(e,t),Fu.observe(e)}catch(e){return!1}}(e,()=>{(e=>{ju.get(e).forEach(e=>{e()})})(e)})),()=>{Bu(e,t)}};class Vu{constructor(e,t){p()(this,"instance",void 0),p()(this,"dom",void 0),p()(this,"unbind",void 0),p()(this,"handleResizeObservable",()=>{if(!this.dom)return;const e=this.dom.getBoundingClientRect();requestAnimationFrame(()=>{this.instance.setBounds(e)})}),this.instance=e,this.instance=e,this.dom=t,this.handleResizeObservable(),this.unbind=Hu}rebind(e){e!==this.dom&&(this.unbind&&this.unbind(),this.dom=e,this.bind())}bind(){this.unbind=Gu(this.dom,this.handleResizeObservable)}dispose(){this.unbind()}}var Wu=new class{constructor(){p()(this,"rootDom",void 0)}createRoot(){this.rootDom=document.createElement("div"),this.rootDom.id="__root__",this.rootDom.style.cssText="position: absolute; z-index: 1; contain: paint; font-size: 12px; color: black;",document.body.appendChild(this.rootDom)}bindOriginRoot(e){this.rootDom&&new Vu({setBounds:e=>{this.rootDom.style.top=e.y+"px",this.rootDom.style.left=e.x+"px",this.rootDom.style.height=e.height+"px",this.rootDom.style.width=e.width+"px"}},e).bind()}};const qu={invokeApi:e=>{const{apiName:t,params:n,appKey:r,engineType:o,apiTracing:a,push:i=(()=>{}),extra:s}=e;return zc(t,n,{engineType:o,appKey:r,apiTracing:a,push:i},s)},pushMessage:e=>{const{eventName:t,data:n,isBroadcast:r}=e;r?qe.invoke("pushMessage",{eventName:t,data:n}):qe.publish(t,n,!0)},getCurrentPackageInfo:e=>qe.invoke("getCurrentPackageInfo",{appKey:e}),shouldUpdate:async(e,t)=>{const n=await qe.invoke("updateMeta",{appKey:t});if(await qe.invoke("shouldUpdate",{packageInfo:{...n,engineType:e},appKey:t}))return n},forceUpdatePackage:(e,t)=>qe.invoke("updatePackageWithMeta",{...t,engineType:e}),getUserPermissionInfo:async(e,t)=>{const n=tu(e);return qe.invoke("getUserPermissionInfo",{appId:n.appId||n.uniqueId,useCache:t,engineType:n.engineType})},updateUserPermissionAndSync:async(e,t)=>{const n=tu(e);return qe.invoke("updateUserPermissionAndSync",{appId:n.appId||n.uniqueId,newPermissionInfo:t,engineType:n.engineType})},getConfig:e=>qe.invoke("getConfig",{engineType:e}),setUserStorageData:async(e,t,n,r,o)=>{if(o)return await qe.invoke("setEngineStorageData",{appKey:e,engineType:t,key:n,value:r});if(!await qe.invoke("getEngineStorageData",{appKey:e,engineType:t,key:n}))return await qe.invoke("setEngineStorageData",{appKey:e,engineType:t,key:n,value:r})},getCurrentMeta:e=>qe.invoke("getMeta",e),getCurrentAppDir:async e=>{const{uniqueId:t,debugUrl:n,engineType:r}=e;return(await gn({id:t,debugUrl:n,engineType:r})).basePath||""},setAppCommonUsedInfo:async e=>{const t=tu(e);return qe.invoke("setAppCommonUsedInfo",t.appId)},changeAppCommonUsedInfo:async e=>{const t=tu(e.appKey);return qe.invoke("changeAppCommonUsedInfo",{appId:t.appId,isAdd:e.isAdd})},openOuterPage:async e=>qe.invoke("openOuterPage",e),createContainer:e=>{Wu.createRoot(),ia.getInstance(e).preload(),hu.getInstance(e,document.body).preload()},isFullPreload:e=>ia.getInstance(e).workerSuccInit&&hu.getInstance(e,document.body).renderSuccInit,focusApp:e=>{qe.invoke("onAppFocus",{appKey:e})},blurApp:e=>{qe.invoke("onAppBlur",{appKey:e})},isSupportDarkModeAsync:eu,getCurrentPathWithQuery:e=>{const t=er.getCurrent(e);if(t)return t.pathWithQuery},getEngineData:async(e,t,n)=>{const[r,o]=await Qr(qe.invoke("getStorageInnerItem",{appKey:t,key:n,engineType:e,useLocal:!0},{timeout:5e3}));return r?"":o},getComponent:async(e,t,n)=>await qe.invoke("getComponent",{name:t,engineType:n,appKey:e}),getComponentReadLock:async(e,t,n)=>await qe.invoke("getComponentReadLock",{name:t,engineType:n,appKey:e}),releaseComponentReadLock:async(e,t,n)=>await qe.invoke("releaseComponentReadLock",{name:t,engineType:n,appKey:e})};async function $u(e,t){const{identifier:n,identifierType:r}=e;let o;if(sn.info(`[${n}] pushTypedMessage start`),"blockID"===r){o=(await Qr(qe.invoke("getAppKeysById",{findType:"engineType-instanceId",findKey:{engineType:f.BLOCK,instanceId:n}})))[1]||[]}else o=[n];return sn.info(`[${n}] pushTypedMessage to appKeys: ${o}`),o.forEach(async e=>{Ru(e,()=>{const r=Ft.get(e);null==r||r.fireEvent(yi.ON_TYPED_MESSAGE,t),sn.info(`[${n}] pushTypedMessage end`,{appKey:e})})}),o}var Qu,zu;!function(e){e.TEMPLATE_CONFIG="templateConfig",e.CUSTOM_MESSAGE="customMessage"}(Qu||(Qu={})),function(e){e.TEMPLATE_SCHEMA="templateSchema"}(zu||(zu={}));const Yu=async e=>{const t=await qe.invoke("getMeta",{uniqueId:e,engineType:f.BLOCK,versionType:un.CURRENT});return{appVersion:t.version,schemaUrl:t.schemaUrl||""}};async function Ju(e,t){switch(t){case zu.TEMPLATE_SCHEMA:return Yu(e)}}const Xu={onSDKLoaded:e=>Dt.tap(Ut.ON_SDK_LOADED,e)};var Zu;function ep(){return"function"!=typeof au(window,["customElements","define"])||"function"!=typeof au(document,["documentElement","attachShadow"])||"function"!=typeof au(window,["TextDecoder","prototype","decode"])||"function"!=typeof au(window,["Blob"])||"function"!=typeof(au(window,["URL","createObjectURL"])||au(window,["webkitURL","createObjectURL"]))||"function"!=typeof au(window,["Reflect","construct"])?{code:Zu.BROWSER_NOT_SUPPORT,message:"The browser does not support, please upgrade your browser or change to Google Chrome"}:{code:Zu.IS_OK}}!function(e){e[e.IS_OK=0]="IS_OK",e[e.BROWSER_NOT_SUPPORT=1]="BROWSER_NOT_SUPPORT"}(Zu||(Zu={}));const tp={_log:(e,t,n)=>{const r={layer:"runtime"};n&&Object.assign(n,r),sn[e](t,n)},info:(e,t)=>{tp._log("info",e,t)},debug:(e,t)=>{tp._log("debug",e,t)},warn:(e,t)=>{tp._log("warn",e,t)},error:(e,t)=>{tp._log("error",e,t)}};var np=tp;class rp{constructor(e,t){p()(this,"messageCache",[]),p()(this,"messageHandlers",[]),p()(this,"worker",void 0),p()(this,"engineType",void 0),p()(this,"appKey",void 0),p()(this,"isActive",!0),p()(this,"_onMessageHandler",e=>{[...this.messageHandlers].forEach(t=>t(e))}),this.engineType=e,this.appKey=t}async create(){await this.toWorker()}checkIsActive(){return this.isActive}postMessage(e){this.worker?(e.replay&&this.messageCache.push(e),this.worker.postMessage(e)):this.messageCache.push(e)}onMessage(e){this.messageHandlers.push(e)}offMessage(e){const t=this.messageHandlers.indexOf(e);t>-1&&this.messageHandlers.splice(t,1)}onReady(e){e&&e()}async toWorker(e){this.worker=await ia.getInstance(this.engineType).getWorkerFromPool(),this.worker.onMessage(this._onMessageHandler),this.messageCache.forEach(t=>{e&&t.event===yi.ON_APP_ROUTE&&(t.data.__$mode__=bi.ACTIVATE,t.data.activeState=e.state),this.worker.postMessage(t)}),this.messageCache=this.messageCache.filter(e=>e.replay)}stop(){const e=this.worker.stop();return e===dt.DESTROY&&(this.worker=null),this.isActive=!1,e}resume(e){this.worker?this.worker.resume(e):this.toWorker(e),this.isActive=!0}destroy(){this.worker&&(this.worker.offMessage(this._onMessageHandler),this.worker.destroy())}}var op,ap;function ip(e){const t=e.data.syncData;var n;return n=t,Jo({name:"getLaunchOptions",params:{},handler:()=>({errMsg:"getLaunchOptions:ok",...n.launchInfo})}),Jo({name:"getHostLaunchQuery",params:{},handler:()=>({errMsg:"getHostLaunchQuery:ok",launchQuery:n.bdpLaunchQuery||""})}),{name:op.LAUNCH,data:t}}async function sp(e){switch(e.type){case Dn.INIT:return async function(e){const t=(await qe.invoke("getConfig",{engineType:f.GADGET})).jssdk;return{name:op.INIT,data:{device:{version:an().platformVersion},jssdk:{url:t.latestSDKUrl,version:t.sdkUpdateVersion},TMAConfig:{platform:"pc",debug:!1},nativeTMAConfig:{}}}}();case Dn.LAUNCH:return ip(e);case Dn.INVOKE:case Dn.PUBLISH:case Dn.ON:return function(e){const t={[Dn.PUBLISH]:op.PUBLISH,[Dn.INVOKE]:op.INVOKE,[Dn.ON]:op.ON};if(t[e.type])return{name:t[e.type],event:e.event,data:JSON.stringify(e.data),callbackId:e.cId,webviewId:e.wIds}}(e);case Dn.INSPECTOR:{const{type:t,event:n}=e;return{name:t,event:n}}}}!function(e){e.INIT="initWorker",e.LAUNCH="appLaunch",e.PUBLISH="subscribeHandler",e.INVOKE="invokeHandler",e.ON="subscribeHandler"}(op||(op={})),function(e){e.PAUSED="paused",e.RESUMED="resumed",e.DISCONNECT="disconnect"}(ap||(ap={}));const cp={[St.OP_INIT_APP_START]:St.MP_APP_LOAD_START,[St.OP_WORKER_CONTAINER_START]:St.MP_JSCORE_LIB_LOAD_START,[St.OP_WORKER_CONTAINER_RESULT]:St.MP_JSCORE_LIB_LOAD_RESULT,[St.OP_WORKER_LOAD_APP_START]:St.MP_JSCORE_APP_LOAD_START,[St.OP_WORKER_LOAD_APP_RESULT]:St.MP_JSCORE_APP_LOAD_RESULT,[St.OP_RENDER_CONTAINER_START]:St.MP_WEBVIEW_LIB_LOAD_START,[St.OP_RENDER_CONTAINER_RESULT]:St.MP_WEBVIEW_LIB_LOAD_RESULT,[St.OP_RENDER_LOAD_APP_START]:St.MP_WEBVIEW_APP_LOAD_START,[St.OP_RENDER_LOAD_APP_RESULT]:St.MP_WEBVIEW_APP_LOAD_RESULT,[St.OP_RENDER_LOAD_PAGE_START]:St.MP_WEBVIEW_PAGE_LOAD_START,[St.OP_RENDER_LOAD_PAGE_RESULT]:St.MP_WEBVIEW_PAGE_LOAD_RESULT,[St.OP_RENDER_PAGE_START]:St.MP_LIFECYCLE_PAGE_START,[St.OP_RENDER_PAGE_SUCCESS]:St.MP_LIFECYCLE_PAGE_ON_READY,[St.OP_APP_FIRST_RENDER_SUCCESS]:St.MP_LOAD_DOM_READY,[St.OP_LOAD_META_START]:St.MP_LOAD_META_START,[St.OP_LOAD_META_RESULT]:St.MP_LOAD_META_RESULT,[St.OP_META_REQUEST_START]:St.MP_META_REQUEST_START,[St.OP_META_REQUEST_RESULT]:St.MP_META_REQUEST_RESULT,[St.OP_LOAD_PACKAGE_START]:St.MP_LOAD_PACKAGE_START,[St.OP_LOAD_PACKAGE_RESULT]:St.MP_LOAD_PACKAGE_RESULT,[St.OP_PACKAGE_DOWNLOAD_START]:St.MP_DOWNLOAD_START,[St.OP_PACKAGE_DOWNLOAD_RESULT]:St.MP_DOWNLOAD_RESULT};function up(e,t){return t&&cp[t]||t}var pp;!function(e){e[e.APPEAR=0]="APPEAR",e[e.DISAPPEAR=1]="DISAPPEAR"}(pp||(pp={}));const lp=new Map;function dp(e,t){const{appKey:n,engineType:r}=t,o=ga(n);return Lt({...e,name:up(0,e.name)}).setAppKey(n).setTracing(o)}function hp(e,t,n){const{appKey:r,engineType:o,render:a}=t,{path:i}=a,s=Ea(r,a),c=Lt({...e,name:up(0,e.name)}).addMap({[Rt.PAGE_PATH]:i}).setAppKey(r);if(s)switch(n){case pp.APPEAR:{const e=s.generateSpan();lp.set(`${r}_${i}`,e),c.setTracing(e);break}case pp.DISAPPEAR:{const e=lp.get(`${r}_${i}`);e&&(c.setTracing(e),lp.delete(`${r}_${i}`));break}default:c.setTracing(s)}else c.setTracing(ga(r));return c}class _p{constructor(e){p()(this,"_socket",void 0),p()(this,"_appKey",void 0),p()(this,"_engineType",void 0),p()(this,"_socketUrl",void 0),p()(this,"callbacks",[]);const{appKey:t,socketUrl:n,engineType:r}=e;this._appKey=t,this._socketUrl=n,this._engineType=r}_reportMonitor(e){return dp(e,{appKey:this._appKey,engineType:this._engineType}).flush()}async create(){return this._reportMonitor({code:je.REAL_MACHINE_DEBUG.SOCKET_INIT}),this._socket=new WebSocket(this._socketUrl),this.init(),new Promise((e,t)=>{this._socket.addEventListener("open",()=>{this.postMessage({type:Dn.INIT,data:{sdkCode:""}});const n=r=>{const{type:o}=r.data;o===Dn.SUCC_INIT?(this.offMessage(n),e()):o===Dn.ERROR_INIT&&(this.offMessage(n),t(new Error("init socket error")))};this.onMessage(n),this._reportMonitor({code:je.REAL_MACHINE_DEBUG.SOCKET_OPEN})}),this._socket.addEventListener("error",e=>{t(e),this._reportMonitor({code:je.REAL_MACHINE_DEBUG.SOCKET_FAILED})})})}init(){this._socket.addEventListener("message",e=>{const t=function(e){const t={invoke:Dn.INVOKE,publish:Dn.PUBLISH,onJSCoreReady:Dn.SUCC_INIT,onDocumentReady:Dn.SUCC_LAUNCH,inspector:Dn.INSPECTOR};if(!t[e.name])return;let n=null;return"invoke"===e.name&&(n="string"==typeof e.params?JSON.parse(e.params):e.params),{type:t[e.name],data:n||e.params,event:e.event,cId:e.callbackId,wIds:e.webviewIds}}(JSON.parse(e.data));t&&[...this.callbacks].forEach(n=>n({...e,data:t}))}),this._socket.addEventListener("close",()=>{Xo({appKey:this._appKey,push:()=>{},engineType:f.GADGET},"updateInspectorStatus",{status:ap.DISCONNECT}),this._reportMonitor({code:je.REAL_MACHINE_DEBUG.SOCKET_DISCONNECT})})}onMessage(e){this.callbacks.push(e)}offMessage(e){const t=this.callbacks.findIndex(t=>t===e);t>-1&&this.callbacks.splice(t,1)}async postMessage(e){const t=await sp(e);t&&this._socket.send(JSON.stringify(t))}stop(){return dt.STOP}resume(){}destroy(){this._socket.close()}}function fp(e,t,n){try{const{extra:r={},event:o,cId:a,data:i={}}=e;let s=r.api_trace,c=!1;P(bt.OP_ENABLE_SDK_API_MONITOR)?c=!Boolean(r.api_trace):s="";const u=i&&"object"==typeof i?Object.keys(i).length:0,p={app_type:E[n],api_name:o,callbackID:a,trace_downgrade:c,params_count:u},l=function(e,t,n){const r=ga(t).subTrace(e);return n&&"string"==typeof n&&(r.traceId=n),r}(o,t,s);return Lt({code:Fe.API_COMMON.RECEIVE_SDK_INVOKE,name:St.OP_API_INVOKE}).addMap(p).flush(l),l}catch(e){return}}function gp(e){const{apiName:t,data:n={},appKey:r,apiTracing:o,enginType:a}=e;if(!o)return;const i=yo(t,n.errMsg),s={result_type:i,app_type:E[a]};i!==ao.SUCCESS&&(s.innerMsg=n.innerMsg||n.errMsg,s.errCode=n.errCode,s.errMsg=n.errMsg,s.innerCode=n.innerCode||n.errCode),Lt({code:Fe.API_COMMON.NATIVE_CALLBACK_INVOKE,name:St.OP_API_INVOKE}).addMap(s).flush(o);const c=o.finish();Lt(c).setAppKey(r).flush()}async function Ep(e){const t={useNewRequestAPI:!1,useNewUploadAPI:!1,useNewDownloadAPI:!1,requestUseJssdktaskId:!P(bt.OP_FORBID_CHECK_API_ERR_CODE)};try{const n=tu(e)||{},r=await b(bo.USE_NEW_NETWORK_API);sn.info("[network-v2-fg]: network settingInfo:"+JSON.stringify(r));const{request:o={},upload:a={},download:i}=r,s=function(e){const t=En(e),n={request:!1,uploadFile:!1,downloadFile:!1};if(t&&t.networkAPIVersion&&"object"==typeof t.networkAPIVersion){const{networkAPIVersion:e}=t,{request:r,uploadFile:o,downloadFile:a}=e;sn.info("[network-v2-fg]: appConfigEnable networkAPIVersion:"+JSON.stringify(e)),"string"==typeof r&&"v2"===r.toLowerCase()&&(n.request=!0),"string"==typeof o&&"v2"===o.toLowerCase()&&(n.uploadFile=!0),"string"==typeof a&&"v2"===a.toLowerCase()&&(n.downloadFile=!0)}else sn.info("[network-v2-fg]: appConfigEnable networkAPIVersion is empty");return n}(e);o.forceDisable?t.useNewRequestAPI=!1:n.appId&&o.hasOwnProperty(n.appId)?t.useNewRequestAPI=o[n.appId]:(!0===o.default||s.request)&&(t.useNewRequestAPI=!0),a.forceDisable?t.useNewUploadAPI=!1:n.appId&&a.hasOwnProperty(n.appId)?t.useNewUploadAPI=a[n.appId]:(!0===a.default||s.uploadFile)&&(t.useNewUploadAPI=!0),i.forceDisable?t.useNewDownloadAPI=!1:n.appId&&i.hasOwnProperty(n.appId)?t.useNewDownloadAPI=i[n.appId]:(!0===i.default||s.downloadFile)&&(t.useNewDownloadAPI=!0)}catch(e){sn.error("[network-v2-fg]: init fgInfo catch error:"+(e&&e.message))}return t.useNewRequestAPI&&function(e){if(P(bt.OP_REQUEST_DISABLE_PRE_FETCH,!0))return!1;const t=En(e);if(t){const{prefetches:e,prefetchRules:n}=t,r=Array.isArray(e)&&e.length||Array.isArray(n)&&n.length;if(P(bt.OPEN_APPENGINE_PREFETCH_ENABLE,!0)&&r)return!0}return!1}(e)&&(t.useNewRequestAPI=!1),sn.info("[network-v2-fg]: inject worker fgInfo:"+JSON.stringify(t)),t}class mp{constructor(e){p()(this,"_worker",void 0),p()(this,"_appKey",void 0),p()(this,"_engineType",void 0),p()(this,"_isDestroyed",!1),p()(this,"_recordReplayMessage",void 0),p()(this,"_pushHooks",void 0),p()(this,"_enableHooks",!1),p()(this,"_offOnMessage",void 0),p()(this,"_preload_deps_map",{}),p()(this,"_debugWS",void 0),p()(this,"_isVisible",!0),p()(this,"create",async()=>{this._reportMonitor({name:St.OP_WORKER_CONTAINER_START}).flush(),this._debugWS?this._worker=new _p({appKey:this._appKey,engineType:this._engineType,socketUrl:this._debugWS}):this._worker=new rp(this._engineType,this._appKey),this._offOnMessage=this._initOnMessage();try{const[e,t]=await Promise.all([gu(this._engineType,this._appKey),Ep(this._appKey),this._worker.create()]),{hostConfigInfo:n}=Qt(this._appKey,zt.APP_LAUNCH_PARAMS)||{};this._worker.postMessage({type:Dn.SET_HOST_CONFIG_INFO,data:{hostConfigInfo:n,traceData:e,fgInfo:t}}),this._reportMonitor({name:St.OP_WORKER_CONTAINER_RESULT}).setResultTypeSuccess().flush()}catch(e){throw this._reportMonitor({name:St.OP_WORKER_CONTAINER_RESULT}).setResultTypeFail().flush(),e}}),p()(this,"loadAppServiceJs",e=>new Promise((t,n)=>{this._reportMonitor({name:St.OP_WORKER_LOAD_APP_START}).flush();const r=e=>{const{type:o}=e.data;if(o===Dn.SUCC_LAUNCH)this._worker.offMessage(r),t(),this._reportMonitor({name:St.OP_WORKER_LOAD_APP_RESULT}).setResultTypeSuccess().flush(),sn.info("app service js execute success on worker",{appKey:this._appKey});else if(o===Dn.ERROR_LAUNCH){this._worker.offMessage(r);const t=e.data.data;n(new Error("app service js execute fail: "+t.errMsg)),this._reportMonitor({name:St.OP_WORKER_LOAD_APP_RESULT}).setResultTypeFail().setErrorMessage(""+t.errMsg).flush()}};sn.info("start load app service",{appKey:this._appKey}),this._worker.onMessage(r),this._postMessage({type:Dn.LAUNCH,data:e,replay:this._recordReplayMessage}),this._engineType===f.BLOCK&&t()})),p()(this,"loadSubPackageAppServiceJs",e=>new Promise((t,n)=>{this._reportMonitor({name:St.OP_SUBPKG_SERVICE_LOAD_START}).flush();const r=o=>{const{type:a}=o.data;if(a===Dn.LOAD_SUB_PKG_SERVICE_SUCCESS)this._worker.offMessage(r),sn.info("app service js execute success on worker. subPkgRoot: "+e,{appKey:this._appKey}),this._reportMonitor({name:St.OP_SUBPKG_SERVICE_LOAD_RESULT}).setResultTypeSuccess().flush(),t();else if(a===Dn.LOAD_SUB_PKG_SERVICE_FAIL){this._worker.offMessage(r);const t=o.data.data,a=t.errMsg;this._reportMonitor({name:St.OP_SUBPKG_SERVICE_LOAD_RESULT}).setResultTypeFail().setErrorMessage(a).flush(),n(new Error(`app service js execute fail subPkgRoot: ${e} err: ${t.errMsg}`))}};sn.info("start load app service subPkgRoot: "+e,{appKey:this._appKey}),this._worker.onMessage(r),this._postMessage({type:Dn.LOAD_SUB_PKG_SERVICE,data:{subpackageRoot:e}})})),p()(this,"handlerInvoke",async e=>{const t=fp(e,this._appKey,this._engineType);try{const n=await zc(e.event,e.data,{engineType:this._engineType,appKey:this._appKey,apiTracing:t,push:(e,t)=>this.fireEvent(e,t,!0)},e.extra);this.callbackInvoke({event:e.event,cId:e.cId,data:n,apiTracing:t})}catch(n){sn.error(`jsc handlerInvoke fail ${n.stack||n}, apiName: ${e.event}`,{appKey:this._appKey}),this.callbackInvoke({event:e.event,cId:e.cId,data:{errMsg:e.event+":fail",apiTracing:t}})}}),p()(this,"handlerTransfer",e=>{const t=e.appKey||this._appKey;try{JSON.parse(e.wIds).forEach(n=>{const r=er.getRender(t,Number(n));r&&r.transferMsg(e.event,n,e.data)})}catch(e){}}),p()(this,"callbackInvoke",e=>{const{event:t,cId:n,data:r={},apiTracing:o}=e,a={type:Dn.INVOKE,data:r,cId:n,event:t,appKey:this._appKey};gp({apiName:t,data:r,appKey:this._appKey,apiTracing:o,enginType:this._engineType}),this._postMessage(a)}),p()(this,"fireEvent",(e,t,n)=>{const r={appKey:this._appKey,type:Dn.ON,event:e,data:t,replay:!n&&this._recordReplayMessage};this.callWithPushHooks(()=>this._postMessage(r))}),p()(this,"_postMessage",e=>{this._worker&&this._worker.postMessage(e)}),p()(this,"_initOnMessage",()=>{const e=e=>{const{type:t}=e.data;t===Dn.INVOKE?this.handlerInvoke(e.data):t===Dn.PUBLISH?this.handlerTransfer(e.data):this.handlerFallback(e.data)};return this._worker.onMessage(e),()=>{this._worker.offMessage(e)}});const{engineType:t,appKey:n,debugWS:r}=e;this._appKey=n,this._engineType=t,this._debugWS=r,this._recordReplayMessage=t===f.BLOCK&&Pn()}getVisibleState(){return this._isVisible}setVisibleState(e,t){t&&this._engineType!==f.BLOCK?e?qe.invoke("onAppShow",{appKey:this._appKey}):qe.invoke("onAppHide",{appKey:this._appKey}):this._isVisible!==e&&(this._isVisible=e,this._isVisible?this.fireEvent(yi.ON_APP_ENTER_FOREGROUND):this.fireEvent(yi.ON_APP_ENTER_BACKGROUND))}disableRecordReplayMessage(){this._recordReplayMessage=!1}setHooksForPushEvent(e){this._pushHooks=e}_reportMonitor(e){return dp(e,{appKey:this._appKey,engineType:this._engineType})}async callWithPushHooks(e,...t){if(!this._pushHooks||!this._enableHooks)return e(...t);const{before:n,after:r}=this._pushHooks,o=await n(this._appKey),a=e(...t);return o&&r(this._appKey),a}isActive(){return this._worker.checkIsActive()}activate(e){return{priority:0,run:()=>new Promise(async(t,n)=>{if(this.isActive()||this._isDestroyed)return t(!1);const r=e=>{if(e.data.type!==Dn.APP_STATUS_CHANGE)return;const o=e.data.data;"activate"===o.type&&(this._worker.offMessage(r),"success"===o.status?t(!0):(n(new Error(xt.ACTIVATE_FAIL)),this._worker.stop()))};this._worker.onMessage(r),this._worker.resume(e)}),cancel:()=>!1}}inactivate(e,t){let n,r,o;return{priority:t?1:0,run:()=>new Promise((a,i)=>{if(!this.isActive()||this._isDestroyed)return a(!1);this._enableHooks=!0,r=i;const s=()=>{n=e=>{if(e.data.type!==Dn.APP_STATUS_CHANGE)return;const t=e.data.data;"inactivate"===t.type&&(this._worker.offMessage(n),"success"===t.status?(this._worker.stop(),a(!0)):i(new Error(xt.INACTIVATE_FAIL)))},this._worker.onMessage(n),this._enableHooks=!1,this.fireEvent(yi.ON_APP_INACTIVATE,{force:t}),this._enableHooks=!0};e?o=setTimeout(s,e):s()}),cancel:()=>!!r&&(n&&this._worker.offMessage(n),o&&clearTimeout(o),r(new Error(xt.INACTIVATE_CANCEL)),!0)}}transferMsg(e,t,n){const r={type:Dn.PUBLISH,wIds:t,event:e,data:n,appKey:this._appKey};this.callWithPushHooks(()=>this._postMessage(r))}destroy(){this._offOnMessage&&this._offOnMessage(),this.fireEvent(yi.ON_APP_DESTROY),this._worker.destroy(),this._isDestroyed=!0}handlerFallback(e){const t={appKey:this._appKey,push:()=>{},engineType:this._engineType};switch(e.type){case Dn.INSPECTOR:Xo(t,"updateInspectorStatus",{status:e.event});break;case Dn.CONCAT_FILES:zc("concatFiles",e.data,t)}}preloadTargetDeps(e,t,n){const r=function(e,t){let n="pc";return Pi.includes(e)&&(n="mobile"),`${t=t.replace(/[/\\]/g,"-")}-${n}-preload-file-deps.js`}(n,e);this._preload_deps_map[r]||(this._preload_deps_map[r]=!0,this._postMessage({type:Dn.LOAD_CONCAT_FILE,data:{path:r,appDir:t,mode:n}}))}updateSyncData(e,t){const n={type:Dn.UPDATE_SYNC,event:e,data:t};this._postMessage(n)}}class yp{constructor(e){p()(this,"_appKey",void 0),p()(this,"_engineType",void 0),p()(this,"create",async()=>{}),p()(this,"loadAppServiceJs",async()=>{}),p()(this,"handlerInvoke",async()=>{}),p()(this,"handlerTransfer",()=>{}),p()(this,"callbackInvoke",()=>{}),p()(this,"fireEvent",(e,t)=>{const n=er.getCurrent(this._appKey);n&&n.fireEvent(e,t)}),this._appKey=e.appKey,this._engineType=e.engineType}getVisibleState(){return!0}setVisibleState(){}disableRecordReplayMessage(){}setHooksForPushEvent(){}activate(){return{priority:0,run:()=>Promise.resolve(!1),cancel:()=>!1}}inactivate(e){return{priority:0,run:()=>Promise.resolve(!1),cancel:()=>!1}}transferMsg(){}destroy(){}preloadTargetDeps(){}updateSyncData(){}loadSubPackageAppServiceJs(e){return Promise.resolve()}}class Ap{get renderId(){return this._renderId}set renderId(e){this._renderId=e}get path(){return this._path}set path(e){this._path=e}get pathWithQuery(){return this._pathWithQuery}set pathWithQuery(e){this._pathWithQuery=e}get type(){return this._type}set type(e){this._type=e}get title(){return this._title}set title(e){this._title=e}get isFirstPage(){return this._isFirstPage}set isFirstPage(e){this._isFirstPage=e}constructor(e,t){p()(this,"_render",void 0),p()(this,"_renderId",void 0),p()(this,"_path",void 0),p()(this,"_pathWithQuery",void 0),p()(this,"_type",void 0),p()(this,"_appKey",void 0),p()(this,"_engineType",void 0),p()(this,"document",void 0),p()(this,"rootId","__root__"),p()(this,"styleId","__style_node__"),p()(this,"_title",void 0),p()(this,"_isFirstPage",void 0),p()(this,"app",void 0),p()(this,"vdomRoot",void 0),p()(this,"theme",void 0),p()(this,"_createPromise",void 0),p()(this,"_loadPageFramePromise",void 0),p()(this,"_loadSubPageFramePromise",void 0),p()(this,"create",e=>(this._createPromise||(this.document=e,this.vdomRoot=this.document.querySelector("#"+this.rootId),this._reportMonitor({name:St.OP_RENDER_CONTAINER_START}).flush(),this._createPromise=new Promise(async(t,n)=>{const r=hu.getInstance(this._engineType,e).getRenderFromPool();this._render=r[0];try{sn.info("render container create start",{appKey:this._appKey});const e=r[1],n=gu(this._engineType,this._appKey),o=await Promise.all([e,n]);this._render.postMessage({type:Dn.SET_TRACE,data:o[1]});const{hostConfigInfo:a}=Qt(this._appKey,zt.APP_LAUNCH_PARAMS)||{};a&&this._render.postMessage({type:Dn.SET_HOST_CONFIG_INFO,data:{hostConfigInfo:a}}),this._initOnMessage(),sn.info("render container create succ",{appKey:this._appKey}),t(),this._reportMonitor({name:St.OP_RENDER_CONTAINER_RESULT}).setResultTypeSuccess().flush()}catch(e){const t=Ve(e);n(new Error("render container create fail: "+t)),this._createPromise=null,this._reportMonitor({name:St.OP_RENDER_CONTAINER_RESULT}).setResultTypeFail().flush()}})),this._createPromise)),p()(this,"loadPageFrameJS",(e,t)=>{const n=t?"_loadSubPageFramePromise":"_loadPageFramePromise";return this[n]||(sn.info("start load page frame, inSubPkg: "+!!t,{appKey:this._appKey}),!t&&this._syncThemeChange(),this._reportMonitor({name:St.OP_RENDER_LOAD_APP_START}).flush(),this[n]=new Promise(async(r,o)=>{try{await this._render.importScript(e,this,this._putBlockCssToStyle),r(),this._reportMonitor({name:St.OP_RENDER_LOAD_APP_RESULT}).setResultTypeSuccess().flush()}catch(e){const r=Ve(e);o(new Error(`render loadPageFrameJS fail: ${r}, inSubPkg: ${!!t}`)),this[n]=null,this._reportMonitor({name:St.OP_RENDER_LOAD_APP_RESULT}).setResultTypeFail().setErrorMessage(r).flush()}})),this[n]}),p()(this,"loadPagePathFrameJS",async e=>{try{this._reportMonitor({name:St.OP_RENDER_LOAD_PAGE_START}).flush();const t=await this._render.importScript(e);return this._reportMonitor({name:St.OP_RENDER_LOAD_PAGE_RESULT}).setResultTypeSuccess().flush(),t}catch(e){throw this._reportMonitor({name:St.OP_RENDER_LOAD_PAGE_RESULT}).setResultTypeFail().setErrorMessage(Ve(e)).flush(),e}}),p()(this,"_initOnMessage",()=>{this._render.onMessage(e=>{e.appKey===this._appKey&&(e.type===Dn.INVOKE?this.handlerInvoke(e):e.type===Dn.PUBLISH&&this.handlerTransfer(e))})}),p()(this,"_postMessage",e=>{try{this._render.postMessage(e)}catch(e){throw new Error("render postMessage fail: "+e)}}),p()(this,"_putBlockCssToStyle",(e,t)=>{t.forEach(t=>{const n=e.querySelector("#"+this.styleId),r=document.createElement("style");r.type="text/css",r.textContent=t,n&&n.appendChild(r)})}),p()(this,"_handlerRenderSuccess",()=>{Ou(this._appKey,"success"),this._reportMonitor({name:St.OP_RENDER_PAGE_SUCCESS,code:He.LIFECYCLE.PAGE_READY}).flush()}),p()(this,"_handleThemeChange",(e,t)=>{t&&t!==this._appKey||(this.theme=e,this.fireEvent("onThemeChange",{theme:e}))}),this._appKey=t,this._engineType=e}show(){this._render.show(),this._reportMonitor({code:He.LIFECYCLE.PAGE_APPEAR},pp.APPEAR).flush()}hide(){this._render.hide(),this._reportMonitor({code:He.LIFECYCLE.PAGE_DISAPPEAR},pp.DISAPPEAR).flush()}setBackGroundColor(e){this._render.setStyles({backgroundColor:e})}async handlerInvoke(e){const t=fp(e,this._appKey,this._engineType);try{const n=await zc(e.event,e.data,{engineType:this._engineType,appKey:e.appKey||this._appKey,push:this.fireEvent.bind(this)});this.callbackInvoke({event:e.event,cId:e.cId,data:n,apiTracing:t})}catch(n){this.callbackInvoke({event:e.event,cId:e.cId,data:{errMsg:e.event+":fail",apiTracing:t}})}}handlerTransfer(e){const{appKey:t=this._appKey,data:n,event:r,wIds:o}=e,a=Ft.get(t);if(a&&a.transferMsg(r,o,n),"custom_event_PAGE_EVENT"===r&&"string"==typeof n)try{const e=JSON.parse(n);"__DOMReady"===(e?e.data||e.WRAPPED_DATA:{}).eventName&&(sn.info("app render success",{appKey:this._appKey}),this._handlerRenderSuccess())}catch(e){sn.error(`publish message error: ${e}, ${JSON.stringify(n)}`,{appKey:this._appKey})}}callbackInvoke(e){const{event:t,cId:n,data:r={},apiTracing:o}=e;gp({apiName:t,data:r,appKey:this._appKey,apiTracing:o,enginType:this._engineType}),this._postMessage({type:Dn.INVOKE,event:t,cId:n,data:r,appKey:this._appKey})}transferMsg(e,t,n){this._postMessage({type:Dn.PUBLISH,event:e,data:n,wIds:t,appKey:this._appKey})}fireEvent(e,t){const n={appKey:this._appKey,type:Dn.ON,event:e,data:t};this._postMessage(n)}destroy(){ea.offThemeChange(this._handleThemeChange),this.fireEvent(yi.ON_APP_DESTROY),this._render.destroy(),this._reportMonitor({code:He.LIFECYCLE.PAGE_DISAPPEAR},pp.DISAPPEAR).flush()}_reportMonitor(e,t){return hp(e,{appKey:this._appKey,engineType:this._engineType,render:this},t).addMap({[Rt.IS_FIRST_LAUNCH_PAGE]:this.isFirstPage?1:0})}sendGlobalVarMessage(e){this._postMessage({type:Dn.SET_GLOBAL,data:e})}_syncThemeChange(){const e=Zc(this._appKey)?ea.getCurrentTheme(this._appKey):"light";this.theme=e,this.fireEvent("onThemeInit",{theme:e}),Zc(this._appKey)&&ea.onThemeChange(this._handleThemeChange)}}const Tp=new cn(0),Sp=e=>Tp.createTask(e.appKey,{run:async()=>(async e=>{const{docRoot:t,appKey:n,engineType:r,debugWsUrl:o,viewOnly:a}=e;try{en(n,Xt.GET_SDK_CODE_START),await ra(r),en(n,Xt.GET_SDK_CODE_END)}catch(e){throw sn.info(`${n} initContainer get jssdk fail ${e}`,{appKey:n}),Ge.fromError(e,{code:pe.SDK_INVALID})}const i=new(a?yp:mp)({engineType:r,appKey:n,debugWS:o}),s=new Ap(r,n);Ft.add(n,i),er.addPreload(n,s);const c=ku.createTask(n,async()=>{await i.create(),en(n,Xt.CREATE_WORKER_CONTAINER_END)}),u=ku.createTask(n,async()=>{await s.create(t),en(n,Xt.CREATE_RENDER_CONTAINER_END)});try{return en(n,Xt.EXEC_SDK_CODE_START),await Promise.all([c,u]),sn.info(n+" container create & webview.js success",{appKey:n}),{jsc:i,render:s}}catch(e){const t=Ve(e);throw sn.info(`${n} container create & webview.js fail ${t}`,{appKey:n}),Ft.remove(n),er.clearPreload(n),Ge.fromError(e,{code:pe.CONTAINERS_INIT_ERROR,message:t})}})(e)});function vp(e,t){if(!t)return!1;const n=t.split("?")[0];return e.pages.indexOf(n)>-1}function Rp(e){let t=e.startPage||"";return t.includes("?")||(t=F(t)),vp(e.appConfig,t)?t:function(e){const{mode:t=Ni,appConfig:n}=e,r=n.entryPagePath,o=n.ext||{};if(!o.defaultPages)return r;const{defaultPages:a}=o,i=e=>vp(n,e)?e:r;return Pi.indexOf(t)>-1&&a.sidebarMode?i(a.sidebarMode):wi.indexOf(t)>-1&&a.PCMode?i(a.PCMode):r}(e)}function Op(e){const{appKey:t,engineType:n}=e;return{appKey:t,engineType:n,push:()=>{}}}const Cp={syncLaunchOptions:e=>{const{path:t,query:n}=H(Rp(e)||"",!0),{mode:r,scene:o}=e;return{launchInfo:{scene:o||1e3,mode:r,path:t,query:n}}},syncSystemInfo:async e=>({systemInfo:await zc("getSystemInfo",{},Op(e))}),syncSystemParams:async e=>({systemParams:await zc("getSystemParams",{},Op(e))}),syncStorageInfo:async e=>({storage:(await zc("getStorageData",{},Op(e))).data||{}}),syncHostLaunchQuery:e=>({bdpLaunchQuery:e.bdpLaunchQuery||""}),syncOfflineIframeData:e=>({offlineIframeData:{appDir:e.appDir}})};async function Ip(e){const{appKey:t,engineType:n,mode:r,appPkgInfo:o,bdpLaunchQuery:a,scene:i,startPage:s,parentMessageChannel:c,canGetAppDir:u}=e,p=o.appConfig,l={appKey:t,mode:r,parentMessageChannel:c},d=o,h=o,_=u?{appDir:d.basePath}:{};return l.syncData=await async function(e,t){t||(t=Object.keys(Cp));const n={};return await Promise.all(t.map(async t=>{const r=await Cp[t](e);Object.assign(n,r)})),n}({engineType:n,appKey:t,mode:r,appConfig:p,scene:i,startPage:s,bdpLaunchQuery:a,..._},n===f.BLOCK?["syncSystemInfo"]:void 0),d.basePath?l.appDir=d.basePath:l.appCodes=h.code,l}const Pp=async e=>{const{appKey:t,engineType:n,mode:r,bdpLaunchQuery:o,scene:a,parentMessageChannel:i,startPage:s,canAppUseIframe:c}=e;let u,p;try{en(t,Xt.GET_APP_CODE_START),u=await gn(e),en(t,Xt.GET_APP_CODE_END),sn.info(t+" get app code success",{appKey:t})}catch(e){throw sn.info(`${t} get app code fail ${e}`,{appKey:t}),Ge.fromError(e,{code:pe.GET_APP_CODE_FAIL})}if(en(t,Xt.GET_APP_LAUNCH_DATA_START),e.engineType===f.GADGET){const n=P(bt.OPENPLATFORM_PC_OFFLINE_IFRAME,!0),r=e.mode&&-1===[Ci.MODE_WINDOW,Ci.MODE_WINDOW_SEMI].indexOf(e.mode);p=c&&n&&r,sn.info(`${t} [getAppDirSync] canGetAppDir: fg enabled: ${n},canAppUseIframe:${c},mode: ${e.mode}`)}const l=await Ip({engineType:n,appKey:t,mode:r,appPkgInfo:u,bdpLaunchQuery:o,scene:a,parentMessageChannel:i,startPage:s,canGetAppDir:p});en(t,Xt.GET_APP_LAUNCH_DATA_END),function(e,t){if(!Zc(t))return;const n=async function(n,r){if(r&&r!==t)return;sn.info(`theme change to ${n} start`,{appKey:t});const o=Ft.get(t),a=await zc("getSystemInfo",{},{engineType:e,appKey:t,push:()=>{}});o.updateSyncData("getSystemInfoSync",a),o.fireEvent("onThemeChange",{theme:n},!0),sn.info(`theme change to ${n} end`,{appKey:t})};ea.onThemeChange(n),Wt(t,()=>{ea.offThemeChange(n)})}(n,t);try{const e=Ft.get(t),o=er.getPreload(t),a=u;a.basePath&&e.preloadTargetDeps("app",a.basePath,r),en(t,Xt.EXEC_APP_CODE_START);const i=ku.createTask(t,async()=>{await e.loadAppServiceJs(l),en(t,Xt.EXEC_APP_SERVICE_JS_END)}),s=ku.createTask(t,async()=>{await o.loadPageFrameJS(du(u)),en(t,Xt.EXEC_PAGE_FRAME_JS_END)});return await Promise.all([i,s]),Xo({appKey:t,engineType:n,push:()=>{}},"hideLoading"),u}catch(e){const n=Ve(e);throw sn.error(`${t} run app code fail ${n}`,{appKey:t}),new Ge({code:pe.RUN_APP_CODE_ERROR,message:n})}};var wp,bp,Np;!function(e){e.APP_LAUNCH="appLaunch",e.NAVIGATE_TO="navigateTo",e.NAVIGATE_BACK="navigateBack",e.REDIRECT_TO="redirectTo",e.SWITCH_TAB="switchTab",e.RE_LAUNCH="reLaunch"}(wp||(wp={})),function(e){e.FRAME="iframe",e.WEBVIEW="webview",e.GADGET="gadget"}(bp||(bp={})),function(e){e.WORKER="worker",e.RENDER="render",e.WEBVIEW="webview"}(Np||(Np={}));var Mp,Lp,kp;!function(e){e.MESSAGE_TO_RUNTIME_JSC="transfer_message_to_runtime_JSC",e.MESSAGE_TO_JSSDK="onTransferMessage"}(Mp||(Mp={})),function(e){e.TRANSFER_MESSAGE="transferMessage"}(Lp||(Lp={})),function(e){e.IPC_CHANNEL="PC-API-IPC-MESSAGE"}(kp||(kp={}));const Dp=async e=>{var t;const{engineType:n,appKey:r}=e;return n===f.BLOCK&&await async function(e){const{appKey:t}=e,n=Ft.get(t),r=er.getPreload(t),o=e.appConfig.pages[0];er.addRender(t,r);const a=e.appPkgInfo.basePath;a&&n.preloadTargetDeps(o,a,e.mode),await Dt.callParallel(Ut.ON_BOTH_DOCUMENTREADY,{jsc:n,render:r,appKey:t,viewOnly:!!e.appConfig.viewOnly,data:{appKey:t,path:o,webviewId:1,query:{},openType:wp.APP_LAUNCH}},t)}(e),null===(t=Ft.get(r))||void 0===t||t.disableRecordReplayMessage(),new Promise(e=>Ru(r,e))};var Up;!function(e){e.APP_LAUNCH="appLaunch",e.NAVIGATE_TO="navigateTo",e.NAVIGATE_BACK="navigateBack",e.REDIRECT_TO="redirectTo",e.SWITCH_TAB="switchTab",e.RE_LAUNCH="reLaunch"}(Up||(Up={}));const{isFeatureEnabled:Kp}=Ao;function xp(e){switch(e.engineType){case f.BLOCK:return function(e){const t=ga(e.appKey);return{uniqueId:e.id,instanceId:e.instanceId,engineType:f.BLOCK,subType:e.subType,appKey:e.appKey,versionType:e.debugUrl?un.PREVIEW:un.CURRENT,debugUrl:e.debugUrl,tracing:t.serialize(),curBasicLibVersion:an().blockitVersion,forceUpdate:e.forceUpdate}}(e);case f.H5:return function(e){const t=ga(e.appKey);return{engineType:f.H5,uniqueId:e.id,webviewUnique:e.webviewUnique,appKey:e.appKey,mode:e.mode,versionType:e.debugUrl?un.PREVIEW:un.CURRENT,scene:e.scene,botId:e.botId,name:e.name,iconUrl:e.iconUrl,tracing:t.serialize(),debugUrl:e.debugUrl,forceUseMeta:e.forceUseMeta}}(e);case f.Z_AXIS:return function(e){const t=ga(e.appKey);return{engineType:f.Z_AXIS,uniqueId:e.id,appKey:e.appKey,versionType:e.debugUrl?un.PREVIEW:un.CURRENT,tracing:t.serialize()}}(e);default:return function(e){const t=ga(e.appKey);return{uniqueId:e.id,webviewUnique:e.webviewUnique,engineType:f.GADGET,appKey:e.appKey,mode:e.mode,versionType:e.debugUrl?un.PREVIEW:un.CURRENT,scene:e.scene,debugUrl:e.debugUrl,tracing:t.serialize(),startPage:e.startPage,leastVersion:e.leastVersion}}(e)}}function Fp(e,t){const{appKey:n,engineType:r}=t,o=function(e){const t=Ge.fromError(e),n=t.code;let r;return r=n===pe.SERVER_FETCH_META_SERVER_FAIL?ge:n===pe.SERVER_FETCH_META_NETWORK_ERROR?he:n===pe.SERVER_FETCH_META_SERVER_INTERNAL_FAIL?fe:n===pe.SERVER_FETCH_META_DECRYPT_ERROR?_e:n===pe.SERVER_PACKAGE_FETCH_NETWORK_ERROR?Ee:n===pe.SERVER_PACKAGE_FETCH_SERVER_INTERNAL_FAIL?me:n===pe.SERVER_PACKAGE_FETCH_RUST_FAIL?ye:n===pe.SERVER_PACKAGE_INSTALL_FILE_FAILED?Ae:n===pe.SERVER_PACKAGE_INSTALL_BLOB_FAILED?Te:n===pe.SERVER_SDK_FETCH_NETWORK_ERROR?Se:n===pe.SERVER_SDK_FETCH_INTERNAL_ERROR?ve:n===pe.SERVER_SDK_FETCH_RUST_FAILED?Re:n===pe.SERVER_SDK_INSTALL_FILE_FAILED?Oe:n===pe.SERVER_SDK_INSTALL_BLOB_FAILED?Ce:n===pe.SERVER_SDK_SETTINGS_NETWORK_ERROR?Pe:n===pe.SERVER_SDK_SETTINGS_HOST_ERROR?Ie:n===pe.SERVER_SDK_SETTINGS_SERVER_INTERNAL_ERROR?we:n===pe.CONTAINERS_INIT_ERROR?be:n===pe.RUN_APP_CODE_ERROR?Ne:n===pe.APP_CHECK_FAIL?Me:n===pe.SERVER_SDK_VERSION_IS_LOW?He.LAUNCH.JSSDK_VERSION_IS_LOW:n===pe.SERVER_BASIC_LIB_VERSION_IS_LOW?He.LAUNCH.BLOCKIT_LIB_VERSION_IS_LOW:n===pe.SERVER_CLIENT_VERSION_IS_LOW?He.LAUNCH.CLIENT_VERSION_IS_LOW:Le,t.setMap({monitorCode:r}),t}(Ge.fromError(e));dp({name:St.OP_APP_LAUNCH_RESULT},{appKey:n,engineType:r}).addMap({[Rt.ENGINE_TYPE]:r}).setError(o).setResultTypeFail().flush()}n(21);function Hp(e){en(e,Xt.APP_DESTROY),sn.info("runtime appDestroy, timeline: "+JSON.stringify(tn(e)),{appKey:e});const t=qe.invoke("onAppDestroy",{appKey:e}),n=Ft.get(e),r=er.getRenders(e);return n&&n.destroy(),r&&r.forEach(e=>e.destroy()),Ft.remove(e),er.clear(e),ku.clearTasks(e),function(e){const t=hn.get(e),n=t?dn.get(t):null;hn.delete(e),n&&(n.refs.delete(e),0===n.refs.size&&dn.delete(t))}(e),Yo.offHostEvents(e),ua.removeRouter(e),su.removeTabbarIns(e),qe.publish(pc.DESTROYED,{appKey:e},!0),function(e){const t=Vt.get(e);t&&(t.forEach(e=>e()),Vt.delete(e))}(e),ea.clearCurrentTheme(e),t}function jp(e,t,n){const{appKey:r}=e;"pending"===function(e){return Qt(e,zt.RENDER_STATUS)}(r)&&(Ou(r,"fail"),qe.invoke("onAppRenderFail",{appKey:r,errCode:t.code}),Dt.callParallel(Ut.ON_LOAD_FAIL,{errMsg:t.message,errCode:t.code,displayMessage:t.displayMessage,extraErrInfo:n},r),Fp(t,e),Hp(r),sn.error("runtime appLaunch failed "+Ve(t),{appKey:r}))}async function Bp(e){const t=e.appKey,n=Date.now();Ou(t,"pending"),function(e,t){const n=new da;t&&n.deserialize(t),_a(e,e,n)}(t,e.appTracing),en(t,Xt.APP_LAUNCH_START);const r=(n,r)=>{const o=dp({name:n},{appKey:t,engineType:e.engineType});r&&o.addMap(r),o.flush()};$t(t,zt.APP_LAUNCH_PARAMS,e),sn.info("runtime appLaunch start",{appKey:t}),r(St.OP_APP_LAUNCH_START,{[Rt.ENGINE_TYPE]:e.engineType,[Rt.INSTANCE_ID]:e.instanceId,[Rt.IDENTIFIER]:e.id,subType:e.subType});const o=dp({name:St.OP_APP_LAUNCH_RESULT},{appKey:t,engineType:e.engineType});if(e.engineType===f.BLOCK){const n=()=>({code:pe.LAUNCH_TIMEOUT,message:"runtime launch timeout, timeline: "+JSON.stringify(tn(t))});Cu(t,()=>{r(St.OP_APP_LANNCH_TIMEOUT,n())},2e4),Cu(t,()=>{jp({appKey:t,engineType:e.engineType},new Ge(n()))})}const a=$(gn({id:e.id,subType:e.subType,engineType:e.engineType,debugUrl:e.debugUrl,appKey:e.appKey,leastVersion:e.leastVersion,forceUpdate:e.forceUpdate}));let i=null;e.debugUrl||e.engineType!==f.BLOCK||(i=$((async e=>{const{appKey:t,id:n}=e;return Au.createTask(n,{run:async()=>{sn.info(t+" app check start",{appKey:t});const{host:e}=an(),r=await qe.invoke("checkAppStatus",{uniqueId:n,host:e,engineType:f.BLOCK});if(sn.info(t+" app check success",{appKey:t}),r.code!==yu.SUCCESS)throw r;if(r.code===yu.SUCCESS&&!r.data.usable)throw r.data.rawResponse}})})({appKey:t,id:e.id})));const s=async(...t)=>{const n={appKey:e.appKey,engineType:e.engineType};if(i)try{await function(e,t,n){const r=new Promise((e,r)=>{const o="resolve"===t?e:r;setTimeout(()=>{o("timeout")},n)});return Promise.race([r,e])}(i,"resolve",1e3)}catch(e){return jp(n,Tu(e),e)}jp(n,...t)};try{!function(e){const{appKey:t,engineType:n}=e,r={engineType:n,appKey:t,push:()=>{}};n!==f.GADGET&&n!==f.H5||Xc("APP_NOTIFICATION",e=>{Xo(r,"showAppNotification",e.notification)},t),Xc("PING",e=>{qe.publish("PONG",e)},t),Xc("UPDATE_READY",t=>{mn(e),Dt.callParallel(Ut.ON_UPDATE_READY,t.updateInfo,t.appKey)},t)}(e),en(t,Xt.ON_APP_CREATE_START),r(St.OP_ON_CREATE_APP_START);const n=await qe.invoke("onAppCreateStart",xp(e));!function(e,t){$t(e,zt.APP_BASE_ATTRS,t)}(t,n),Dt.callParallel(Ut.ON_APP_CREATE_START,{},e.appKey),sn.info(e.appKey+" onAppCreateStart call success",{appKey:t}),r(St.OP_ON_CREATE_APP_Result),en(t,Xt.ON_APP_CREATE_END)}catch(n){const r=n&&n.code,o=Ve(n),a=Ge.fromError(n);return a.message="service onAppCreateStart fail, "+o,void(r!==pe.USER_CANCEL&&(sn.info(`${e.appKey} onAppCreateStart call fail ${o}`,{appKey:t}),s(a)))}let c,u,p,l;try{c=await a}catch(e){return void s(Ge.fromError(e,{code:pe.GET_APP_CODE_FAIL}))}if(e.engineType===f.H5||e.engineType===f.Z_AXIS)return Dt.callParallel(Ut.ON_LOAD_SUCCESS,{packageSourceType:c&&c.packageSourceType},e.appKey),qe.invoke("onAppRenderSuccess",{appKey:e.appKey});try{en(t,Xt.INIT_CONTAINER_START),r(St.OP_INIT_CONTAINER_START);const n=await Sp({appKey:e.appKey,docRoot:e.docRoot,engineType:e.engineType,debugWsUrl:e.debugWsUrl,viewOnly:!!c.appConfig.viewOnly});u=n.jsc,p=n.render,r(St.OP_INIT_CONTAINER_RESULT),en(t,Xt.INIT_CONTAINER_END)}catch(e){const t=Ge.fromError(e);return t.message="initContainer fail, "+Ve(e),void s(t)}!function(e){e.setHooksForPushEvent({before:async e=>{const t=Gt.getOperate(e);return!!t&&(await t.activate(),!0)},after:async e=>{const t=Gt.getOperate(e);return!!t&&(await t.inactivate(!0,{delay:2e3}),!0)}})}(u),u.fireEvent(yi.ON_HOST_API_REGISTER,function(){const e=Yo.getRegisterApisWithNoWrap(),t={};return e.forEach(e=>{t[e.name]={apiType:e.apiType,params:e.params}}),t}());try{en(t,Xt.INIT_APP_START),r(St.OP_INIT_APP_START),l=await Pp({engineType:e.engineType,appKey:t,id:e.id,subType:e.subType,debugUrl:e.debugUrl,bdpLaunchQuery:e.bdpLaunchQuery,scene:e.scene,mode:e.mode,parentMessageChannel:e.parent_message_channel,startPage:e.startPage||"",forceUpdate:e.forceUpdate,canAppUseIframe:e.canAppUseIframe}),r(St.OP_INIT_APP_RESULT),en(t,Xt.INIT_APP_END)}catch(e){const t=Ge.fromError(e);return t.message="initApp fail, "+Ve(e),void s(t)}const d={...l.appConfig,packageVersion:l.version};if(Dt.callParallel(Ut.ON_APP_CONFIG,d,t),i)try{en(t,Xt.APP_CHECK_START),r(St.OP_APP_CHECK_START),await i,r(St.OP_APP_CHECK_RESULT),en(t,Xt.APP_CHECK_END)}catch(n){i=null;const r=Tu(n);return sn.info(`${e.appKey} app check fail ${r.message}`,{appKey:t}),void s(r,n)}sn.info(e.appKey+" container document ready",{appKey:t}),en(t,Xt.START_ROUTE);const h=await ra(e.engineType);await ku.createTask(t,()=>Dp({appKey:t,id:e.id,mode:e.mode,engineType:e.engineType,startPage:e.startPage,appConfig:l.appConfig,docRoot:e.docRoot,appPkgInfo:l,sdkPkgInfo:h})),en(t,Xt.ON_RENDER_SUCCESS),Dt.callParallel(Ut.ON_LOAD_SUCCESS,{packageSourceType:l.packageSourceType},e.appKey),qe.invoke("onAppRenderSuccess",{appKey:e.appKey});const _=Date.now()-n;o.addMap({[Rt.FROM_APP_LAUNCH_START_TO_PAGE_READY]:_,[Rt.APP_LAUNCH_TIMELINE]:rn(t),[Rt.APP_LAUNCH_USE_CACHE]:"disk"===l.packageSourceType?1:0}).setResultTypeSuccess().flush()}const Gp={height:"100%",position:"relative",contain:"paint",overflow:"hidden",color:"black","font-size":"12px","font-weight":"normal","font-style":"normal","font-variant":"normal","text-indent":"initial","text-align":"left","line-height":"1.4","word-spacing":"normal"},Vp=`\n  <div id="__style_node__"></div>\n  <div id="__root__"\n    style="${Object.keys(Gp).reduce((e,t)=>e+=`${t}: ${Gp[t]};`,"")}"\n  ></div>\n  <div id="__script_node__"></div>\n`;var Wp,qp,$p;!function(e){e.BLOCK="block",e.CREATOR="creator"}(Wp||(Wp={})),function(e){e.APP_KEY="app_key",e.BLOCK_ID="blockid",e.INSTANCE_ID="instanceid",e.TYPE="type",e.DEBUG_URL="debugurl",e.HOST="host",e.BLOCK_INFO="blockinfo",e.MODE="mode",e.AUTO_CONTROL="auto_control",e.APP_TRACING="app_tracing",e.LAUNCH_TYPE="launch_type",e.TYPED_DATA_COLLECTION="typed_data_collection"}(qp||(qp={})),function(e){e.ON_LOAD_START="blockLoadStart",e.ON_LOAD_SUCCESS="blockLoadSuccess",e.ON_LOAD_FAIL="blockLoadFail",e.ON_SUBMIT="creatorSubmit",e.ON_DESTROY="blockDestroy",e.ON_CANCEL="creatorCancel",e.ON_ACTIVATE_START="blockActivateStart",e.ON_ACTIVATE_SUCCESS="blockActivateSuccess",e.ON_ACTIVATE_FAIL="blockActivateFail",e.ON_INACTIVATE_START="blockInactivateStart",e.ON_INACTIVATE_SUCCESS="blockInactivateSuccess",e.ON_INACTIVATE_FAIL="blockInactivateFail",e.ON_APP_CONFIG="appConfigSuccess",e.ON_UPDATE_READY="updateReady"}($p||($p={}));class Qp{constructor(e,t,n){p()(this,"onActivate",void 0),p()(this,"onInactivate",void 0),p()(this,"isMobile","ontouchend"in document.body),p()(this,"target",void 0),p()(this,"isFocus",!1),p()(this,"isHover",!1),p()(this,"hasStartup",!1),p()(this,"dispatchTid",void 0),p()(this,"onFocusHandler",()=>{this.isFocus||(this.isFocus=!0,this.isHover||"function"==typeof this.onActivate&&this.onActivate())}),p()(this,"onBlurHandler",()=>{this.isFocus&&(this.isFocus=!1,this.isHover||"function"==typeof this.onInactivate&&this.onInactivate())}),p()(this,"onHoverHandler",()=>{this.isHover||(this.isHover=!0,this.isFocus||"function"==typeof this.onActivate&&this.onActivate())}),p()(this,"onLeaveHandler",()=>{this.isHover&&(this.isHover=!1,this.isFocus||"function"==typeof this.onInactivate&&this.onInactivate())}),p()(this,"onFocusEvent",x(e=>{switch(e.type){case"focus":this.onFocusHandler();break;case"blur":this.onBlurHandler()}},30)),p()(this,"onMouseEvent",x(e=>{switch(e.type){case"mouseenter":this.onHoverHandler();break;case"mouseleave":this.onLeaveHandler()}},30)),p()(this,"onTouchEvent",e=>{if("touchstart"===e.type)return this.dispatchTid&&clearTimeout(this.dispatchTid),void this.onHoverHandler();this.dispatchTid=setTimeout(()=>{this.onLeaveHandler()},5e3)}),this.target=e,this.onActivate=t,this.onInactivate=n}isActive(){return this.isHover||this.isFocus}startup(){this.hasStartup||(this.hasStartup=!0,this.target.addEventListener("focus",this.onFocusEvent,!0),this.target.addEventListener("blur",this.onFocusEvent,!0),this.isMobile?(this.target.addEventListener("touchstart",this.onTouchEvent,!1),this.target.addEventListener("touchend",this.onTouchEvent,!1)):(this.target.addEventListener("mouseenter",this.onMouseEvent,!1),this.target.addEventListener("mouseleave",this.onMouseEvent,!1)))}shutdown(){this.target.removeEventListener("focus",this.onFocusEvent,!0),this.target.removeEventListener("blur",this.onFocusEvent,!0),this.isMobile?(this.target.removeEventListener("touchstart",this.onTouchEvent,!1),this.target.removeEventListener("touchend",this.onTouchEvent,!1)):(this.target.removeEventListener("mouseenter",this.onMouseEvent,!1),this.target.removeEventListener("mouseleave",this.onMouseEvent,!1))}}class zp extends HTMLElement{}class Yp extends zp{static get observedAttributes(){return[qp.BLOCK_ID,qp.INSTANCE_ID,qp.TYPE]}get disableActivateAbility(){return this.props.type===Wp.CREATOR||!Pn()&&On()}get disableActivateStrategy(){return this.isDebug||this.disableActivateAbility}constructor(){super(),p()(this,"props",{}),p()(this,"shadow",void 0),p()(this,"appKey",void 0),p()(this,"hasCreated",void 0),p()(this,"disconnectedTid",void 0),p()(this,"activateStrategy",void 0),p()(this,"isDebug",!1),p()(this,"isAutoControl",!1),p()(this,"firstAttachReadyPromise",void 0),p()(this,"attachReadyPromiseResolve",void 0),p()(this,"blockInfo",null),p()(this,"blockInfoReadyPromise",void 0),p()(this,"blockInfoReadyPromiseResolve",void 0),this.shadow=this.attachShadow({mode:"open"}),this.shadow.innerHTML=Vp,this.activateStrategy=new Qp(this,()=>this.toggleActivateStatus(!0),()=>this.toggleActivateStatus(!1)),this.firstAttachReadyPromise=new Promise(e=>this.attachReadyPromiseResolve=e),this.blockInfoReadyPromise=new Promise(e=>this.blockInfoReadyPromiseResolve=e)}_initData(){if(this.hasCreated)return!0;if(this.props={[qp.APP_KEY]:this.getAttribute(qp.APP_KEY),[qp.TYPE]:this.getAttribute(qp.TYPE),[qp.BLOCK_ID]:this.getAttribute(qp.BLOCK_ID),[qp.INSTANCE_ID]:this.getAttribute(qp.INSTANCE_ID),[qp.HOST]:this.getAttribute(qp.HOST),[qp.DEBUG_URL]:this.getAttribute(qp.DEBUG_URL),[qp.BLOCK_INFO]:this.getAttribute(qp.BLOCK_INFO),[qp.MODE]:this.getAttribute(qp.MODE),[qp.AUTO_CONTROL]:this.getAttribute(qp.AUTO_CONTROL),[qp.APP_TRACING]:this.getAttribute(qp.APP_TRACING),[qp.LAUNCH_TYPE]:this.getAttribute(qp.LAUNCH_TYPE),[qp.TYPED_DATA_COLLECTION]:this.getAttribute(qp.TYPED_DATA_COLLECTION)},this.isAutoControl=null!==this.props.auto_control,this.isDebug=!!this.props.debugurl,this.props.blockinfo)try{this.setBlockInfo(JSON.parse(this.props.blockinfo))}catch(e){}return!!this.props.blockid}attributeChangedCallback(e,t,n){}connectedCallback(){this.disconnectedTid&&clearTimeout(this.disconnectedTid),this._initData(),this.attachReadyPromiseResolve(!0),this.isAutoControl&&this.createApp()}disconnectedCallback(){this.isAutoControl&&(this.disconnectedTid=setTimeout(()=>{this.destroyApp()},0))}getRoot(){return this.shadow.getElementById("__root__")}setBlockInfo(e){this.blockInfo=e,this.blockInfoReadyPromiseResolve(!0)}async create(){this._initData()||await this.firstAttachReadyPromise,this.createApp()}destroy(){this.parentElement&&this.parentElement.removeChild(this),this.destroyApp()}isSupportDarkMode(){return eu(this.appKey)}toggleActivateStatus(e){const t=Gt.getOperate(this.appKey);t&&(t.lockAutoInactivate(e),e?t.activate():t.inactivate(!1))}async createApp(){if(!this.hasCreated){this.hasCreated=!0,this.appKey=this.props.app_key||k(),np.info("block createApp start",{appKey:this.appKey}),sa.setComponentByAppKey(this.appKey,this),this.disableActivateStrategy||this.activateStrategy.startup(),this.setLaunchHook(),this.onLifeCycleChange($p.ON_LOAD_START,"start");try{await Bp({id:this.props.blockid,instanceId:this.props.instanceid,subType:this.props.type===Wp.CREATOR?"creator":void 0,docRoot:this.shadow,host:this.props.host,debugUrl:this.props.debugurl,appKey:this.appKey,engineType:f.BLOCK,appTracing:this.props.app_tracing||"",forceUpdate:"force_update"===this.props.launch_type}),np.info("block createApp success",{appKey:this.appKey})}catch(e){np.error("block createApp fail: "+e,{appKey:this.appKey})}}}destroyApp(){this.hasCreated&&(this.hasCreated=!1,sa.removeComponentByAppKey(this.appKey),Hp(this.appKey),this.onLifeCycleChange($p.ON_DESTROY),Dt.clearHooks(this.appKey),this.shadow.innerHTML=Vp,this.activateStrategy.shutdown(),Gt.shutdown(this.appKey),np.info("block destroyApp end",{appKey:this.appKey}))}onLifeCycleChange(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))}setLaunchHook(){Dt.tap(Ut.ON_UPDATE_READY,e=>{this.onLifeCycleChange($p.ON_UPDATE_READY,e)},this.appKey),Dt.tap(Ut.ON_LOAD_SUCCESS,e=>{if(this.onLifeCycleChange($p.ON_LOAD_SUCCESS,e),this.disableActivateAbility)return;const t=Gt.startup(this.appKey,this.props.blockid);this.disableActivateStrategy&&t.lockAutoInactivate(!0),this.activateStrategy.isActive()?np.info("ignore inactivateApp because user is hover",{appKey:this.appKey}):t.inactivate(!0)},this.appKey),Dt.tap(Ut.ON_LOAD_FAIL,e=>{this.onLifeCycleChange($p.ON_LOAD_FAIL,e)},this.appKey),Dt.tap(Ut.ON_SUBMIT,e=>{this.onLifeCycleChange($p.ON_SUBMIT,e)},this.appKey),Dt.tap(Ut.ON_APP_CONFIG,e=>{this.onLifeCycleChange($p.ON_APP_CONFIG,e)},this.appKey),Dt.tap(Ut.ON_CANCEL_CREATOR,()=>{this.onLifeCycleChange($p.ON_CANCEL)},this.appKey),Dt.tap(Ut.ON_ACTIVATE,e=>{const t={start:$p.ON_ACTIVATE_START,success:$p.ON_ACTIVATE_SUCCESS,fail:$p.ON_ACTIVATE_FAIL};this.onLifeCycleChange(t[e.type])},this.appKey),Dt.tap(Ut.ON_INACTIVATE,e=>{const t={start:$p.ON_INACTIVATE_START,success:$p.ON_INACTIVATE_SUCCESS,fail:$p.ON_INACTIVATE_FAIL};this.onLifeCycleChange(t[e.type])},this.appKey),Dt.tap(Ut.ON_BOTH_DOCUMENTREADY,async e=>{try{await this.blockInfoReadyPromise;!function(e,t){const{jsc:n,render:r,appKey:o,data:a,viewOnly:i}=e;Object.assign(a,t),np.info(`${o} appStart, send page ${a.path} to worker`),n.fireEvent(yi.ON_APP_ROUTE,a);const s=r.app&&r.app[a.path];np.info(`${o} dispatch to render, generateFunc: ${typeof s.render}, vdomRoot: ${r.vdomRoot}`),document.dispatchEvent(new CustomEvent(yi.GENERATE_FUNC_READY,{detail:{generateFunc:s,proxyWindow:{appKey:o,vdomRoot:r.vdomRoot,viewOnly:i,theme:r.theme,...i?a:{}}}}))}(e,{__$mode__:this.props.mode||void 0,blockType:this.props.type||"",blockAllInfo:{blockInfo:this.blockInfo,host:this.props.host,blockInstanceInfo:this.props.instanceid,typedDataCollection:JSON.parse(this.props.typed_data_collection)||{}}})}catch(e){this.onLifeCycleChange($p.ON_LOAD_FAIL,{errMsg:"onBothDocumentReady fail "+e})}},this.appKey)}}var Jp,Xp,Zp,el;!function(e){e.APP_KEY="app_key",e.APP_ID="app_id",e.DEBUG_URL="debug_url",e.DEBUG_WS_URL="debug_ws_url",e.MODE="mode",e.START_PAGE="start_page",e.LAUNCH_QUERY="bdp_launch_query",e.SCENE="scene",e.WEBVIEW_UNIQUE="webview_unique",e.PARENT_MESSAGE_CHANNEL="parent_message_channel",e.APP_TRACING="app_tracing",e.IS_PRELOAD="is_preload",e.IS_RECOVER_LAUNCH="is_recover_launch",e.LAUNCH_TYPE="launch_type",e.LEAST_VERSION="least_version",e.HOST_CONFIG_INFO="host_config_info",e.CAN_APP_USE_IFRAME="can_app_use_iframe"}(Jp||(Jp={})),function(e){e.ON_LOAD_START="loadStart",e.ON_APP_CREATE_START="appCreateStart",e.ON_LOAD_SUCCESS="loadSuccess",e.ON_LOAD_FAIL="loadFail",e.ON_DESTROY="destroy",e.ON_APP_CONFIG="appConfigSuccess"}(Xp||(Xp={}));!function(e){e.APP_KEY="app_key",e.APP_ID="app_id",e.MODE="mode",e.SCENE="scene",e.WEBVIEW_UNIQUE="webview_unique",e.BOT_ID="bot_id",e.APP_NAME="app_name",e.ICON_URL="icon_url",e.LEAST_VERSION="least_version",e.FORCE_USE_META="forceUseMeta"}(Zp||(Zp={})),function(e){e.ON_LOAD_START="loadStart",e.ON_APP_CREATE_START="appCreateStart",e.ON_LOAD_SUCCESS="loadSuccess",e.ON_LOAD_FAIL="loadFail",e.ON_DESTROY="destroy"}(el||(el={}));const tl=void 0;let nl=!1;function rl(){customElements.define("op-block",Yp)}async function ol(e){if(!nl){nl=!0;try{const t=Date.now();np.info("initEngineStart: "+t),await mu(e),np.info("initEngineEnd and cost "+(Date.now()-t)),rl()}catch(e){throw nl=!1,e}}}function al(e){e.forEach(e=>gn({id:e.blockId,subType:e.type===Wp.CREATOR?"creator":void 0,engineType:f.BLOCK})),(e=>{const{host:t}=an();qe.invoke("prefetchAppCheckInfo",{uniqueIds:e,host:t,engineType:f.BLOCK})})(e.map(e=>e.blockId))}function il(e,t){ea.updateTheme(e,t)}const sl="2.21.5";var cl,ul;n.p=ee(),On()&&(cl=()=>{a(s.WORKER_CONTAINER,Qn)},An.includes(cl)||An.push(cl)),a(s.START_SERVER,(async function(){const e=await ce();new Function(e)();const t=new h("runtime");a(s.RUNTIME_TO_SERVER_COMMUNICATION,t)})),ul={initReport:e=>{const{userId:t,region:n}=e;Object(le.a)("config",{sampleRate:1,bid:"pc_openplatform_engine",slardar_web_id:t,hookFetch:!0,hookXHR:!0,enableFMP:!1,enableSizeStats:!1,enableCatchJSError:!0,enableFPSJankTimesMonitor:!1,enableCrash:!0,enableBreadcrumb:!1,domain:n===T.FEISHU?"slardar-bd.feishu.cn":"slardar-bd.larksuite.com",maxBatchReportLength:80,batchReportWait:1e3,pid:`${location.host}/${st(location.pathname)}`,beforeSend:e=>({...e,url:st(e.url)})})},reportEvent:e=>{const{eventName:t,metrics:n,categories:r}=e;Object(le.a)("emit","custom",{event_name:t,metrics:n,tags:r})},reportLog:e=>{const{msg:t,level:n,categories:r}=e;Object(le.a)("emit","log",{value:t,level:n,tags:r})}},Object.assign($e,ul),a(s.REQUEST,e=>{const t=lt.a.CancelToken.source();e.headers=Object.assign({"Content-Type":"text/plain;charset=utf-8"},e.headers);const n=lt.a.request({...e,data:e.body,cancelToken:t.token,transformResponse:[function(t){if("string"==typeof t&&e.responseType===ut.JSON)try{t=JSON.parse(t)}catch(e){}return t}]}).then(e=>({data:e.data,status:e.status,statusText:e.statusText,headers:e.headers})).catch(e=>{throw e.response||e});return n.abort=()=>t.cancel("abort"),n}),On()?Cn()?(a(s.WORKER_CONTAINER,qn),qn.prefetchWorkerCodeUrl()):(a(s.WORKER_CONTAINER,Qn),console.error("looks like sth wrong happenes with worker container register")):a(s.WORKER_CONTAINER,Qn),a(s.SHADOW_RENDER_CONTAINER,class{constructor(){p()(this,"messageHandlers",[]),p()(this,"_docRoot",void 0),p()(this,"onMessageHandler",e=>{[...this.messageHandlers].forEach(t=>t(e.detail.data))})}async create(e,t){this._docRoot=e,document.addEventListener(zn,this.onMessageHandler),await Zn(t)}async importScript(e,...t){const n=await Xn(e);new Function("__LARK_BLOCK_GLOBAL_VAR__","putCssToStyle",n)(...t)}show(){}hide(){}setStyles(e){this._docRoot&&Object.assign(this._docRoot.style,e)}postMessage(e){document.dispatchEvent(new CustomEvent(Yn,{detail:{data:e}}))}onMessage(e){this.messageHandlers.push(e)}offMessage(e){const t=this.messageHandlers.findIndex(t=>t===e);t>-1&&this.messageHandlers.splice(t,1)}destroy(){document.removeEventListener(zn,this.onMessageHandler)}}),a(s.IFRAME_RENDER_CONTAINER,class{constructor(){p()(this,"_iframe",void 0),p()(this,"messageHandlers",[]),p()(this,"onMessageHandler",e=>{e.source===this._iframe.contentWindow&&[...this.messageHandlers].forEach(t=>t(e.data))}),p()(this,"docRoot",void 0),p()(this,"importScript",e=>new Promise((t,n)=>{const r=document.createElement("script");let o="";o="string"!=typeof e?(e=>{if("string"==typeof e||"number"==typeof e)return e;const t=new Blob([e],{type:"text/javascript"});return"undefined"!=typeof window?(window.URL||window.webkitURL).createObjectURL(t):URL.createObjectURL(t)})(e):e,r.src=o,r.onload=()=>{(e=>{try{"undefined"!=typeof window?(window.URL||window.webkitURL).revokeObjectURL(e):"undefined"!=typeof URL&&URL.revokeObjectURL(e)}catch(e){}})(o),t()},r.onerror=()=>n("iframe importScript failed: "+o),this._iframe.contentDocument.body.appendChild(r)}))}setDefaultIframeStyle(){this._iframe.style.border="none",this._iframe.style.position="absolute",this._iframe.style.width="100%",this._iframe.style.height="100%",this._iframe.style.visibility="hidden",this._iframe.style.zIndex="-1"}create(e,t){return new Promise((n,r)=>{this.docRoot=e,this._iframe=document.createElement("iframe"),this._iframe.src=t,this._iframe.onload=()=>{const e=this._iframe.contentWindow;e&&e.ttJSBridge?n():r(new Error("iframe load fail"))},this._iframe.onerror=()=>r(new Error("iframe load fail")),this.setDefaultIframeStyle(),e.appendChild(this._iframe),window.addEventListener("message",this.onMessageHandler)})}show(){this._iframe.style.visibility="visible",this._iframe.style.zIndex="1"}hide(){this._iframe.style.visibility="hidden",this._iframe.style.zIndex="-1"}setStyles(e){Object.assign(this._iframe.style,e)}postMessage(e){const t=this._iframe.contentWindow;if(t)switch(e.type){case"setGlobal":{const{appKey:n,renderId:r,language:o,appDir:a,specificRunMode:i,runMode:s,EMANativeConfig:c}=e.data;window.PC_RENDER_MANAGER={getRender:e=>er.getRender(n,e)},window.PC_APP_DIR=a,t.__webviewId__=r,t.PC_LANGUAGE=o,t.PC_SPECIFIC_RUN_MODE=i,t.PC_RUN_MODE=s,t.EMANativeConfig=Object.assign({},t.EMANativeConfig,c);break}case"publish":{const{event:n,data:r,wIds:o}=e;t.ttJSBridge.subscribeHandler(n,r,o);break}case"on":{const{event:n,data:r}=e;t.ttJSBridge.subscribeHandler(n,r);break}case"invoke":{const{cId:n,data:r}=e;t.ttJSBridge.invokeHandler(n,r);break}case"setTrace":{const{data:n}=e;t.EMANativeConfig||(t.EMANativeConfig={}),t.EMANativeConfig.TMATrace=()=>n.trace,t.EMANativeConfig.apiUseJSSDKMonitor=()=>n.enableSdkMonitor;break}case"setHostConfigInfo":t.EngineHost={configInfo:e.data.hostConfigInfo}}}onMessage(e){this.messageHandlers.push(e)}offMessage(e){const t=this.messageHandlers.findIndex(t=>t===e);t>-1&&this.messageHandlers.splice(t,1)}destroy(){const e=this._iframe.contentDocument;e&&(e.body.innerHTML="",this.docRoot.removeChild(this._iframe),window.removeEventListener("message",this.onMessageHandler))}}),a(s.PLATFORM_COMMON,hr),a(s.RUNTIME_COMMON,yr),function(){const e=function(e){Jo(e)};e({needWrap:!0,name:"getDocDomains",handler:async function(){return{errMsg:"getDocDomains:ok",domains:["https://bytedance.feishu.cn/docs"]}},params:{}}),e({needWrap:!0,name:"getDeviceId",handler:async function(){return{errMsg:"getDeviceId:ok",id:""}},params:{}}),e({needWrap:!0,name:"getNTPTime",handler:async function(){return{time:Date.now(),errMsg:"getNTPTime:ok"}},params:{}}),e({needWrap:!0,name:"getNTPStatus",handler:async function(){return{reliable:!1,errMsg:"getNTPStatus:ok"}},params:{}}),e({needWrap:!0,name:"openFile",handler:async function(e){const{path:t}=e;return window.open(t),{errMsg:"openFile:ok"}},params:{path:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"openExternal",handler:async function(e){const{url:t}=e;return window.open(t),{errMsg:"openExternal:ok"}},params:{url:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"enterBot",handler:async function(e){const{botId:t}=e;return window.open("https://applink.feishu.cn/client/bot/open?appId="+t),{errMsg:"enterBot:ok"}},params:{botId:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"enterChat",handler:async function(e){const{chatId:t}=e;return window.open("https://applink.feishu.cn/client/chat/open?chatId="+t),{errMsg:"enterChat:ok"}},params:{chatId:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"hasWaterMark",handler:async function(){return{has:!1,errMsg:"hasWaterMark:ok"}},params:{}}),e({needWrap:!0,name:"getUserInfoEx",handler:async function(){return{data:{},errMsg:"getUserInfoEx:fail"}},params:{}}),e({needWrap:!0,name:"print",handler:async function(){return{errMsg:"print:fail"}},params:{url:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"getWifiInfo",handler:async function(){return{errMsg:"getWifiInfo:fail"}},params:{}}),e({needWrap:!0,name:"getAppStrategy",handler:async function(e){const{appId:t}=e;return{appState:"no",errMsg:"getAppStrategy:fail"}},params:{appId:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"getChatsByChatIds",handler:async function(){return{chatInfo:[],errMsg:"getChatsByChatIds:fail"}},params:{chatIds:{required:!0,type:_r.Array}}}),e({needWrap:!0,name:"getCardInfo",handler:async function(){return{richTextInfo:{},errMsg:"getCardInfo:fail"}},params:{jsonStr:{required:!0,type:_r.String},appId:{required:!0,type:_r.String},chatId:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"sendPreviewCard",handler:async function(){return{sendInfo:{},errMsg:"sendPreviewCard:fail"}},params:{cardKey:{required:!0,type:_r.String},chatIds:{required:!0,type:_r.Array}}}),e({needWrap:!0,name:"getOpenAppBadgeNodes",handler:async function(){return{badgeNum:-1,needShow:!1,errMsg:"getOpenAppBadgeNodes:fail"}},params:{chatIds:{required:!0,type:_r.Array}}}),e({needWrap:!0,name:"updateOpenAppBadgeNodes",handler:async function(){return{code:0,errMsg:"updateOpenAppBadgeNodes:fail"}},params:{}}),e({needWrap:!0,name:"getMsgContent",handler:async function(){return{code:-1,data:{},errMsg:"getMsgContent:fail"}},params:{}}),e({needWrap:!0,name:"checkAppSession",handler:async function(){return{data:{valid:!1,errCode:0},errMsg:"checkAppSession:fail"}},params:{}}),e({needWrap:!0,name:"getUnReadMsgAtMeCount",handler:async function(){return{unReadAtMeCount:0,errMsg:"getUnReadMsgAtMeCount:ok"}},params:{}}),e({needWrap:!0,name:"showFilePickerDialog",handler:async function(e){return{errMsg:"showFilePickerDialog:fail",result:{canceled:!1,filePaths:[]}}},params:{}}),e({needWrap:!0,name:"windowFocus",handler:async function(e){return{errMsg:"windowFocus:fail"}},params:{mode:{required:!0,type:_r.String},appId:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"getSystemInfo",handler:async function(){return{errMsg:"getSystemInfo:ok",screenWidth:window.screen.availWidth,screenHeight:window.screen.availHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio}},params:{}}),e({needWrap:!0,name:"getImageInfo",handler:async function(e){return new Promise(t=>{try{const n=new Image;n.src=e.nativePath,setInterval(()=>{if(n.width>0||n.height>0)return clearInterval(void 0),void t({height:n.height,width:n.width,code:0,errMsg:"getImageInfo:ok"})},40),n.onerror=e=>{console.error("getImageInfo:fail "+JSON.stringify(e)),clearInterval(void 0),t({code:1,errMsg:"getImageInfo:fail"})},n.onload=()=>{clearInterval(void 0),t({height:n.height,width:n.width,code:0,errMsg:"getImageInfo:ok"})}}catch(e){clearInterval(void 0),console.error("getImageInfo:fail "+e),t({errMsg:"getImageInfo:fail "+e,code:1})}})},params:{nativePath:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"readClipboardText",handler:async function(e){return{errMsg:"readClipboardText:fail",code:Kr.FAIL}},params:{format:{type:_r.String,required:!1}}}),e({needWrap:!0,name:"writeClipboardText",handler:async function(e){return{errMsg:"writeClipboardText:fail",code:Kr.FAIL}},params:{data:{required:!0,type:_r.String}}}),e({needWrap:!0,name:"i18n",handler:async function(e){const{keys:t=[]}=e;return{errMsg:"i18n:ok",code:Kr.SUCCESS,data:t}},params:{keys:{required:!0,type:_r.Array}}}),e({needWrap:!0,name:"viewImages",handler:async function(e){return{errMsg:"viewImages:fail",sessionId:-1}},params:{currentIndex:{required:!0,type:_r.Number},getLeft:{type:_r.String},getRight:{type:_r.String},images:{required:!0,type:_r.Array},watermark:{type:_r.String},winKey:{type:_r.String}}}),e({needWrap:!0,name:"checkNetwork",handler:async function(){return{errMsg:"checkNetwork:ok",code:Kr.SUCCESS,isOnline:navigator.onLine}},params:{}}),e({needWrap:!0,name:"fetchUrlToFile",handler:async function(e){const{url:t,path:n}=e;try{const e=await fetch(t);await e.arrayBuffer();return{errMsg:"fetchUrlToFile:ok",code:Kr.SUCCESS}}catch(e){return{errMsg:"fetchUrlToFile:fail",code:Kr.FAIL}}},params:{url:{type:_r.String,required:!0},path:{type:_r.String,required:!0}}}),e({needWrap:!0,name:"windowOpen",handler:async function(e,t){const n=new URL(e.url),r=W(),o=/Lark\/\d/i.test(navigator.userAgent),a=await N(e.url),i=/https?:/.test(n.protocol)&&!a;if(r){if(o||i){const t=document.createElement("a");return t.setAttribute("href",e.url),t.click(),{errMsg:"windowOpen:ok",code:Kr.SUCCESS}}return(await Xo({appKey:t.appKey,engineType:f.BLOCK,push:()=>{}},"showModal",{title:"Notice?",content:"Do you want to allow this app to open other links?",confirmText:"Yes",cancelText:"No",showCancel:!0,iconType:gr.WARNING})).status===qr.CONFIRM?(window.open(e.url),{errMsg:"windowOpen:ok",code:Kr.SUCCESS}):{errMsg:"windowOpen:fail user cancel",code:Kr.FAIL}}if(o||i)window.open(e.url);else{let t=document.querySelector("#op-engine-open-app");t?t.src=e.url:(t=document.createElement("iframe"),t.id="op-engine-open-app",t.src=e.url,t.style.display="none",document.body.appendChild(t))}return{errMsg:"windowOpen:ok",code:Kr.SUCCESS}},params:{url:{type:_r.String,required:!0}}})}(),function(){const e=(async()=>n.e(1).then(n.t.bind(null,208,7)))();!async function(e){const{updateTheme:t}=await e,n=ea.getCurrentTheme();n&&t(n),ea.onThemeChange((e,n)=>{n||t(e)})}(e);const t=function(e){Jo(e)};t({name:"showModal",params:{},needWrap:!0,async handler(t){const{title:n,content:r,confirmText:o,cancelText:a,showCancel:i,iconType:s="warning"}=t,{showModal:c}=await e;return{errMsg:"showModal:ok",status:await new Promise(e=>{c({key:"op-engine-base-modal",payload:{title:n,content:r,enableCancelButton:i,okText:o,cancelText:a,iconType:s,onCancel(){e(!1)},onOk(){e(!0)}}})})?qr.CONFIRM:qr.CANCEL}}}),t({name:"showToast",params:{},needWrap:!0,async handler(t){try{const{showToast:n}=await e;return n({...t,key:"op-component-toast-key"+ta}),{errMsg:"showToast:ok"}}catch(e){return{errMsg:"showToast:fail"}}}}),t({name:"hideToast",params:{},needWrap:!0,async handler(){try{const{hideToast:t}=await e;return t("op-component-toast-key"+ta++),{errMsg:"hideToast:ok"}}catch(e){return{errMsg:"hideToast:fail"}}}})}()},,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var i=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&c()}function s(){a(i)}function c(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);o=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;i.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},p=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},l=E(0,0,0,0);function d(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function _(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return l;var r=p(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],a=e["padding-"+o];t[o]=d(a)}return t}(r),a=o.left+o.right,i=o.top+o.bottom,s=d(r.width),c=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=h(r,"left","right")+a),Math.round(c+i)!==n&&(c-=h(r,"top","bottom")+i)),!function(e){return e===p(e).document.documentElement}(e)){var u=Math.round(s+a)-t,_=Math.round(c+i)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(_)&&(c-=_)}return E(o.left,o.top,s,c)}var f="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof p(e).SVGGraphicsElement}:function(e){return e instanceof p(e).SVGElement&&"function"==typeof e.getBBox};function g(e){return r?f(e)?function(e){var t=e.getBBox();return E(0,0,t.width,t.height)}(e):_(e):l}function E(e,t,n,r){return{x:e,y:t,width:n,height:r}}var m=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),y=function(e,t){var n,r,o,a,i,s,c,p=(r=(n=t).x,o=n.y,a=n.width,i=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),u(c,{x:r,y:o,width:a,height:i,top:o,right:r+a,bottom:i+o,left:r}),c);u(this,{target:e,contentRect:p})},A=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new m(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new y(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),T="undefined"!=typeof WeakMap?new WeakMap:new n,S=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new A(t,n,this);T.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){S.prototype[e]=function(){var t;return(t=T.get(this))[e].apply(t,arguments)}}));var v=void 0!==o.ResizeObserver?o.ResizeObserver:S;t.a=v}).call(this,n(5))}]);